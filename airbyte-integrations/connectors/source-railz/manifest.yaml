version: "4.3.2"
definitions:
  selector:
    type: RecordSelector
    extractor:
      type: DpathExtractor
      field_path:
      - "data"
  requester:
    type: HttpRequester
    url_base: "https://api.railz.ai/"
    http_method: "GET"
    authenticator:
      class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
      url: "https://auth.railz.ai/getAccess"
      client_id: "{{ config.client_id }}"
      secret_key: "{{ config.secret_key }}"
      lifetime: "PT3600S"
  retriever:
    type: SimpleRetriever
    record_selector:
      type: RecordSelector
      extractor:
        type: DpathExtractor
        field_path:
        - "data"
    paginator:
      type: DefaultPaginator
      page_size_option:
        inject_into: request_parameter
        field_name: "limit"
      pagination_strategy:
        type: OffsetIncrement
        page_size: 100
      page_token_option:
        type: RequestOption
        inject_into: request_parameter
        field_name: "offset"
    requester:
      type: HttpRequester
      url_base: "https://api.railz.ai/"
      http_method: "GET"
      authenticator:
        class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
        url: "https://auth.railz.ai/getAccess"
        client_id: "{{ config.client_id }}"
        secret_key: "{{ config.secret_key }}"
        lifetime: "PT3600S"
  base_stream:
    type: DeclarativeStream
    retriever:
      type: SimpleRetriever
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path:
          - "data"
      paginator:
        type: DefaultPaginator
        page_size_option:
          inject_into: request_parameter
          field_name: "limit"
        pagination_strategy:
          type: OffsetIncrement
          page_size: 100
        page_token_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: "offset"
      requester:
        type: HttpRequester
        url_base: "https://api.railz.ai/"
        http_method: "GET"
        authenticator:
          class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
          url: "https://auth.railz.ai/getAccess"
          client_id: "{{ config.client_id }}"
          secret_key: "{{ config.secret_key }}"
          lifetime: "PT3600S"
  businesses_stream:
    type: DeclarativeStream
    retriever:
      type: SimpleRetriever
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path:
          - "data"
      paginator:
        type: DefaultPaginator
        page_size_option:
          inject_into: request_parameter
          field_name: "limit"
        pagination_strategy:
          type: OffsetIncrement
          page_size: 100
        page_token_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: "offset"
      requester:
        type: HttpRequester
        url_base: "https://api.railz.ai/"
        http_method: "GET"
        authenticator:
          class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
          url: "https://auth.railz.ai/getAccess"
          client_id: "{{ config.client_id }}"
          secret_key: "{{ config.secret_key }}"
          lifetime: "PT3600S"
    primary_key: "businessName"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          businessName:
            type: string
          status:
            type: string
          createdAt:
            type: string
            format: date-time
          updatedAt:
            type: string
            format: date-time
          metadata:
            type:
            - 'null'
            - array
            items:
              type: string
          connections:
            type: array
            items:
              type: object
              properties:
                businessName:
                  type: string
                connectionId:
                  type: string
                serviceName:
                  type: string
                firstRecordDate:
                  type: string
                  format: date-time
                description:
                  type: string
                status:
                  type: string
                createdAt:
                  type: string
                  format: date-time
                updatedAt:
                  type: string
                  format: date-time
  connections_stream:
    type: DeclarativeStream
    retriever:
      type: SimpleRetriever
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path:
          - "data"
      paginator:
        type: DefaultPaginator
        page_size_option:
          inject_into: request_parameter
          field_name: "limit"
        pagination_strategy:
          type: OffsetIncrement
          page_size: 100
        page_token_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: "offset"
      requester:
        type: HttpRequester
        url_base: "https://api.railz.ai/"
        http_method: "GET"
        authenticator:
          class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
          url: "https://auth.railz.ai/getAccess"
          client_id: "{{ config.client_id }}"
          secret_key: "{{ config.secret_key }}"
          lifetime: "PT3600S"
    primary_key: "connectionId"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          businessName:
            type: string
          connectionId:
            type: string
          serviceName:
            type: string
          firstRecordDate:
            type: string
            format: date-time
          description:
            type: string
          status:
            type: string
          createdAt:
            type: string
            format: date-time
          updatedAt:
            type: string
            format: date-time
  connections_slice_stream:
    type: DeclarativeStream
    retriever:
      type: SimpleRetriever
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path:
          - "data"
        record_filter:
          condition: "{{ record.status in ['active', 'expired'] and record.serviceName
            in parameters.serviceNames }}"
      paginator:
        type: DefaultPaginator
        page_size_option:
          inject_into: request_parameter
          field_name: "limit"
        pagination_strategy:
          type: OffsetIncrement
          page_size: 100
        page_token_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: "offset"
      requester:
        type: HttpRequester
        url_base: "https://api.railz.ai/"
        http_method: "GET"
        authenticator:
          class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
          url: "https://auth.railz.ai/getAccess"
          client_id: "{{ config.client_id }}"
          secret_key: "{{ config.secret_key }}"
          lifetime: "PT3600S"
  base_service_stream:
    type: DeclarativeStream
    retriever:
      type: SimpleRetriever
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path:
          - "data"
      paginator:
        type: DefaultPaginator
        page_size_option:
          inject_into: request_parameter
          field_name: "limit"
        pagination_strategy:
          type: OffsetIncrement
          page_size: 100
        page_token_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: "offset"
      requester:
        type: HttpRequester
        url_base: "https://api.railz.ai/"
        http_method: "GET"
        authenticator:
          class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
          url: "https://auth.railz.ai/getAccess"
          client_id: "{{ config.client_id }}"
          secret_key: "{{ config.secret_key }}"
          lifetime: "PT3600S"
        request_parameters:
          businessName: "{{ stream_slice.connection.businessName }}"
          serviceName: "{{ stream_slice.connection.serviceName }}"
      partition_router:
        type: SubstreamPartitionRouter
        parent_stream_configs:
        - stream:
            type: DeclarativeStream
            retriever:
              type: SimpleRetriever
              record_selector:
                type: RecordSelector
                extractor:
                  type: DpathExtractor
                  field_path:
                  - "data"
                record_filter:
                  condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                    in parameters.serviceNames }}"
              paginator:
                type: DefaultPaginator
                page_size_option:
                  inject_into: request_parameter
                  field_name: "limit"
                pagination_strategy:
                  type: OffsetIncrement
                  page_size: 100
                page_token_option:
                  type: RequestOption
                  inject_into: request_parameter
                  field_name: "offset"
              requester:
                type: HttpRequester
                url_base: "https://api.railz.ai/"
                http_method: "GET"
                authenticator:
                  class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                  url: "https://auth.railz.ai/getAccess"
                  client_id: "{{ config.client_id }}"
                  secret_key: "{{ config.secret_key }}"
                  lifetime: "PT3600S"
          parent_key: "/"
          partition_field: "connection"
    transformations:
    - type: AddFields
      fields:
      - path:
        - "businessName"
        value: "{{ stream_slice.connection.businessName }}"
      - path:
        - "serviceName"
        value: "{{ stream_slice.connection.serviceName }}"
  customers_stream:
    type: DeclarativeStream
    retriever:
      type: SimpleRetriever
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path:
          - "data"
      paginator:
        type: DefaultPaginator
        page_size_option:
          inject_into: request_parameter
          field_name: "limit"
        pagination_strategy:
          type: OffsetIncrement
          page_size: 100
        page_token_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: "offset"
      requester:
        type: HttpRequester
        url_base: "https://api.railz.ai/"
        http_method: "GET"
        authenticator:
          class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
          url: "https://auth.railz.ai/getAccess"
          client_id: "{{ config.client_id }}"
          secret_key: "{{ config.secret_key }}"
          lifetime: "PT3600S"
        request_parameters:
          businessName: "{{ stream_slice.connection.businessName }}"
          serviceName: "{{ stream_slice.connection.serviceName }}"
      partition_router:
        type: SubstreamPartitionRouter
        parent_stream_configs:
        - stream:
            type: DeclarativeStream
            retriever:
              type: SimpleRetriever
              record_selector:
                type: RecordSelector
                extractor:
                  type: DpathExtractor
                  field_path:
                  - "data"
                record_filter:
                  condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                    in parameters.serviceNames }}"
              paginator:
                type: DefaultPaginator
                page_size_option:
                  inject_into: request_parameter
                  field_name: "limit"
                pagination_strategy:
                  type: OffsetIncrement
                  page_size: 100
                page_token_option:
                  type: RequestOption
                  inject_into: request_parameter
                  field_name: "offset"
              requester:
                type: HttpRequester
                url_base: "https://api.railz.ai/"
                http_method: "GET"
                authenticator:
                  class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                  url: "https://auth.railz.ai/getAccess"
                  client_id: "{{ config.client_id }}"
                  secret_key: "{{ config.secret_key }}"
                  lifetime: "PT3600S"
          parent_key: "/"
          partition_field: "connection"
    transformations:
    - type: AddFields
      fields:
      - path:
        - "businessName"
        value: "{{ stream_slice.connection.businessName }}"
      - path:
        - "serviceName"
        value: "{{ stream_slice.connection.serviceName }}"
    primary_key: "id"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          id:
            type:
            - string
            - integer
          businessName:
            type: string
          serviceName:
            type: string
          customerName:
            type: string
          contactName:
            type:
            - 'null'
            - string
          emailAddress:
            type:
            - 'null'
            - string
          website:
            type:
            - 'null'
            - string
          defaultCurrency:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - string
                - integer
              name:
                type:
                - 'null'
                - string
              symbol:
                type:
                - 'null'
                - string
          phone:
            type:
            - 'null'
            - string
          addresses:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                line1:
                  type:
                  - 'null'
                  - string
                line2:
                  type:
                  - 'null'
                  - string
                city:
                  type:
                  - 'null'
                  - string
                region:
                  type:
                  - 'null'
                  - string
                country:
                  type:
                  - 'null'
                  - string
                postalCode:
                  type:
                  - 'null'
                  - string
                type:
                  type: string
          contacts:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                name:
                  type:
                  - 'null'
                  - string
                email:
                  type:
                  - 'null'
                  - string
                phone:
                  type:
                  - 'null'
                  - string
                addresses:
                  type:
                  - 'null'
                  - object
                  properties:
                    line1:
                      type:
                      - 'null'
                      - string
                    line2:
                      type:
                      - 'null'
                      - string
                    city:
                      type:
                      - 'null'
                      - string
                    region:
                      type:
                      - 'null'
                      - string
                    country:
                      type:
                      - 'null'
                      - string
                    postalCode:
                      type:
                      - 'null'
                      - string
                    type:
                      type: string
                status:
                  type: string
                modifiedDate:
                  type:
                  - 'null'
                  - string
                  format: date-time
          taxNumber:
            type:
            - 'null'
            - string
          balance:
            type:
            - 'null'
            - number
          status:
            type: string
          subsidiaryRefs:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                id:
                  type:
                  - string
                  - integer
                name:
                  type:
                  - 'null'
                  - string
                modifiedDate:
                  type:
                  - 'null'
                  - string
                  format: date-time
          sourceModifiedDate:
            type:
            - 'null'
            - string
            format: date-time
  accounts_stream:
    type: DeclarativeStream
    retriever:
      type: SimpleRetriever
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path:
          - "data"
      paginator:
        type: DefaultPaginator
        page_size_option:
          inject_into: request_parameter
          field_name: "limit"
        pagination_strategy:
          type: OffsetIncrement
          page_size: 100
        page_token_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: "offset"
      requester:
        type: HttpRequester
        url_base: "https://api.railz.ai/"
        http_method: "GET"
        authenticator:
          class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
          url: "https://auth.railz.ai/getAccess"
          client_id: "{{ config.client_id }}"
          secret_key: "{{ config.secret_key }}"
          lifetime: "PT3600S"
        request_parameters:
          businessName: "{{ stream_slice.connection.businessName }}"
          serviceName: "{{ stream_slice.connection.serviceName }}"
      partition_router:
        type: SubstreamPartitionRouter
        parent_stream_configs:
        - stream:
            type: DeclarativeStream
            retriever:
              type: SimpleRetriever
              record_selector:
                type: RecordSelector
                extractor:
                  type: DpathExtractor
                  field_path:
                  - "data"
                record_filter:
                  condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                    in parameters.serviceNames }}"
              paginator:
                type: DefaultPaginator
                page_size_option:
                  inject_into: request_parameter
                  field_name: "limit"
                pagination_strategy:
                  type: OffsetIncrement
                  page_size: 100
                page_token_option:
                  type: RequestOption
                  inject_into: request_parameter
                  field_name: "offset"
              requester:
                type: HttpRequester
                url_base: "https://api.railz.ai/"
                http_method: "GET"
                authenticator:
                  class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                  url: "https://auth.railz.ai/getAccess"
                  client_id: "{{ config.client_id }}"
                  secret_key: "{{ config.secret_key }}"
                  lifetime: "PT3600S"
          parent_key: "/"
          partition_field: "connection"
    transformations:
    - type: AddFields
      fields:
      - path:
        - "businessName"
        value: "{{ stream_slice.connection.businessName }}"
      - path:
        - "serviceName"
        value: "{{ stream_slice.connection.serviceName }}"
    primary_key: "id"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          id:
            type:
            - string
            - integer
          businessName:
            type: string
          serviceName:
            type: string
          nominalCode:
            type:
            - 'null'
            - string
          name:
            type:
            - 'null'
            - string
          description:
            type:
            - 'null'
            - string
          section:
            type:
            - 'null'
            - string
          subSection:
            type:
            - 'null'
            - string
          group:
            type:
            - 'null'
            - string
          subGroup:
            type:
            - 'null'
            - string
          classification:
            type:
            - 'null'
            - string
          fullyQualifiedName:
            type:
            - 'null'
            - string
          depth:
            type:
            - 'null'
            - integer
          currencyRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - 'null'
                - string
                - integer
              name:
                type:
                - 'null'
                - string
              symbol:
                type:
                - 'null'
                - string
          currentBalance:
            type:
            - 'null'
            - number
          type:
            type: string
          subType:
            type:
            - 'null'
            - string
          isBankAccount:
            type:
            - 'null'
            - boolean
          isSubAccount:
            type:
            - 'null'
            - boolean
          isActive:
            type: boolean
          subsidiaryRefs:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                id:
                  type:
                  - string
                  - integer
                name:
                  type:
                  - 'null'
                  - string
          parentRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - 'null'
                - string
                - integer
              name:
                type:
                - 'null'
                - string
          sourceModifiedDate:
            type:
            - 'null'
            - string
            format: date-time
  inventory_stream:
    type: DeclarativeStream
    retriever:
      type: SimpleRetriever
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path:
          - "data"
      paginator:
        type: DefaultPaginator
        page_size_option:
          inject_into: request_parameter
          field_name: "limit"
        pagination_strategy:
          type: OffsetIncrement
          page_size: 100
        page_token_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: "offset"
      requester:
        type: HttpRequester
        url_base: "https://api.railz.ai/"
        http_method: "GET"
        authenticator:
          class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
          url: "https://auth.railz.ai/getAccess"
          client_id: "{{ config.client_id }}"
          secret_key: "{{ config.secret_key }}"
          lifetime: "PT3600S"
        request_parameters:
          businessName: "{{ stream_slice.connection.businessName }}"
          serviceName: "{{ stream_slice.connection.serviceName }}"
      partition_router:
        type: SubstreamPartitionRouter
        parent_stream_configs:
        - stream:
            type: DeclarativeStream
            retriever:
              type: SimpleRetriever
              record_selector:
                type: RecordSelector
                extractor:
                  type: DpathExtractor
                  field_path:
                  - "data"
                record_filter:
                  condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                    in parameters.serviceNames }}"
              paginator:
                type: DefaultPaginator
                page_size_option:
                  inject_into: request_parameter
                  field_name: "limit"
                pagination_strategy:
                  type: OffsetIncrement
                  page_size: 100
                page_token_option:
                  type: RequestOption
                  inject_into: request_parameter
                  field_name: "offset"
              requester:
                type: HttpRequester
                url_base: "https://api.railz.ai/"
                http_method: "GET"
                authenticator:
                  class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                  url: "https://auth.railz.ai/getAccess"
                  client_id: "{{ config.client_id }}"
                  secret_key: "{{ config.secret_key }}"
                  lifetime: "PT3600S"
          parent_key: "/"
          partition_field: "connection"
    transformations:
    - type: AddFields
      fields:
      - path:
        - "businessName"
        value: "{{ stream_slice.connection.businessName }}"
      - path:
        - "serviceName"
        value: "{{ stream_slice.connection.serviceName }}"
    primary_key: "id"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          id:
            type:
            - string
            - integer
          businessName:
            type: string
          serviceName:
            type: string
          name:
            type: string
          code:
            type:
            - 'null'
            - string
          sourceModifiedDate:
            type:
            - 'null'
            - string
            format: date-time
          itemStatus:
            type:
            - 'null'
            - string
          isBillItem:
            type:
            - 'null'
            - boolean
          billItem:
            type:
            - 'null'
            - object
            properties:
              description:
                type:
                - 'null'
                - string
              unitPrice:
                type:
                - 'null'
                - number
              accountRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type: string
                  name:
                    type:
                    - 'null'
                    - string
              taxRateRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type: string
                  name:
                    type:
                    - 'null'
                    - string
                  effectiveTaxRate:
                    type:
                    - 'null'
                    - number
          isInvoiceItem:
            type:
            - 'null'
            - boolean
          taxRateRef:
            type:
            - 'null'
            - object
            properties:
              description:
                type:
                - 'null'
                - string
              unitPrice:
                type:
                - 'null'
                - number
              accountRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type: string
                  name:
                    type:
                    - 'null'
                    - string
              taxRateRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type: string
                  name:
                    type:
                    - 'null'
                    - string
                  effectiveTaxRate:
                    type:
                    - 'null'
                    - number
          subsidiaryRefs:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                id:
                  type:
                  - 'null'
                  - string
                name:
                  type:
                  - 'null'
                  - string
          quantityOnHandPerLocation:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                locationRef:
                  type: object
                  properties:
                    id:
                      type: string
                    name:
                      type:
                      - 'null'
                      - string
                quantity:
                  type: number
          quantityOnHand:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                locationRef:
                  type: object
                  properties:
                    id:
                      type: string
                    name:
                      type:
                      - 'null'
                      - string
                quantity:
                  type: number
  tax_rates_stream:
    type: DeclarativeStream
    retriever:
      type: SimpleRetriever
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path:
          - "data"
      paginator:
        type: DefaultPaginator
        page_size_option:
          inject_into: request_parameter
          field_name: "limit"
        pagination_strategy:
          type: OffsetIncrement
          page_size: 100
        page_token_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: "offset"
      requester:
        type: HttpRequester
        url_base: "https://api.railz.ai/"
        http_method: "GET"
        authenticator:
          class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
          url: "https://auth.railz.ai/getAccess"
          client_id: "{{ config.client_id }}"
          secret_key: "{{ config.secret_key }}"
          lifetime: "PT3600S"
        request_parameters:
          businessName: "{{ stream_slice.connection.businessName }}"
          serviceName: "{{ stream_slice.connection.serviceName }}"
      partition_router:
        type: SubstreamPartitionRouter
        parent_stream_configs:
        - stream:
            type: DeclarativeStream
            retriever:
              type: SimpleRetriever
              record_selector:
                type: RecordSelector
                extractor:
                  type: DpathExtractor
                  field_path:
                  - "data"
                record_filter:
                  condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                    in parameters.serviceNames }}"
              paginator:
                type: DefaultPaginator
                page_size_option:
                  inject_into: request_parameter
                  field_name: "limit"
                pagination_strategy:
                  type: OffsetIncrement
                  page_size: 100
                page_token_option:
                  type: RequestOption
                  inject_into: request_parameter
                  field_name: "offset"
              requester:
                type: HttpRequester
                url_base: "https://api.railz.ai/"
                http_method: "GET"
                authenticator:
                  class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                  url: "https://auth.railz.ai/getAccess"
                  client_id: "{{ config.client_id }}"
                  secret_key: "{{ config.secret_key }}"
                  lifetime: "PT3600S"
          parent_key: "/"
          partition_field: "connection"
    transformations:
    - type: AddFields
      fields:
      - path:
        - "businessName"
        value: "{{ stream_slice.connection.businessName }}"
      - path:
        - "serviceName"
        value: "{{ stream_slice.connection.serviceName }}"
    primary_key: "id"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          id:
            type:
            - string
            - integer
          businessName:
            type: string
          serviceName:
            type: string
          name:
            type: string
          code:
            type:
            - 'null'
            - string
          effectiveTaxRate:
            type:
            - 'null'
            - number
          totalTaxRate:
            type:
            - 'null'
            - number
          components:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                name:
                  type:
                  - 'null'
                  - string
                rate:
                  type:
                  - 'null'
                  - number
                isCompound:
                  type:
                  - 'null'
                  - boolean
                isPurchasesTax:
                  type:
                  - 'null'
                  - boolean
                isSalesTax:
                  type:
                  - 'null'
                  - boolean
          sourceModifiedDate:
            type:
            - 'null'
            - string
            format: date-time
  tracking_categories_stream:
    type: DeclarativeStream
    retriever:
      type: SimpleRetriever
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path:
          - "data"
      paginator:
        type: DefaultPaginator
        page_size_option:
          inject_into: request_parameter
          field_name: "limit"
        pagination_strategy:
          type: OffsetIncrement
          page_size: 100
        page_token_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: "offset"
      requester:
        type: HttpRequester
        url_base: "https://api.railz.ai/"
        http_method: "GET"
        authenticator:
          class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
          url: "https://auth.railz.ai/getAccess"
          client_id: "{{ config.client_id }}"
          secret_key: "{{ config.secret_key }}"
          lifetime: "PT3600S"
        request_parameters:
          businessName: "{{ stream_slice.connection.businessName }}"
          serviceName: "{{ stream_slice.connection.serviceName }}"
      partition_router:
        type: SubstreamPartitionRouter
        parent_stream_configs:
        - stream:
            type: DeclarativeStream
            retriever:
              type: SimpleRetriever
              record_selector:
                type: RecordSelector
                extractor:
                  type: DpathExtractor
                  field_path:
                  - "data"
                record_filter:
                  condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                    in parameters.serviceNames }}"
              paginator:
                type: DefaultPaginator
                page_size_option:
                  inject_into: request_parameter
                  field_name: "limit"
                pagination_strategy:
                  type: OffsetIncrement
                  page_size: 100
                page_token_option:
                  type: RequestOption
                  inject_into: request_parameter
                  field_name: "offset"
              requester:
                type: HttpRequester
                url_base: "https://api.railz.ai/"
                http_method: "GET"
                authenticator:
                  class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                  url: "https://auth.railz.ai/getAccess"
                  client_id: "{{ config.client_id }}"
                  secret_key: "{{ config.secret_key }}"
                  lifetime: "PT3600S"
          parent_key: "/"
          partition_field: "connection"
    transformations:
    - type: AddFields
      fields:
      - path:
        - "businessName"
        value: "{{ stream_slice.connection.businessName }}"
      - path:
        - "serviceName"
        value: "{{ stream_slice.connection.serviceName }}"
    primary_key: "id"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          id:
            type:
            - string
            - integer
          businessName:
            type: string
          serviceName:
            type: string
          name:
            type: string
          isEditable:
            type: boolean
          parentRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type: string
              name:
                type:
                - 'null'
                - string
          status:
            type: string
          sourceModifiedDate:
            type:
            - 'null'
            - string
            format: date-time
  vendors_stream:
    type: DeclarativeStream
    retriever:
      type: SimpleRetriever
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path:
          - "data"
      paginator:
        type: DefaultPaginator
        page_size_option:
          inject_into: request_parameter
          field_name: "limit"
        pagination_strategy:
          type: OffsetIncrement
          page_size: 100
        page_token_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: "offset"
      requester:
        type: HttpRequester
        url_base: "https://api.railz.ai/"
        http_method: "GET"
        authenticator:
          class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
          url: "https://auth.railz.ai/getAccess"
          client_id: "{{ config.client_id }}"
          secret_key: "{{ config.secret_key }}"
          lifetime: "PT3600S"
        request_parameters:
          businessName: "{{ stream_slice.connection.businessName }}"
          serviceName: "{{ stream_slice.connection.serviceName }}"
      partition_router:
        type: SubstreamPartitionRouter
        parent_stream_configs:
        - stream:
            type: DeclarativeStream
            retriever:
              type: SimpleRetriever
              record_selector:
                type: RecordSelector
                extractor:
                  type: DpathExtractor
                  field_path:
                  - "data"
                record_filter:
                  condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                    in parameters.serviceNames }}"
              paginator:
                type: DefaultPaginator
                page_size_option:
                  inject_into: request_parameter
                  field_name: "limit"
                pagination_strategy:
                  type: OffsetIncrement
                  page_size: 100
                page_token_option:
                  type: RequestOption
                  inject_into: request_parameter
                  field_name: "offset"
              requester:
                type: HttpRequester
                url_base: "https://api.railz.ai/"
                http_method: "GET"
                authenticator:
                  class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                  url: "https://auth.railz.ai/getAccess"
                  client_id: "{{ config.client_id }}"
                  secret_key: "{{ config.secret_key }}"
                  lifetime: "PT3600S"
          parent_key: "/"
          partition_field: "connection"
    transformations:
    - type: AddFields
      fields:
      - path:
        - "businessName"
        value: "{{ stream_slice.connection.businessName }}"
      - path:
        - "serviceName"
        value: "{{ stream_slice.connection.serviceName }}"
    primary_key: "id"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          id:
            type:
            - string
            - integer
          businessName:
            type: string
          serviceName:
            type: string
          vendorName:
            type: string
          contactName:
            type:
            - 'null'
            - string
          emailAddress:
            type:
            - 'null'
            - string
          website:
            type:
            - 'null'
            - string
          defaultCurrency:
            type:
            - 'null'
            - object
            properties:
              id:
                type: string
              name:
                type:
                - 'null'
                - string
              symbol:
                type:
                - 'null'
                - string
          phone:
            type:
            - 'null'
            - string
          addresses:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                line1:
                  type:
                  - 'null'
                  - string
                line2:
                  type:
                  - 'null'
                  - string
                city:
                  type:
                  - 'null'
                  - string
                region:
                  type:
                  - 'null'
                  - string
                country:
                  type:
                  - 'null'
                  - string
                postalCode:
                  type:
                  - 'null'
                  - string
                type:
                  type: string
          contacts:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                name:
                  type:
                  - 'null'
                  - string
                email:
                  type:
                  - 'null'
                  - string
                phone:
                  type:
                  - 'null'
                  - string
                addresses:
                  type:
                  - 'null'
                  - object
                  properties:
                    line1:
                      type:
                      - 'null'
                      - string
                    line2:
                      type:
                      - 'null'
                      - string
                    city:
                      type:
                      - 'null'
                      - string
                    region:
                      type:
                      - 'null'
                      - string
                    country:
                      type:
                      - 'null'
                      - string
                    postalCode:
                      type:
                      - 'null'
                      - string
                    type:
                      type: string
                status:
                  type: string
                modifiedDate:
                  type:
                  - 'null'
                  - string
                  format: date-time
          taxNumber:
            type:
            - 'null'
            - string
          balance:
            type:
            - 'null'
            - number
          status:
            type: string
          subsidiaryRefs:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                id:
                  type: string
                name:
                  type:
                  - 'null'
                  - string
          sourceModifiedDate:
            type:
            - 'null'
            - string
            format: date-time
  bank_accounts_stream:
    type: DeclarativeStream
    retriever:
      type: SimpleRetriever
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path:
          - "data"
      paginator:
        type: DefaultPaginator
        page_size_option:
          inject_into: request_parameter
          field_name: "limit"
        pagination_strategy:
          type: OffsetIncrement
          page_size: 100
        page_token_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: "offset"
      requester:
        type: HttpRequester
        url_base: "https://api.railz.ai/"
        http_method: "GET"
        authenticator:
          class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
          url: "https://auth.railz.ai/getAccess"
          client_id: "{{ config.client_id }}"
          secret_key: "{{ config.secret_key }}"
          lifetime: "PT3600S"
        request_parameters:
          businessName: "{{ stream_slice.connection.businessName }}"
          serviceName: "{{ stream_slice.connection.serviceName }}"
      partition_router:
        type: SubstreamPartitionRouter
        parent_stream_configs:
        - stream:
            type: DeclarativeStream
            retriever:
              type: SimpleRetriever
              record_selector:
                type: RecordSelector
                extractor:
                  type: DpathExtractor
                  field_path:
                  - "data"
                record_filter:
                  condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                    in parameters.serviceNames }}"
              paginator:
                type: DefaultPaginator
                page_size_option:
                  inject_into: request_parameter
                  field_name: "limit"
                pagination_strategy:
                  type: OffsetIncrement
                  page_size: 100
                page_token_option:
                  type: RequestOption
                  inject_into: request_parameter
                  field_name: "offset"
              requester:
                type: HttpRequester
                url_base: "https://api.railz.ai/"
                http_method: "GET"
                authenticator:
                  class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                  url: "https://auth.railz.ai/getAccess"
                  client_id: "{{ config.client_id }}"
                  secret_key: "{{ config.secret_key }}"
                  lifetime: "PT3600S"
          parent_key: "/"
          partition_field: "connection"
    transformations:
    - type: AddFields
      fields:
      - path:
        - "businessName"
        value: "{{ stream_slice.connection.businessName }}"
      - path:
        - "serviceName"
        value: "{{ stream_slice.connection.serviceName }}"
    primary_key: "accountId"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          businessName:
            type: string
          serviceName:
            type: string
          institutionName:
            type: string
          accountId:
            type:
            - string
            - integer
          currentBalance:
            type:
            - 'null'
            - number
          availableBalance:
            type:
            - 'null'
            - number
          limit:
            type:
            - 'null'
            - number
          currency:
            type: string
          maskedAccountNumber:
            type:
            - 'null'
            - string
          accountName:
            type: string
          officialAccountName:
            type:
            - 'null'
            - string
          accountType:
            type: string
          accountSubType:
            type:
            - 'null'
            - string
          sourceModifiedDate:
            type:
            - 'null'
            - string
            format: date-time
  base_incremental_service_stream:
    type: DeclarativeStream
    retriever:
      type: SimpleRetriever
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path:
          - "data"
        record_filter:
          condition: "{{ not stream_state.get(stream_slice.connection.businessName,
            {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
            >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
            }}"
      paginator:
        type: DefaultPaginator
        page_size_option:
          inject_into: request_parameter
          field_name: "limit"
        pagination_strategy:
          type: OffsetIncrement
          page_size: 100
        page_token_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: "offset"
      requester:
        type: HttpRequester
        url_base: "https://api.railz.ai/"
        http_method: "GET"
        authenticator:
          class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
          url: "https://auth.railz.ai/getAccess"
          client_id: "{{ config.client_id }}"
          secret_key: "{{ config.secret_key }}"
          lifetime: "PT3600S"
        request_parameters:
          businessName: "{{ stream_slice.connection.businessName }}"
          serviceName: "{{ stream_slice.connection.serviceName }}"
          startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
          endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
          orderBy: "{{ parameters.cursor_field }}"
    transformations:
    - type: AddFields
      fields:
      - path:
        - "businessName"
        value: "{{ stream_slice.connection.businessName }}"
      - path:
        - "serviceName"
        value: "{{ stream_slice.connection.serviceName }}"
    incremental_sync:
      type: CustomIncrementalSync
      class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
      stream_slicers:
      - type: SubstreamPartitionRouter
        parent_stream_configs:
        - stream:
            type: DeclarativeStream
            retriever:
              type: SimpleRetriever
              record_selector:
                type: RecordSelector
                extractor:
                  type: DpathExtractor
                  field_path:
                  - "data"
                record_filter:
                  condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                    in parameters.serviceNames }}"
              paginator:
                type: DefaultPaginator
                page_size_option:
                  inject_into: request_parameter
                  field_name: "limit"
                pagination_strategy:
                  type: OffsetIncrement
                  page_size: 100
                page_token_option:
                  type: RequestOption
                  inject_into: request_parameter
                  field_name: "offset"
              requester:
                type: HttpRequester
                url_base: "https://api.railz.ai/"
                http_method: "GET"
                authenticator:
                  class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                  url: "https://auth.railz.ai/getAccess"
                  client_id: "{{ config.client_id }}"
                  secret_key: "{{ config.secret_key }}"
                  lifetime: "PT3600S"
          parent_key: "/"
          partition_field: "connection"
      - type: DatetimeBasedCursor
        start_datetime:
          datetime: "{{ config['start_date'] }}"
          datetime_format: "%Y-%m-%d"
        end_datetime:
          datetime: "{{ today_utc() }}"
          datetime_format: "%Y-%m-%d"
        step: "P1M"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
        cursor_granularity: "P1D"
  accounting_transactions_stream:
    type: DeclarativeStream
    retriever:
      type: SimpleRetriever
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path:
          - "data"
        record_filter:
          condition: "{{ not stream_state.get(stream_slice.connection.businessName,
            {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
            >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
            }}"
      paginator:
        type: DefaultPaginator
        page_size_option:
          inject_into: request_parameter
          field_name: "limit"
        pagination_strategy:
          type: OffsetIncrement
          page_size: 100
        page_token_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: "offset"
      requester:
        type: HttpRequester
        url_base: "https://api.railz.ai/"
        http_method: "GET"
        authenticator:
          class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
          url: "https://auth.railz.ai/getAccess"
          client_id: "{{ config.client_id }}"
          secret_key: "{{ config.secret_key }}"
          lifetime: "PT3600S"
        request_parameters:
          businessName: "{{ stream_slice.connection.businessName }}"
          serviceName: "{{ stream_slice.connection.serviceName }}"
          startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
          endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
          orderBy: "{{ parameters.cursor_field }}"
    transformations:
    - type: AddFields
      fields:
      - path:
        - "businessName"
        value: "{{ stream_slice.connection.businessName }}"
      - path:
        - "serviceName"
        value: "{{ stream_slice.connection.serviceName }}"
    incremental_sync:
      type: CustomIncrementalSync
      class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
      stream_slicers:
      - type: SubstreamPartitionRouter
        parent_stream_configs:
        - stream:
            type: DeclarativeStream
            retriever:
              type: SimpleRetriever
              record_selector:
                type: RecordSelector
                extractor:
                  type: DpathExtractor
                  field_path:
                  - "data"
                record_filter:
                  condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                    in parameters.serviceNames }}"
              paginator:
                type: DefaultPaginator
                page_size_option:
                  inject_into: request_parameter
                  field_name: "limit"
                pagination_strategy:
                  type: OffsetIncrement
                  page_size: 100
                page_token_option:
                  type: RequestOption
                  inject_into: request_parameter
                  field_name: "offset"
              requester:
                type: HttpRequester
                url_base: "https://api.railz.ai/"
                http_method: "GET"
                authenticator:
                  class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                  url: "https://auth.railz.ai/getAccess"
                  client_id: "{{ config.client_id }}"
                  secret_key: "{{ config.secret_key }}"
                  lifetime: "PT3600S"
          parent_key: "/"
          partition_field: "connection"
      - type: DatetimeBasedCursor
        start_datetime:
          datetime: "{{ config['start_date'] }}"
          datetime_format: "%Y-%m-%d"
        end_datetime:
          datetime: "{{ today_utc() }}"
          datetime_format: "%Y-%m-%d"
        step: "P1M"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
        cursor_granularity: "P1D"
    primary_key: "id"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          id:
            type:
            - string
            - integer
          businessName:
            type: string
          serviceName:
            type: string
          transactionNumber:
            type:
            - 'null'
            - string
          postedDate:
            type: string
            format: date-time
          entityRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - 'null'
                - string
                - integer
              name:
                type:
                - 'null'
                - string
          type:
            type: string
          isPosting:
            type: boolean
          isReconciled:
            type:
            - 'null'
            - boolean
          accountRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - string
                - integer
              name:
                type: string
              section:
                type:
                - 'null'
                - string
              subSection:
                type:
                - 'null'
                - string
              group:
                type:
                - 'null'
                - string
              subGroup:
                type:
                - 'null'
                - string
          currencyRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - 'null'
                - string
                - integer
              name:
                type:
                - 'null'
                - string
              symbol:
                type:
                - 'null'
                - string
          currencyRate:
            type:
            - 'null'
            - number
          isSplitTransaction:
            type:
            - 'null'
            - boolean
          parentTransactionId:
            type:
            - 'null'
            - string
          subTotal:
            type:
            - 'null'
            - number
          taxAmount:
            type:
            - 'null'
            - number
          totalAmount:
            type:
            - number
            - string
  bank_transfers_stream:
    type: DeclarativeStream
    retriever:
      type: SimpleRetriever
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path:
          - "data"
        record_filter:
          condition: "{{ not stream_state.get(stream_slice.connection.businessName,
            {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
            >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
            }}"
      paginator:
        type: DefaultPaginator
        page_size_option:
          inject_into: request_parameter
          field_name: "limit"
        pagination_strategy:
          type: OffsetIncrement
          page_size: 100
        page_token_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: "offset"
      requester:
        type: HttpRequester
        url_base: "https://api.railz.ai/"
        http_method: "GET"
        authenticator:
          class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
          url: "https://auth.railz.ai/getAccess"
          client_id: "{{ config.client_id }}"
          secret_key: "{{ config.secret_key }}"
          lifetime: "PT3600S"
        request_parameters:
          businessName: "{{ stream_slice.connection.businessName }}"
          serviceName: "{{ stream_slice.connection.serviceName }}"
          startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
          endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
          orderBy: "{{ parameters.cursor_field }}"
    transformations:
    - type: AddFields
      fields:
      - path:
        - "businessName"
        value: "{{ stream_slice.connection.businessName }}"
      - path:
        - "serviceName"
        value: "{{ stream_slice.connection.serviceName }}"
    incremental_sync:
      type: CustomIncrementalSync
      class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
      stream_slicers:
      - type: SubstreamPartitionRouter
        parent_stream_configs:
        - stream:
            type: DeclarativeStream
            retriever:
              type: SimpleRetriever
              record_selector:
                type: RecordSelector
                extractor:
                  type: DpathExtractor
                  field_path:
                  - "data"
                record_filter:
                  condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                    in parameters.serviceNames }}"
              paginator:
                type: DefaultPaginator
                page_size_option:
                  inject_into: request_parameter
                  field_name: "limit"
                pagination_strategy:
                  type: OffsetIncrement
                  page_size: 100
                page_token_option:
                  type: RequestOption
                  inject_into: request_parameter
                  field_name: "offset"
              requester:
                type: HttpRequester
                url_base: "https://api.railz.ai/"
                http_method: "GET"
                authenticator:
                  class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                  url: "https://auth.railz.ai/getAccess"
                  client_id: "{{ config.client_id }}"
                  secret_key: "{{ config.secret_key }}"
                  lifetime: "PT3600S"
          parent_key: "/"
          partition_field: "connection"
      - type: DatetimeBasedCursor
        start_datetime:
          datetime: "{{ config['start_date'] }}"
          datetime_format: "%Y-%m-%d"
        end_datetime:
          datetime: "{{ today_utc() }}"
          datetime_format: "%Y-%m-%d"
        step: "P1M"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
        cursor_granularity: "P1D"
    primary_key: "id"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          id:
            type:
            - string
            - integer
          businessName:
            type: string
          serviceName:
            type: string
          date:
            type: string
            format: date-time
          currencyRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - string
                - integer
              name:
                type:
                - 'null'
                - string
              symbol:
                type:
                - 'null'
                - string
          currencyRate:
            type: number
          totalAmount:
            type:
            - 'null'
            - number
            - string
          fromAccountRef:
            type: object
            properties:
              id:
                type:
                - string
                - integer
              name:
                type:
                - 'null'
                - string
          toAccountRef:
            type: object
            properties:
              id:
                type:
                - string
                - integer
              name:
                type:
                - 'null'
                - string
          fromBankTransactionId:
            type: string
          toBankTransactionId:
            type: string
          memo:
            type:
            - 'null'
            - string
          sourceModifiedDate:
            type:
            - 'null'
            - string
            format: date-time
  bills_stream:
    type: DeclarativeStream
    retriever:
      type: SimpleRetriever
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path:
          - "data"
        record_filter:
          condition: "{{ not stream_state.get(stream_slice.connection.businessName,
            {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
            >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
            }}"
      paginator:
        type: DefaultPaginator
        page_size_option:
          inject_into: request_parameter
          field_name: "limit"
        pagination_strategy:
          type: OffsetIncrement
          page_size: 100
        page_token_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: "offset"
      requester:
        type: HttpRequester
        url_base: "https://api.railz.ai/"
        http_method: "GET"
        authenticator:
          class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
          url: "https://auth.railz.ai/getAccess"
          client_id: "{{ config.client_id }}"
          secret_key: "{{ config.secret_key }}"
          lifetime: "PT3600S"
        request_parameters:
          businessName: "{{ stream_slice.connection.businessName }}"
          serviceName: "{{ stream_slice.connection.serviceName }}"
          startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
          endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
          orderBy: "{{ parameters.cursor_field }}"
    transformations:
    - type: AddFields
      fields:
      - path:
        - "businessName"
        value: "{{ stream_slice.connection.businessName }}"
      - path:
        - "serviceName"
        value: "{{ stream_slice.connection.serviceName }}"
    incremental_sync:
      type: CustomIncrementalSync
      class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
      stream_slicers:
      - type: SubstreamPartitionRouter
        parent_stream_configs:
        - stream:
            type: DeclarativeStream
            retriever:
              type: SimpleRetriever
              record_selector:
                type: RecordSelector
                extractor:
                  type: DpathExtractor
                  field_path:
                  - "data"
                record_filter:
                  condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                    in parameters.serviceNames }}"
              paginator:
                type: DefaultPaginator
                page_size_option:
                  inject_into: request_parameter
                  field_name: "limit"
                pagination_strategy:
                  type: OffsetIncrement
                  page_size: 100
                page_token_option:
                  type: RequestOption
                  inject_into: request_parameter
                  field_name: "offset"
              requester:
                type: HttpRequester
                url_base: "https://api.railz.ai/"
                http_method: "GET"
                authenticator:
                  class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                  url: "https://auth.railz.ai/getAccess"
                  client_id: "{{ config.client_id }}"
                  secret_key: "{{ config.secret_key }}"
                  lifetime: "PT3600S"
          parent_key: "/"
          partition_field: "connection"
      - type: DatetimeBasedCursor
        start_datetime:
          datetime: "{{ config['start_date'] }}"
          datetime_format: "%Y-%m-%d"
        end_datetime:
          datetime: "{{ today_utc() }}"
          datetime_format: "%Y-%m-%d"
        step: "P1M"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
        cursor_granularity: "P1D"
    primary_key: "id"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          id:
            type:
            - string
            - integer
          businessName:
            type: string
          serviceName:
            type: string
          vendorRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - string
                - integer
              name:
                type:
                - 'null'
                - string
          purchaseOrderRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - 'null'
                - string
                - integer
              purchaseOrderNumber:
                type:
                - 'null'
                - string
          purchaseOrderRefs:
            type: array
            items:
              type: object
              properties:
                id:
                  type:
                  - 'null'
                  - string
                  - integer
                purchaseOrderNumber:
                  type:
                  - 'null'
                  - string
          postedDate:
            type: string
            format: date-time
          dueDate:
            type:
            - 'null'
            - string
            format: date-time
          currencyRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - string
                - integer
              name:
                type:
                - 'null'
                - string
              symbol:
                type:
                - 'null'
                - string
          currencyRate:
            type:
            - 'null'
            - number
          vendorInvoiceNumber:
            type:
            - 'null'
            - string
          lines:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                description:
                  type:
                  - 'null'
                  - string
                unitAmount:
                  type:
                  - 'null'
                  - number
                quantity:
                  type:
                  - 'null'
                  - integer
                discountAmount:
                  type:
                  - 'null'
                  - number
                subTotal:
                  type:
                  - 'null'
                  - number
                taxAmount:
                  type:
                  - 'null'
                  - number
                totalAmount:
                  type:
                  - number
                  - string
                discountPercentage:
                  type:
                  - 'null'
                  - number
                  - string
                taxRateRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type:
                      - string
                      - integer
                    name:
                      type:
                      - 'null'
                      - string
                    effectiveTaxRate:
                      type:
                      - 'null'
                      - number
                inventoryRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type:
                      - string
                      - integer
                    name:
                      type:
                      - 'null'
                      - string
                trackingCategoryRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type:
                      - string
                      - integer
                    name:
                      type:
                      - 'null'
                      - string
                    option:
                      type:
                      - 'null'
                      - string
                    optionId:
                      type:
                      - 'null'
                      - string
                id:
                  type:
                  - string
                  - integer
                accountRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type:
                      - string
                      - integer
                    name:
                      type:
                      - 'null'
                      - string
          status:
            type: string
          subTotal:
            type:
            - 'null'
            - number
          taxAmount:
            type:
            - 'null'
            - number
          totalAmount:
            type:
            - number
            - string
          amountDue:
            type:
            - 'null'
            - number
          memo:
            type:
            - 'null'
            - string
          payments:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                amount:
                  type:
                  - 'null'
                  - number
                paymentId:
                  type:
                  - 'null'
                  - string
                date:
                  type:
                  - 'null'
                  - string
                  format: date-time
          subsidiaryRefs:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                id:
                  type:
                  - string
                  - integer
                name:
                  type:
                  - 'null'
                  - string
          locationRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - 'null'
                - string
                - integer
              name:
                type:
                - 'null'
                - string
          sourceModifiedDate:
            type:
            - 'null'
            - string
            format: date-time
  bills_credit_notes_stream:
    type: DeclarativeStream
    retriever:
      type: SimpleRetriever
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path:
          - "data"
        record_filter:
          condition: "{{ not stream_state.get(stream_slice.connection.businessName,
            {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
            >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
            }}"
      paginator:
        type: DefaultPaginator
        page_size_option:
          inject_into: request_parameter
          field_name: "limit"
        pagination_strategy:
          type: OffsetIncrement
          page_size: 100
        page_token_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: "offset"
      requester:
        type: HttpRequester
        url_base: "https://api.railz.ai/"
        http_method: "GET"
        authenticator:
          class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
          url: "https://auth.railz.ai/getAccess"
          client_id: "{{ config.client_id }}"
          secret_key: "{{ config.secret_key }}"
          lifetime: "PT3600S"
        request_parameters:
          businessName: "{{ stream_slice.connection.businessName }}"
          serviceName: "{{ stream_slice.connection.serviceName }}"
          startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
          endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
          orderBy: "{{ parameters.cursor_field }}"
    transformations:
    - type: AddFields
      fields:
      - path:
        - "businessName"
        value: "{{ stream_slice.connection.businessName }}"
      - path:
        - "serviceName"
        value: "{{ stream_slice.connection.serviceName }}"
    incremental_sync:
      type: CustomIncrementalSync
      class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
      stream_slicers:
      - type: SubstreamPartitionRouter
        parent_stream_configs:
        - stream:
            type: DeclarativeStream
            retriever:
              type: SimpleRetriever
              record_selector:
                type: RecordSelector
                extractor:
                  type: DpathExtractor
                  field_path:
                  - "data"
                record_filter:
                  condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                    in parameters.serviceNames }}"
              paginator:
                type: DefaultPaginator
                page_size_option:
                  inject_into: request_parameter
                  field_name: "limit"
                pagination_strategy:
                  type: OffsetIncrement
                  page_size: 100
                page_token_option:
                  type: RequestOption
                  inject_into: request_parameter
                  field_name: "offset"
              requester:
                type: HttpRequester
                url_base: "https://api.railz.ai/"
                http_method: "GET"
                authenticator:
                  class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                  url: "https://auth.railz.ai/getAccess"
                  client_id: "{{ config.client_id }}"
                  secret_key: "{{ config.secret_key }}"
                  lifetime: "PT3600S"
          parent_key: "/"
          partition_field: "connection"
      - type: DatetimeBasedCursor
        start_datetime:
          datetime: "{{ config['start_date'] }}"
          datetime_format: "%Y-%m-%d"
        end_datetime:
          datetime: "{{ today_utc() }}"
          datetime_format: "%Y-%m-%d"
        step: "P1M"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
        cursor_granularity: "P1D"
    primary_key: "id"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          id:
            type:
            - string
            - integer
          businessName:
            type: string
          serviceName:
            type: string
          postedDate:
            type: string
            format: date-time
          allocatedOnDate:
            type:
            - 'null'
            - string
            format: date-time
          currencyRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - string
                - integer
              name:
                type:
                - 'null'
                - string
              symbol:
                type:
                - 'null'
                - string
          currencyRate:
            type:
            - 'null'
            - number
          lines:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                description:
                  type:
                  - 'null'
                  - string
                unitAmount:
                  type:
                  - 'null'
                  - number
                quantity:
                  type:
                  - 'null'
                  - integer
                discountAmount:
                  type:
                  - 'null'
                  - number
                subTotal:
                  type:
                  - 'null'
                  - number
                taxAmount:
                  type:
                  - 'null'
                  - number
                totalAmount:
                  type:
                  - number
                  - string
                discountPercentage:
                  type:
                  - 'null'
                  - number
                  - string
                taxRateRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type:
                      - string
                      - integer
                    name:
                      type:
                      - 'null'
                      - string
                    effectiveTaxRate:
                      type:
                      - 'null'
                      - number
                inventoryRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type:
                      - string
                      - integer
                    name:
                      type:
                      - 'null'
                      - string
                trackingCategoryRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type:
                      - string
                      - integer
                    name:
                      type:
                      - 'null'
                      - string
                    option:
                      type:
                      - 'null'
                      - string
                    optionId:
                      type:
                      - 'null'
                      - string
                id:
                  type:
                  - string
                  - integer
                accountRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type:
                      - string
                      - integer
                    name:
                      type:
                      - 'null'
                      - string
          totalDiscount:
            type:
            - 'null'
            - number
          discountPercentage:
            type:
            - 'null'
            - number
          subTotal:
            type:
            - 'null'
            - number
          taxAmount:
            type:
            - 'null'
            - number
          totalAmount:
            type:
            - number
            - string
          remainingCredit:
            type:
            - 'null'
            - number
          status:
            type: string
          memo:
            type: string
          payments:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                amount:
                  type:
                  - 'null'
                  - number
                paymentId:
                  type:
                  - 'null'
                  - string
                date:
                  type:
                  - 'null'
                  - string
                  format: date-time
          sourceModifiedDate:
            type:
            - 'null'
            - string
            format: date-time
          locationRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - 'null'
                - string
                - integer
              name:
                type:
                - 'null'
                - string
          vendorRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - string
                - integer
              name:
                type:
                - 'null'
                - string
  bills_payments_stream:
    type: DeclarativeStream
    retriever:
      type: SimpleRetriever
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path:
          - "data"
        record_filter:
          condition: "{{ not stream_state.get(stream_slice.connection.businessName,
            {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
            >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
            }}"
      paginator:
        type: DefaultPaginator
        page_size_option:
          inject_into: request_parameter
          field_name: "limit"
        pagination_strategy:
          type: OffsetIncrement
          page_size: 100
        page_token_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: "offset"
      requester:
        type: HttpRequester
        url_base: "https://api.railz.ai/"
        http_method: "GET"
        authenticator:
          class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
          url: "https://auth.railz.ai/getAccess"
          client_id: "{{ config.client_id }}"
          secret_key: "{{ config.secret_key }}"
          lifetime: "PT3600S"
        request_parameters:
          businessName: "{{ stream_slice.connection.businessName }}"
          serviceName: "{{ stream_slice.connection.serviceName }}"
          startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
          endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
          orderBy: "{{ parameters.cursor_field }}"
    transformations:
    - type: AddFields
      fields:
      - path:
        - "businessName"
        value: "{{ stream_slice.connection.businessName }}"
      - path:
        - "serviceName"
        value: "{{ stream_slice.connection.serviceName }}"
    incremental_sync:
      type: CustomIncrementalSync
      class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
      stream_slicers:
      - type: SubstreamPartitionRouter
        parent_stream_configs:
        - stream:
            type: DeclarativeStream
            retriever:
              type: SimpleRetriever
              record_selector:
                type: RecordSelector
                extractor:
                  type: DpathExtractor
                  field_path:
                  - "data"
                record_filter:
                  condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                    in parameters.serviceNames }}"
              paginator:
                type: DefaultPaginator
                page_size_option:
                  inject_into: request_parameter
                  field_name: "limit"
                pagination_strategy:
                  type: OffsetIncrement
                  page_size: 100
                page_token_option:
                  type: RequestOption
                  inject_into: request_parameter
                  field_name: "offset"
              requester:
                type: HttpRequester
                url_base: "https://api.railz.ai/"
                http_method: "GET"
                authenticator:
                  class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                  url: "https://auth.railz.ai/getAccess"
                  client_id: "{{ config.client_id }}"
                  secret_key: "{{ config.secret_key }}"
                  lifetime: "PT3600S"
          parent_key: "/"
          partition_field: "connection"
      - type: DatetimeBasedCursor
        start_datetime:
          datetime: "{{ config['start_date'] }}"
          datetime_format: "%Y-%m-%d"
        end_datetime:
          datetime: "{{ today_utc() }}"
          datetime_format: "%Y-%m-%d"
        step: "P1M"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
        cursor_granularity: "P1D"
    primary_key: "id"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          id:
            type:
            - string
            - integer
          businessName:
            type: string
          serviceName:
            type: string
          vendorRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - string
                - integer
              name:
                type:
                - 'null'
                - string
          accountRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - string
                - integer
              name:
                type:
                - 'null'
                - string
          totalAmount:
            type:
            - number
            - string
          currencyRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - string
                - integer
              name:
                type:
                - 'null'
                - string
              symbol:
                type:
                - 'null'
                - string
          currencyRate:
            type:
            - 'null'
            - number
          date:
            type: string
            format: date-time
          memo:
            type:
            - 'null'
            - string
          lines:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                amount:
                  type: number
                link:
                  type:
                  - 'null'
                  - object
                  properties:
                    type:
                      type: string
                    id:
                      type:
                      - 'null'
                      - string
                      - integer
                    amount:
                      type:
                      - 'null'
                      - number
                links:
                  type:
                  - 'null'
                  - array
                  items:
                    type:
                    - 'null'
                    - object
                    properties:
                      type:
                        type: string
                      id:
                        type:
                        - string
                        - integer
                allocatedOnDate:
                  type:
                  - 'null'
                  - string
                  format: date-time
          subsidiaryRefs:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                id:
                  type:
                  - string
                  - integer
                name:
                  type:
                  - 'null'
                  - string
          sourceModifiedDate:
            type:
            - 'null'
            - string
            format: date-time
  deposits_stream:
    type: DeclarativeStream
    retriever:
      type: SimpleRetriever
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path:
          - "data"
        record_filter:
          condition: "{{ not stream_state.get(stream_slice.connection.businessName,
            {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
            >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
            }}"
      paginator:
        type: DefaultPaginator
        page_size_option:
          inject_into: request_parameter
          field_name: "limit"
        pagination_strategy:
          type: OffsetIncrement
          page_size: 100
        page_token_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: "offset"
      requester:
        type: HttpRequester
        url_base: "https://api.railz.ai/"
        http_method: "GET"
        authenticator:
          class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
          url: "https://auth.railz.ai/getAccess"
          client_id: "{{ config.client_id }}"
          secret_key: "{{ config.secret_key }}"
          lifetime: "PT3600S"
        request_parameters:
          businessName: "{{ stream_slice.connection.businessName }}"
          serviceName: "{{ stream_slice.connection.serviceName }}"
          startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
          endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
          orderBy: "{{ parameters.cursor_field }}"
    transformations:
    - type: AddFields
      fields:
      - path:
        - "businessName"
        value: "{{ stream_slice.connection.businessName }}"
      - path:
        - "serviceName"
        value: "{{ stream_slice.connection.serviceName }}"
    incremental_sync:
      type: CustomIncrementalSync
      class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
      stream_slicers:
      - type: SubstreamPartitionRouter
        parent_stream_configs:
        - stream:
            type: DeclarativeStream
            retriever:
              type: SimpleRetriever
              record_selector:
                type: RecordSelector
                extractor:
                  type: DpathExtractor
                  field_path:
                  - "data"
                record_filter:
                  condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                    in parameters.serviceNames }}"
              paginator:
                type: DefaultPaginator
                page_size_option:
                  inject_into: request_parameter
                  field_name: "limit"
                pagination_strategy:
                  type: OffsetIncrement
                  page_size: 100
                page_token_option:
                  type: RequestOption
                  inject_into: request_parameter
                  field_name: "offset"
              requester:
                type: HttpRequester
                url_base: "https://api.railz.ai/"
                http_method: "GET"
                authenticator:
                  class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                  url: "https://auth.railz.ai/getAccess"
                  client_id: "{{ config.client_id }}"
                  secret_key: "{{ config.secret_key }}"
                  lifetime: "PT3600S"
          parent_key: "/"
          partition_field: "connection"
      - type: DatetimeBasedCursor
        start_datetime:
          datetime: "{{ config['start_date'] }}"
          datetime_format: "%Y-%m-%d"
        end_datetime:
          datetime: "{{ today_utc() }}"
          datetime_format: "%Y-%m-%d"
        step: "P1M"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
        cursor_granularity: "P1D"
    primary_key: "id"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          id:
            type:
            - string
            - integer
          businessName:
            type: string
          serviceName:
            type: string
          postedDate:
            type: string
            format: date-time
          currencyRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - string
                - integer
              name:
                type:
                - 'null'
                - string
              symbol:
                type:
                - 'null'
                - string
          currencyRate:
            type:
            - 'null'
            - number
          lines:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                description:
                  type:
                  - 'null'
                  - string
                unitAmount:
                  type:
                  - 'null'
                  - number
                quantity:
                  type:
                  - 'null'
                  - integer
                subTotal:
                  type:
                  - 'null'
                  - number
                taxAmount:
                  type:
                  - 'null'
                  - number
                totalAmount:
                  type:
                  - number
                  - string
                accountRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type:
                      - string
                      - integer
                    name:
                      type:
                      - 'null'
                      - string
                taxRateRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type:
                      - string
                      - integer
                    name:
                      type:
                      - 'null'
                      - string
                    effectiveTaxRate:
                      type:
                      - 'null'
                      - number
                entityRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type:
                      - string
                      - integer
                    name:
                      type:
                      - 'null'
                      - string
                    type:
                      type:
                      - 'null'
                      - string
                link:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type: string
                    type:
                      type:
                      - 'null'
                      - string
                links:
                  type:
                  - 'null'
                  - array
                  items:
                    type:
                    - 'null'
                    - object
                    properties:
                      id:
                        type: string
                      type:
                        type:
                        - 'null'
                        - string
          subTotal:
            type:
            - 'null'
            - number
          taxAmount:
            type:
            - 'null'
            - number
          totalAmount:
            type:
            - number
            - string
          status:
            type: string
          memo:
            type:
            - 'null'
            - string
          sourceModifiedDate:
            type:
            - 'null'
            - string
            format: date-time
  estimates_stream:
    type: DeclarativeStream
    retriever:
      type: SimpleRetriever
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path:
          - "data"
        record_filter:
          condition: "{{ not stream_state.get(stream_slice.connection.businessName,
            {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
            >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
            }}"
      paginator:
        type: DefaultPaginator
        page_size_option:
          inject_into: request_parameter
          field_name: "limit"
        pagination_strategy:
          type: OffsetIncrement
          page_size: 100
        page_token_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: "offset"
      requester:
        type: HttpRequester
        url_base: "https://api.railz.ai/"
        http_method: "GET"
        authenticator:
          class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
          url: "https://auth.railz.ai/getAccess"
          client_id: "{{ config.client_id }}"
          secret_key: "{{ config.secret_key }}"
          lifetime: "PT3600S"
        request_parameters:
          businessName: "{{ stream_slice.connection.businessName }}"
          serviceName: "{{ stream_slice.connection.serviceName }}"
          startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
          endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
          orderBy: "{{ parameters.cursor_field }}"
    transformations:
    - type: AddFields
      fields:
      - path:
        - "businessName"
        value: "{{ stream_slice.connection.businessName }}"
      - path:
        - "serviceName"
        value: "{{ stream_slice.connection.serviceName }}"
    incremental_sync:
      type: CustomIncrementalSync
      class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
      stream_slicers:
      - type: SubstreamPartitionRouter
        parent_stream_configs:
        - stream:
            type: DeclarativeStream
            retriever:
              type: SimpleRetriever
              record_selector:
                type: RecordSelector
                extractor:
                  type: DpathExtractor
                  field_path:
                  - "data"
                record_filter:
                  condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                    in parameters.serviceNames }}"
              paginator:
                type: DefaultPaginator
                page_size_option:
                  inject_into: request_parameter
                  field_name: "limit"
                pagination_strategy:
                  type: OffsetIncrement
                  page_size: 100
                page_token_option:
                  type: RequestOption
                  inject_into: request_parameter
                  field_name: "offset"
              requester:
                type: HttpRequester
                url_base: "https://api.railz.ai/"
                http_method: "GET"
                authenticator:
                  class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                  url: "https://auth.railz.ai/getAccess"
                  client_id: "{{ config.client_id }}"
                  secret_key: "{{ config.secret_key }}"
                  lifetime: "PT3600S"
          parent_key: "/"
          partition_field: "connection"
      - type: DatetimeBasedCursor
        start_datetime:
          datetime: "{{ config['start_date'] }}"
          datetime_format: "%Y-%m-%d"
        end_datetime:
          datetime: "{{ today_utc() }}"
          datetime_format: "%Y-%m-%d"
        step: "P1M"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
        cursor_granularity: "P1D"
    primary_key: "id"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          id:
            type:
            - string
            - integer
          businessName:
            type: string
          serviceName:
            type: string
          customerRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - string
                - integer
              name:
                type:
                - 'null'
                - string
          postedDate:
            type: string
            format: date-time
          dueDate:
            type:
            - 'null'
            - string
            format: date-time
          acceptedDate:
            type:
            - 'null'
            - string
            format: date-time
          expiryDate:
            type:
            - 'null'
            - string
            format: date-time
          currencyRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - string
                - integer
              name:
                type:
                - 'null'
                - string
              symbol:
                type:
                - 'null'
                - string
          currencyRate:
            type:
            - 'null'
            - number
          lines:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                description:
                  type:
                  - 'null'
                  - string
                unitAmount:
                  type:
                  - 'null'
                  - number
                quantity:
                  type:
                  - 'null'
                  - integer
                discountAmount:
                  type:
                  - 'null'
                  - number
                subTotal:
                  type:
                  - 'null'
                  - number
                taxAmount:
                  type:
                  - 'null'
                  - number
                totalAmount:
                  type:
                  - number
                  - string
                discountPercentage:
                  type:
                  - 'null'
                  - number
                  - string
                taxRateRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type:
                      - string
                      - integer
                    name:
                      type:
                      - 'null'
                      - string
                    effectiveTaxRate:
                      type:
                      - 'null'
                      - number
                inventoryRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type:
                      - string
                      - integer
                    name:
                      type:
                      - 'null'
                      - string
                trackingCategoryRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type:
                      - string
                      - integer
                    name:
                      type:
                      - 'null'
                      - string
                    option:
                      type:
                      - 'null'
                      - string
                    optionId:
                      type:
                      - 'null'
                      - string
                id:
                  type:
                  - 'null'
                  - string
                  - integer
                accountRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type:
                      - string
                      - integer
                    name:
                      type:
                      - 'null'
                      - string
          totalDiscount:
            type:
            - 'null'
            - number
          discountPercentage:
            type:
            - 'null'
            - number
          subTotal:
            type:
            - 'null'
            - number
          taxAmount:
            type:
            - 'null'
            - number
          totalAmount:
            type:
            - number
            - string
          status:
            type: string
          memo:
            type:
            - 'null'
            - string
          shippingAddress:
            type: object
            properties:
              line1:
                type:
                - string
                - 'null'
              line2:
                type:
                - string
                - 'null'
              city:
                type:
                - string
                - 'null'
              region:
                type:
                - string
                - 'null'
              country:
                type:
                - string
                - 'null'
              postalCode:
                type:
                - string
                - 'null'
          sourceModifiedDate:
            type:
            - 'null'
            - string
            format: date-time
  invoices_stream:
    type: DeclarativeStream
    retriever:
      type: SimpleRetriever
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path:
          - "data"
        record_filter:
          condition: "{{ not stream_state.get(stream_slice.connection.businessName,
            {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
            >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
            }}"
      paginator:
        type: DefaultPaginator
        page_size_option:
          inject_into: request_parameter
          field_name: "limit"
        pagination_strategy:
          type: OffsetIncrement
          page_size: 100
        page_token_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: "offset"
      requester:
        type: HttpRequester
        url_base: "https://api.railz.ai/"
        http_method: "GET"
        authenticator:
          class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
          url: "https://auth.railz.ai/getAccess"
          client_id: "{{ config.client_id }}"
          secret_key: "{{ config.secret_key }}"
          lifetime: "PT3600S"
        request_parameters:
          businessName: "{{ stream_slice.connection.businessName }}"
          serviceName: "{{ stream_slice.connection.serviceName }}"
          startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
          endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
          orderBy: "{{ parameters.cursor_field }}"
    transformations:
    - type: AddFields
      fields:
      - path:
        - "businessName"
        value: "{{ stream_slice.connection.businessName }}"
      - path:
        - "serviceName"
        value: "{{ stream_slice.connection.serviceName }}"
    incremental_sync:
      type: CustomIncrementalSync
      class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
      stream_slicers:
      - type: SubstreamPartitionRouter
        parent_stream_configs:
        - stream:
            type: DeclarativeStream
            retriever:
              type: SimpleRetriever
              record_selector:
                type: RecordSelector
                extractor:
                  type: DpathExtractor
                  field_path:
                  - "data"
                record_filter:
                  condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                    in parameters.serviceNames }}"
              paginator:
                type: DefaultPaginator
                page_size_option:
                  inject_into: request_parameter
                  field_name: "limit"
                pagination_strategy:
                  type: OffsetIncrement
                  page_size: 100
                page_token_option:
                  type: RequestOption
                  inject_into: request_parameter
                  field_name: "offset"
              requester:
                type: HttpRequester
                url_base: "https://api.railz.ai/"
                http_method: "GET"
                authenticator:
                  class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                  url: "https://auth.railz.ai/getAccess"
                  client_id: "{{ config.client_id }}"
                  secret_key: "{{ config.secret_key }}"
                  lifetime: "PT3600S"
          parent_key: "/"
          partition_field: "connection"
      - type: DatetimeBasedCursor
        start_datetime:
          datetime: "{{ config['start_date'] }}"
          datetime_format: "%Y-%m-%d"
        end_datetime:
          datetime: "{{ today_utc() }}"
          datetime_format: "%Y-%m-%d"
        step: "P1M"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
        cursor_granularity: "P1D"
    primary_key: "id"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          id:
            type:
            - string
            - integer
          businessName:
            type: string
          serviceName:
            type: string
          invoiceNumber:
            type:
            - 'null'
            - string
          customerRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - string
                - integer
              name:
                type:
                - 'null'
                - string
          postedDate:
            type: string
            format: date-time
          dueDate:
            type:
            - 'null'
            - string
            format: date-time
          currencyRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - string
                - integer
              name:
                type:
                - 'null'
                - string
              symbol:
                type:
                - 'null'
                - string
          currencyRate:
            type:
            - 'null'
            - number
          lines:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                description:
                  type:
                  - 'null'
                  - string
                unitAmount:
                  type:
                  - 'null'
                  - number
                quantity:
                  type:
                  - 'null'
                  - integer
                discountAmount:
                  type:
                  - 'null'
                  - number
                subTotal:
                  type:
                  - 'null'
                  - number
                taxAmount:
                  type:
                  - 'null'
                  - number
                totalAmount:
                  type:
                  - number
                  - string
                discountPercentage:
                  type:
                  - 'null'
                  - number
                  - string
                taxRateRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type:
                      - string
                      - integer
                    name:
                      type:
                      - 'null'
                      - string
                    effectiveTaxRate:
                      type:
                      - 'null'
                      - number
                inventoryRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type:
                      - string
                      - integer
                    name:
                      type:
                      - 'null'
                      - string
                trackingCategoryRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type:
                      - string
                      - integer
                    name:
                      type:
                      - 'null'
                      - string
                    option:
                      type:
                      - 'null'
                      - string
                    optionId:
                      type:
                      - 'null'
                      - string
                accountRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type:
                      - string
                      - integer
                    name:
                      type:
                      - 'null'
                      - string
                locationRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type:
                      - 'null'
                      - string
                      - integer
                    name:
                      type:
                      - 'null'
                      - string
          status:
            type: string
          totalDiscount:
            type:
            - 'null'
            - number
          subTotal:
            type:
            - 'null'
            - number
          taxAmount:
            type:
            - 'null'
            - number
          totalAmount:
            type:
            - number
            - string
          amountDue:
            type:
            - 'null'
            - number
          discountPercentage:
            type:
            - 'null'
            - number
          sourceModifiedDate:
            type:
            - 'null'
            - string
            format: date-time
          memo:
            type:
            - 'null'
            - string
          payments:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                amount:
                  type:
                  - 'null'
                  - number
                paymentId:
                  type:
                  - 'null'
                  - string
                date:
                  type:
                  - 'null'
                  - string
                  format: date-time
          subsidiaryRefs:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                id:
                  type:
                  - string
                  - integer
                name:
                  type:
                  - 'null'
                  - string
  invoices_credit_notes_stream:
    type: DeclarativeStream
    retriever:
      type: SimpleRetriever
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path:
          - "data"
        record_filter:
          condition: "{{ not stream_state.get(stream_slice.connection.businessName,
            {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
            >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
            }}"
      paginator:
        type: DefaultPaginator
        page_size_option:
          inject_into: request_parameter
          field_name: "limit"
        pagination_strategy:
          type: OffsetIncrement
          page_size: 100
        page_token_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: "offset"
      requester:
        type: HttpRequester
        url_base: "https://api.railz.ai/"
        http_method: "GET"
        authenticator:
          class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
          url: "https://auth.railz.ai/getAccess"
          client_id: "{{ config.client_id }}"
          secret_key: "{{ config.secret_key }}"
          lifetime: "PT3600S"
        request_parameters:
          businessName: "{{ stream_slice.connection.businessName }}"
          serviceName: "{{ stream_slice.connection.serviceName }}"
          startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
          endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
          orderBy: "{{ parameters.cursor_field }}"
    transformations:
    - type: AddFields
      fields:
      - path:
        - "businessName"
        value: "{{ stream_slice.connection.businessName }}"
      - path:
        - "serviceName"
        value: "{{ stream_slice.connection.serviceName }}"
    incremental_sync:
      type: CustomIncrementalSync
      class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
      stream_slicers:
      - type: SubstreamPartitionRouter
        parent_stream_configs:
        - stream:
            type: DeclarativeStream
            retriever:
              type: SimpleRetriever
              record_selector:
                type: RecordSelector
                extractor:
                  type: DpathExtractor
                  field_path:
                  - "data"
                record_filter:
                  condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                    in parameters.serviceNames }}"
              paginator:
                type: DefaultPaginator
                page_size_option:
                  inject_into: request_parameter
                  field_name: "limit"
                pagination_strategy:
                  type: OffsetIncrement
                  page_size: 100
                page_token_option:
                  type: RequestOption
                  inject_into: request_parameter
                  field_name: "offset"
              requester:
                type: HttpRequester
                url_base: "https://api.railz.ai/"
                http_method: "GET"
                authenticator:
                  class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                  url: "https://auth.railz.ai/getAccess"
                  client_id: "{{ config.client_id }}"
                  secret_key: "{{ config.secret_key }}"
                  lifetime: "PT3600S"
          parent_key: "/"
          partition_field: "connection"
      - type: DatetimeBasedCursor
        start_datetime:
          datetime: "{{ config['start_date'] }}"
          datetime_format: "%Y-%m-%d"
        end_datetime:
          datetime: "{{ today_utc() }}"
          datetime_format: "%Y-%m-%d"
        step: "P1M"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
        cursor_granularity: "P1D"
    primary_key: "id"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          id:
            type:
            - string
            - integer
          businessName:
            type: string
          serviceName:
            type: string
          postedDate:
            type: string
            format: date-time
          allocatedOnDate:
            type:
            - 'null'
            - string
            format: date-time
          currencyRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type: string
              name:
                type:
                - 'null'
                - string
              symbol:
                type:
                - 'null'
                - string
          currencyRate:
            type:
            - 'null'
            - number
          lines:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                description:
                  type:
                  - 'null'
                  - string
                unitAmount:
                  type:
                  - 'null'
                  - number
                quantity:
                  type:
                  - 'null'
                  - integer
                discountAmount:
                  type:
                  - 'null'
                  - number
                subTotal:
                  type:
                  - 'null'
                  - number
                taxAmount:
                  type:
                  - 'null'
                  - number
                totalAmount:
                  type:
                  - number
                  - string
                discountPercentage:
                  type:
                  - 'null'
                  - number
                  - string
                taxRateRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type: string
                    name:
                      type:
                      - 'null'
                      - string
                    effectiveTaxRate:
                      type:
                      - 'null'
                      - number
                inventoryRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type: string
                    name:
                      type:
                      - 'null'
                      - string
                trackingCategoryRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type: string
                    name:
                      type:
                      - 'null'
                      - string
                    option:
                      type:
                      - 'null'
                      - string
                    optionId:
                      type:
                      - 'null'
                      - string
                id:
                  type:
                  - 'null'
                  - string
                accountRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type: string
                    name:
                      type:
                      - 'null'
                      - string
          totalDiscount:
            type:
            - 'null'
            - number
          discountPercentage:
            type:
            - 'null'
            - number
          subTotal:
            type:
            - 'null'
            - number
          taxAmount:
            type:
            - 'null'
            - number
          totalAmount:
            type:
            - number
            - string
          remainingCredit:
            type:
            - 'null'
            - number
          status:
            type: string
          memo:
            type:
            - 'null'
            - string
          payments:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                amount:
                  type:
                  - 'null'
                  - number
                paymentId:
                  type:
                  - 'null'
                  - string
                date:
                  type:
                  - 'null'
                  - string
                  format: date-time
          sourceModifiedDate:
            type:
            - 'null'
            - string
            format: date-time
          locationRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - 'null'
                - string
              name:
                type:
                - 'null'
                - string
          customerRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type: string
              name:
                type:
                - 'null'
                - string
  invoices_payments_stream:
    type: DeclarativeStream
    retriever:
      type: SimpleRetriever
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path:
          - "data"
        record_filter:
          condition: "{{ not stream_state.get(stream_slice.connection.businessName,
            {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
            >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
            }}"
      paginator:
        type: DefaultPaginator
        page_size_option:
          inject_into: request_parameter
          field_name: "limit"
        pagination_strategy:
          type: OffsetIncrement
          page_size: 100
        page_token_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: "offset"
      requester:
        type: HttpRequester
        url_base: "https://api.railz.ai/"
        http_method: "GET"
        authenticator:
          class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
          url: "https://auth.railz.ai/getAccess"
          client_id: "{{ config.client_id }}"
          secret_key: "{{ config.secret_key }}"
          lifetime: "PT3600S"
        request_parameters:
          businessName: "{{ stream_slice.connection.businessName }}"
          serviceName: "{{ stream_slice.connection.serviceName }}"
          startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
          endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
          orderBy: "{{ parameters.cursor_field }}"
    transformations:
    - type: AddFields
      fields:
      - path:
        - "businessName"
        value: "{{ stream_slice.connection.businessName }}"
      - path:
        - "serviceName"
        value: "{{ stream_slice.connection.serviceName }}"
    incremental_sync:
      type: CustomIncrementalSync
      class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
      stream_slicers:
      - type: SubstreamPartitionRouter
        parent_stream_configs:
        - stream:
            type: DeclarativeStream
            retriever:
              type: SimpleRetriever
              record_selector:
                type: RecordSelector
                extractor:
                  type: DpathExtractor
                  field_path:
                  - "data"
                record_filter:
                  condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                    in parameters.serviceNames }}"
              paginator:
                type: DefaultPaginator
                page_size_option:
                  inject_into: request_parameter
                  field_name: "limit"
                pagination_strategy:
                  type: OffsetIncrement
                  page_size: 100
                page_token_option:
                  type: RequestOption
                  inject_into: request_parameter
                  field_name: "offset"
              requester:
                type: HttpRequester
                url_base: "https://api.railz.ai/"
                http_method: "GET"
                authenticator:
                  class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                  url: "https://auth.railz.ai/getAccess"
                  client_id: "{{ config.client_id }}"
                  secret_key: "{{ config.secret_key }}"
                  lifetime: "PT3600S"
          parent_key: "/"
          partition_field: "connection"
      - type: DatetimeBasedCursor
        start_datetime:
          datetime: "{{ config['start_date'] }}"
          datetime_format: "%Y-%m-%d"
        end_datetime:
          datetime: "{{ today_utc() }}"
          datetime_format: "%Y-%m-%d"
        step: "P1M"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
        cursor_granularity: "P1D"
    primary_key: "id"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          id:
            type:
            - string
            - integer
          businessName:
            type: string
          serviceName:
            type: string
          customerRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type: string
              name:
                type:
                - 'null'
                - string
          accountRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type: string
              name:
                type:
                - 'null'
                - string
          totalAmount:
            type:
            - number
            - string
          currencyRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type: string
              name:
                type:
                - 'null'
                - string
              symbol:
                type:
                - 'null'
                - string
          currencyRate:
            type:
            - 'null'
            - number
          date:
            type: string
            format: date-time
          memo:
            type:
            - 'null'
            - string
          lines:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                amount:
                  type: number
                lines:
                  type:
                  - 'null'
                  - object
                  properties:
                    type:
                      type: string
                    id:
                      type:
                      - 'null'
                      - string
                    amount:
                      type:
                      - 'null'
                      - number
                allocatedOnDate:
                  type:
                  - 'null'
                  - string
                  format: date-time
          subsidiaryRefs:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                id:
                  type: string
                name:
                  type:
                  - 'null'
                  - string
          sourceModifiedDate:
            type:
            - 'null'
            - string
            format: date-time
  journal_entries_stream:
    type: DeclarativeStream
    retriever:
      type: SimpleRetriever
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path:
          - "data"
        record_filter:
          condition: "{{ not stream_state.get(stream_slice.connection.businessName,
            {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
            >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
            }}"
      paginator:
        type: DefaultPaginator
        page_size_option:
          inject_into: request_parameter
          field_name: "limit"
        pagination_strategy:
          type: OffsetIncrement
          page_size: 100
        page_token_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: "offset"
      requester:
        type: HttpRequester
        url_base: "https://api.railz.ai/"
        http_method: "GET"
        authenticator:
          class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
          url: "https://auth.railz.ai/getAccess"
          client_id: "{{ config.client_id }}"
          secret_key: "{{ config.secret_key }}"
          lifetime: "PT3600S"
        request_parameters:
          businessName: "{{ stream_slice.connection.businessName }}"
          serviceName: "{{ stream_slice.connection.serviceName }}"
          startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
          endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
          orderBy: "{{ parameters.cursor_field }}"
    transformations:
    - type: AddFields
      fields:
      - path:
        - "businessName"
        value: "{{ stream_slice.connection.businessName }}"
      - path:
        - "serviceName"
        value: "{{ stream_slice.connection.serviceName }}"
    incremental_sync:
      type: CustomIncrementalSync
      class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
      stream_slicers:
      - type: SubstreamPartitionRouter
        parent_stream_configs:
        - stream:
            type: DeclarativeStream
            retriever:
              type: SimpleRetriever
              record_selector:
                type: RecordSelector
                extractor:
                  type: DpathExtractor
                  field_path:
                  - "data"
                record_filter:
                  condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                    in parameters.serviceNames }}"
              paginator:
                type: DefaultPaginator
                page_size_option:
                  inject_into: request_parameter
                  field_name: "limit"
                pagination_strategy:
                  type: OffsetIncrement
                  page_size: 100
                page_token_option:
                  type: RequestOption
                  inject_into: request_parameter
                  field_name: "offset"
              requester:
                type: HttpRequester
                url_base: "https://api.railz.ai/"
                http_method: "GET"
                authenticator:
                  class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                  url: "https://auth.railz.ai/getAccess"
                  client_id: "{{ config.client_id }}"
                  secret_key: "{{ config.secret_key }}"
                  lifetime: "PT3600S"
          parent_key: "/"
          partition_field: "connection"
      - type: DatetimeBasedCursor
        start_datetime:
          datetime: "{{ config['start_date'] }}"
          datetime_format: "%Y-%m-%d"
        end_datetime:
          datetime: "{{ today_utc() }}"
          datetime_format: "%Y-%m-%d"
        step: "P1M"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
        cursor_granularity: "P1D"
    primary_key: "id"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          id:
            type:
            - string
            - integer
          businessName:
            type: string
          serviceName:
            type: string
          postedDate:
            type: string
            format: date-time
          createdDate:
            type: string
            format: date-time
          currencyRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - 'null'
                - string
              name:
                type:
                - 'null'
                - string
              symbol:
                type:
                - 'null'
                - string
          currencyRate:
            type:
            - 'null'
            - number
          subsidiaryRefs:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                id:
                  type: string
                name:
                  type:
                  - 'null'
                  - string
          lines:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                description:
                  type:
                  - 'null'
                  - string
                credit:
                  type:
                  - 'null'
                  - number
                debit:
                  type:
                  - 'null'
                  - number
                taxAmount:
                  type:
                  - 'null'
                  - number
                accountRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type: string
                    name:
                      type:
                      - 'null'
                      - string
                entityRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type: string
                    name:
                      type:
                      - 'null'
                      - string
                    type:
                      type:
                      - 'null'
                      - string
                taxRateRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type: string
                    name:
                      type:
                      - 'null'
                      - string
                    effectiveTaxRate:
                      type:
                      - 'null'
                      - number
                trackingCategoryRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type: string
                    name:
                      type:
                      - 'null'
                      - string
                    option:
                      type:
                      - 'null'
                      - string
                    optionId:
                      type:
                      - 'null'
                      - string
                id:
                  type:
                  - 'null'
                  - string
          memo:
            type:
            - 'null'
            - string
          sourceModifiedDate:
            type:
            - 'null'
            - string
            format: date-time
          totalCredit:
            type:
            - 'null'
            - number
          totalDebit:
            type:
            - 'null'
            - number
  purchase_orders_stream:
    type: DeclarativeStream
    retriever:
      type: SimpleRetriever
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path:
          - "data"
        record_filter:
          condition: "{{ not stream_state.get(stream_slice.connection.businessName,
            {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
            >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
            }}"
      paginator:
        type: DefaultPaginator
        page_size_option:
          inject_into: request_parameter
          field_name: "limit"
        pagination_strategy:
          type: OffsetIncrement
          page_size: 100
        page_token_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: "offset"
      requester:
        type: HttpRequester
        url_base: "https://api.railz.ai/"
        http_method: "GET"
        authenticator:
          class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
          url: "https://auth.railz.ai/getAccess"
          client_id: "{{ config.client_id }}"
          secret_key: "{{ config.secret_key }}"
          lifetime: "PT3600S"
        request_parameters:
          businessName: "{{ stream_slice.connection.businessName }}"
          serviceName: "{{ stream_slice.connection.serviceName }}"
          startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
          endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
          orderBy: "{{ parameters.cursor_field }}"
    transformations:
    - type: AddFields
      fields:
      - path:
        - "businessName"
        value: "{{ stream_slice.connection.businessName }}"
      - path:
        - "serviceName"
        value: "{{ stream_slice.connection.serviceName }}"
    incremental_sync:
      type: CustomIncrementalSync
      class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
      stream_slicers:
      - type: SubstreamPartitionRouter
        parent_stream_configs:
        - stream:
            type: DeclarativeStream
            retriever:
              type: SimpleRetriever
              record_selector:
                type: RecordSelector
                extractor:
                  type: DpathExtractor
                  field_path:
                  - "data"
                record_filter:
                  condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                    in parameters.serviceNames }}"
              paginator:
                type: DefaultPaginator
                page_size_option:
                  inject_into: request_parameter
                  field_name: "limit"
                pagination_strategy:
                  type: OffsetIncrement
                  page_size: 100
                page_token_option:
                  type: RequestOption
                  inject_into: request_parameter
                  field_name: "offset"
              requester:
                type: HttpRequester
                url_base: "https://api.railz.ai/"
                http_method: "GET"
                authenticator:
                  class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                  url: "https://auth.railz.ai/getAccess"
                  client_id: "{{ config.client_id }}"
                  secret_key: "{{ config.secret_key }}"
                  lifetime: "PT3600S"
          parent_key: "/"
          partition_field: "connection"
      - type: DatetimeBasedCursor
        start_datetime:
          datetime: "{{ config['start_date'] }}"
          datetime_format: "%Y-%m-%d"
        end_datetime:
          datetime: "{{ today_utc() }}"
          datetime_format: "%Y-%m-%d"
        step: "P1M"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
        cursor_granularity: "P1D"
    primary_key: "id"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          id:
            type:
            - string
            - integer
          businessName:
            type: string
          serviceName:
            type: string
          vendorRef:
            type: object
            properties:
              id:
                type:
                - string
                - integer
              name:
                type:
                - 'null'
                - string
          postedDate:
            type: string
            format: date-time
          deliveryDate:
            type:
            - 'null'
            - string
            format: date-time
          expectedArrivalDate:
            type:
            - 'null'
            - string
            format: date-time
          dueDate:
            type:
            - 'null'
            - string
            format: date-time
          currencyRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - string
                - integer
              name:
                type:
                - 'null'
                - string
              symbol:
                type:
                - 'null'
                - string
          currencyRate:
            type:
            - 'null'
            - number
          lines:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                description:
                  type:
                  - 'null'
                  - string
                unitAmount:
                  type:
                  - 'null'
                  - number
                quantity:
                  type:
                  - 'null'
                  - integer
                discountAmount:
                  type:
                  - 'null'
                  - number
                subTotal:
                  type:
                  - 'null'
                  - number
                taxAmount:
                  type:
                  - 'null'
                  - number
                totalAmount:
                  type:
                  - number
                  - string
                discountPercentage:
                  type:
                  - 'null'
                  - number
                  - string
                taxRateRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type:
                      - string
                      - integer
                    name:
                      type:
                      - 'null'
                      - string
                    effectiveTaxRate:
                      type:
                      - 'null'
                      - number
                inventoryRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type:
                      - string
                      - integer
                    name:
                      type:
                      - 'null'
                      - string
                trackingCategoryRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type:
                      - string
                      - integer
                    name:
                      type:
                      - 'null'
                      - string
                    option:
                      type:
                      - 'null'
                      - string
                    optionId:
                      type:
                      - 'null'
                      - string
                id:
                  type:
                  - 'null'
                  - string
                  - integer
                accountRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type:
                      - string
                      - integer
                    name:
                      type:
                      - 'null'
                      - string
          totalDiscount:
            type:
            - 'null'
            - number
          discountPercentage:
            type:
            - 'null'
            - number
          subTotal:
            type:
            - 'null'
            - number
          taxAmount:
            type:
            - 'null'
            - number
          totalAmount:
            type:
            - number
            - string
          status:
            type: string
          memo:
            type:
            - 'null'
            - string
          shippingAddress:
            type: object
            properties:
              line1:
                type:
                - string
                - 'null'
              line2:
                type:
                - string
                - 'null'
              city:
                type:
                - string
                - 'null'
              region:
                type:
                - string
                - 'null'
              country:
                type:
                - string
                - 'null'
              postalCode:
                type:
                - string
                - 'null'
          contacts:
            type:
            - 'null'
            - object
            properties:
              name:
                type:
                - 'null'
                - string
              email:
                type:
                - 'null'
                - string
              phone:
                type:
                - 'null'
                - string
          sourceModifiedDate:
            type:
            - 'null'
            - string
            format: date-time
  refunds_stream:
    type: DeclarativeStream
    retriever:
      type: SimpleRetriever
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path:
          - "data"
        record_filter:
          condition: "{{ not stream_state.get(stream_slice.connection.businessName,
            {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
            >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
            }}"
      paginator:
        type: DefaultPaginator
        page_size_option:
          inject_into: request_parameter
          field_name: "limit"
        pagination_strategy:
          type: OffsetIncrement
          page_size: 100
        page_token_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: "offset"
      requester:
        type: HttpRequester
        url_base: "https://api.railz.ai/"
        http_method: "GET"
        authenticator:
          class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
          url: "https://auth.railz.ai/getAccess"
          client_id: "{{ config.client_id }}"
          secret_key: "{{ config.secret_key }}"
          lifetime: "PT3600S"
        request_parameters:
          businessName: "{{ stream_slice.connection.businessName }}"
          serviceName: "{{ stream_slice.connection.serviceName }}"
          startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
          endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
          orderBy: "{{ parameters.cursor_field }}"
    transformations:
    - type: AddFields
      fields:
      - path:
        - "businessName"
        value: "{{ stream_slice.connection.businessName }}"
      - path:
        - "serviceName"
        value: "{{ stream_slice.connection.serviceName }}"
    incremental_sync:
      type: CustomIncrementalSync
      class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
      stream_slicers:
      - type: SubstreamPartitionRouter
        parent_stream_configs:
        - stream:
            type: DeclarativeStream
            retriever:
              type: SimpleRetriever
              record_selector:
                type: RecordSelector
                extractor:
                  type: DpathExtractor
                  field_path:
                  - "data"
                record_filter:
                  condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                    in parameters.serviceNames }}"
              paginator:
                type: DefaultPaginator
                page_size_option:
                  inject_into: request_parameter
                  field_name: "limit"
                pagination_strategy:
                  type: OffsetIncrement
                  page_size: 100
                page_token_option:
                  type: RequestOption
                  inject_into: request_parameter
                  field_name: "offset"
              requester:
                type: HttpRequester
                url_base: "https://api.railz.ai/"
                http_method: "GET"
                authenticator:
                  class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                  url: "https://auth.railz.ai/getAccess"
                  client_id: "{{ config.client_id }}"
                  secret_key: "{{ config.secret_key }}"
                  lifetime: "PT3600S"
          parent_key: "/"
          partition_field: "connection"
      - type: DatetimeBasedCursor
        start_datetime:
          datetime: "{{ config['start_date'] }}"
          datetime_format: "%Y-%m-%d"
        end_datetime:
          datetime: "{{ today_utc() }}"
          datetime_format: "%Y-%m-%d"
        step: "P1M"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
        cursor_granularity: "P1D"
    primary_key: "id"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          id:
            type:
            - string
            - integer
          businessName:
            type: string
          serviceName:
            type: string
          customerRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type: string
              name:
                type:
                - 'null'
                - string
          accountRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type: string
              name:
                type:
                - 'null'
                - string
          date:
            type: string
            format: date-time
          currencyRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type: string
              name:
                type:
                - 'null'
                - string
              symbol:
                type:
                - 'null'
                - string
          currencyRate:
            type:
            - 'null'
            - number
          lines:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                description:
                  type:
                  - 'null'
                  - string
                unitAmount:
                  type:
                  - 'null'
                  - number
                quantity:
                  type:
                  - 'null'
                  - integer
                discountAmount:
                  type:
                  - 'null'
                  - number
                subTotal:
                  type:
                  - 'null'
                  - number
                taxAmount:
                  type:
                  - 'null'
                  - number
                totalAmount:
                  type:
                  - number
                  - string
                discountPercentage:
                  type:
                  - 'null'
                  - number
                  - string
                taxRateRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type: string
                    name:
                      type:
                      - 'null'
                      - string
                    effectiveTaxRate:
                      type:
                      - 'null'
                      - number
                inventoryRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type: string
                    name:
                      type:
                      - 'null'
                      - string
                trackingCategoryRef:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type: string
                    name:
                      type:
                      - 'null'
                      - string
                    option:
                      type:
                      - 'null'
                      - string
                    optionId:
                      type:
                      - 'null'
                      - string
          totalDiscount:
            type:
            - 'null'
            - number
          discountPercentage:
            type:
            - 'null'
            - number
          subTotal:
            type:
            - 'null'
            - number
          taxAmount:
            type:
            - 'null'
            - number
          totalAmount:
            type:
            - number
            - string
          memo:
            type:
            - 'null'
            - string
          shippingAddress:
            type: object
            properties:
              line1:
                type:
                - string
                - 'null'
              line2:
                type:
                - string
                - 'null'
              city:
                type:
                - string
                - 'null'
              region:
                type:
                - string
                - 'null'
              country:
                type:
                - string
                - 'null'
              postalCode:
                type:
                - string
                - 'null'
          sourceModifiedDate:
            type:
            - 'null'
            - string
            format: date-time
  commerce_disputes_stream:
    type: DeclarativeStream
    retriever:
      type: SimpleRetriever
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path:
          - "data"
        record_filter:
          condition: "{{ not stream_state.get(stream_slice.connection.businessName,
            {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
            >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
            }}"
      paginator:
        type: DefaultPaginator
        page_size_option:
          inject_into: request_parameter
          field_name: "limit"
        pagination_strategy:
          type: OffsetIncrement
          page_size: 100
        page_token_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: "offset"
      requester:
        type: HttpRequester
        url_base: "https://api.railz.ai/"
        http_method: "GET"
        authenticator:
          class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
          url: "https://auth.railz.ai/getAccess"
          client_id: "{{ config.client_id }}"
          secret_key: "{{ config.secret_key }}"
          lifetime: "PT3600S"
        request_parameters:
          businessName: "{{ stream_slice.connection.businessName }}"
          serviceName: "{{ stream_slice.connection.serviceName }}"
          startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
          endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
          orderBy: "{{ parameters.cursor_field }}"
    transformations:
    - type: AddFields
      fields:
      - path:
        - "businessName"
        value: "{{ stream_slice.connection.businessName }}"
      - path:
        - "serviceName"
        value: "{{ stream_slice.connection.serviceName }}"
    incremental_sync:
      type: CustomIncrementalSync
      class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
      stream_slicers:
      - type: SubstreamPartitionRouter
        parent_stream_configs:
        - stream:
            type: DeclarativeStream
            retriever:
              type: SimpleRetriever
              record_selector:
                type: RecordSelector
                extractor:
                  type: DpathExtractor
                  field_path:
                  - "data"
                record_filter:
                  condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                    in parameters.serviceNames }}"
              paginator:
                type: DefaultPaginator
                page_size_option:
                  inject_into: request_parameter
                  field_name: "limit"
                pagination_strategy:
                  type: OffsetIncrement
                  page_size: 100
                page_token_option:
                  type: RequestOption
                  inject_into: request_parameter
                  field_name: "offset"
              requester:
                type: HttpRequester
                url_base: "https://api.railz.ai/"
                http_method: "GET"
                authenticator:
                  class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                  url: "https://auth.railz.ai/getAccess"
                  client_id: "{{ config.client_id }}"
                  secret_key: "{{ config.secret_key }}"
                  lifetime: "PT3600S"
          parent_key: "/"
          partition_field: "connection"
      - type: DatetimeBasedCursor
        start_datetime:
          datetime: "{{ config['start_date'] }}"
          datetime_format: "%Y-%m-%d"
        end_datetime:
          datetime: "{{ today_utc() }}"
          datetime_format: "%Y-%m-%d"
        step: "P1M"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
        cursor_granularity: "P1D"
    primary_key: "id"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          id:
            type:
            - string
            - integer
          businessName:
            type: string
          serviceName:
            type: string
          totalAmount:
            type:
            - number
            - string
          status:
            type: string
          reason:
            type: string
          dueDate:
            type: string
            format: date-time
          createdDate:
            type: string
            format: date-time
          sourceModifiedDate:
            type:
            - 'null'
            - string
            format: date-time
          orderRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - string
                - integer
              orderNumber:
                type:
                - 'null'
                - string
          currencyRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - 'null'
                - string
                - integer
              name:
                type: string
              symbol:
                type: string
  commerce_orders_stream:
    type: DeclarativeStream
    retriever:
      type: SimpleRetriever
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path:
          - "data"
        record_filter:
          condition: "{{ not stream_state.get(stream_slice.connection.businessName,
            {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
            >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
            }}"
      paginator:
        type: DefaultPaginator
        page_size_option:
          inject_into: request_parameter
          field_name: "limit"
        pagination_strategy:
          type: OffsetIncrement
          page_size: 100
        page_token_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: "offset"
      requester:
        type: HttpRequester
        url_base: "https://api.railz.ai/"
        http_method: "GET"
        authenticator:
          class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
          url: "https://auth.railz.ai/getAccess"
          client_id: "{{ config.client_id }}"
          secret_key: "{{ config.secret_key }}"
          lifetime: "PT3600S"
        request_parameters:
          businessName: "{{ stream_slice.connection.businessName }}"
          serviceName: "{{ stream_slice.connection.serviceName }}"
          startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
          endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
          orderBy: "{{ parameters.cursor_field }}"
    transformations:
    - type: AddFields
      fields:
      - path:
        - "businessName"
        value: "{{ stream_slice.connection.businessName }}"
      - path:
        - "serviceName"
        value: "{{ stream_slice.connection.serviceName }}"
    incremental_sync:
      type: CustomIncrementalSync
      class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
      stream_slicers:
      - type: SubstreamPartitionRouter
        parent_stream_configs:
        - stream:
            type: DeclarativeStream
            retriever:
              type: SimpleRetriever
              record_selector:
                type: RecordSelector
                extractor:
                  type: DpathExtractor
                  field_path:
                  - "data"
                record_filter:
                  condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                    in parameters.serviceNames }}"
              paginator:
                type: DefaultPaginator
                page_size_option:
                  inject_into: request_parameter
                  field_name: "limit"
                pagination_strategy:
                  type: OffsetIncrement
                  page_size: 100
                page_token_option:
                  type: RequestOption
                  inject_into: request_parameter
                  field_name: "offset"
              requester:
                type: HttpRequester
                url_base: "https://api.railz.ai/"
                http_method: "GET"
                authenticator:
                  class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                  url: "https://auth.railz.ai/getAccess"
                  client_id: "{{ config.client_id }}"
                  secret_key: "{{ config.secret_key }}"
                  lifetime: "PT3600S"
          parent_key: "/"
          partition_field: "connection"
      - type: DatetimeBasedCursor
        start_datetime:
          datetime: "{{ config['start_date'] }}"
          datetime_format: "%Y-%m-%d"
        end_datetime:
          datetime: "{{ today_utc() }}"
          datetime_format: "%Y-%m-%d"
        step: "P1M"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
        cursor_granularity: "P1D"
    primary_key: "id"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          id:
            type:
            - string
            - integer
          businessName:
            type: string
          serviceName:
            type: string
          orderNumber:
            type:
            - 'null'
            - string
          fulfillmentRefs:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                carrier:
                  type:
                  - 'null'
                  - string
                trackingNumber:
                  type:
                  - 'null'
                  - string
                service:
                  type:
                  - 'null'
                  - string
                trackingUrl:
                  type:
                  - 'null'
                  - string
          lines:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                id:
                  type:
                  - string
                  - integer
                productId:
                  type:
                  - 'null'
                  - string
                variantId:
                  type: string
                name:
                  type:
                  - 'null'
                  - string
                quantity:
                  type: integer
                totalPrice:
                  type: number
                unitPrice:
                  type:
                  - 'null'
                  - number
          refundRefs:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                id:
                  type:
                  - string
                  - integer
                totalAmount:
                  type:
                  - number
                  - string
          transactionSourceRefs:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                id:
                  type:
                  - string
                  - integer
                type:
                  type: string
                totalAmount:
                  type:
                  - number
                  - string
          shippingAddress:
            type:
            - 'null'
            - object
            properties:
              contactName:
                type:
                - string
                - 'null'
              phone:
                type:
                - string
                - 'null'
              line1:
                type:
                - string
                - 'null'
              line2:
                type:
                - string
                - 'null'
              city:
                type:
                - string
                - 'null'
              region:
                type:
                - string
                - 'null'
              country:
                type:
                - string
                - 'null'
              postalCode:
                type:
                - string
                - 'null'
          billingAddress:
            type:
            - 'null'
            - object
            properties:
              contactName:
                type:
                - string
                - 'null'
              phone:
                type:
                - string
                - 'null'
              line1:
                type:
                - string
                - 'null'
              line2:
                type:
                - string
                - 'null'
              city:
                type:
                - string
                - 'null'
              region:
                type:
                - string
                - 'null'
              country:
                type:
                - string
                - 'null'
              postalCode:
                type:
                - string
                - 'null'
          customerRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - string
                - integer
              customerName:
                type:
                - 'null'
                - string
              email:
                type:
                - 'null'
                - string
          currencyRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - 'null'
                - string
                - integer
              name:
                type: string
              symbol:
                type: string
          totalShippingAmount:
            type:
            - 'null'
            - number
          totalGratuityAmount:
            type:
            - 'null'
            - number
          totalDiscountAmount:
            type:
            - 'null'
            - number
          totalTaxAmount:
            type: number
          totalAmount:
            type:
            - number
            - string
          createdDate:
            type: string
            format: date-time
          sourceModifiedDate:
            type: string
            format: date-time
          status:
            type: string
          paymentStatus:
            type: string
          fulfillmentStatus:
            type: string
  commerce_products_stream:
    type: DeclarativeStream
    retriever:
      type: SimpleRetriever
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path:
          - "data"
        record_filter:
          condition: "{{ not stream_state.get(stream_slice.connection.businessName,
            {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
            >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
            }}"
      paginator:
        type: DefaultPaginator
        page_size_option:
          inject_into: request_parameter
          field_name: "limit"
        pagination_strategy:
          type: OffsetIncrement
          page_size: 100
        page_token_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: "offset"
      requester:
        type: HttpRequester
        url_base: "https://api.railz.ai/"
        http_method: "GET"
        authenticator:
          class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
          url: "https://auth.railz.ai/getAccess"
          client_id: "{{ config.client_id }}"
          secret_key: "{{ config.secret_key }}"
          lifetime: "PT3600S"
        request_parameters:
          businessName: "{{ stream_slice.connection.businessName }}"
          serviceName: "{{ stream_slice.connection.serviceName }}"
          startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
          endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
          orderBy: "{{ parameters.cursor_field }}"
    transformations:
    - type: AddFields
      fields:
      - path:
        - "businessName"
        value: "{{ stream_slice.connection.businessName }}"
      - path:
        - "serviceName"
        value: "{{ stream_slice.connection.serviceName }}"
    incremental_sync:
      type: CustomIncrementalSync
      class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
      stream_slicers:
      - type: SubstreamPartitionRouter
        parent_stream_configs:
        - stream:
            type: DeclarativeStream
            retriever:
              type: SimpleRetriever
              record_selector:
                type: RecordSelector
                extractor:
                  type: DpathExtractor
                  field_path:
                  - "data"
                record_filter:
                  condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                    in parameters.serviceNames }}"
              paginator:
                type: DefaultPaginator
                page_size_option:
                  inject_into: request_parameter
                  field_name: "limit"
                pagination_strategy:
                  type: OffsetIncrement
                  page_size: 100
                page_token_option:
                  type: RequestOption
                  inject_into: request_parameter
                  field_name: "offset"
              requester:
                type: HttpRequester
                url_base: "https://api.railz.ai/"
                http_method: "GET"
                authenticator:
                  class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                  url: "https://auth.railz.ai/getAccess"
                  client_id: "{{ config.client_id }}"
                  secret_key: "{{ config.secret_key }}"
                  lifetime: "PT3600S"
          parent_key: "/"
          partition_field: "connection"
      - type: DatetimeBasedCursor
        start_datetime:
          datetime: "{{ config['start_date'] }}"
          datetime_format: "%Y-%m-%d"
        end_datetime:
          datetime: "{{ today_utc() }}"
          datetime_format: "%Y-%m-%d"
        step: "P1M"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
        cursor_granularity: "P1D"
    primary_key: "id"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          id:
            type:
            - string
            - integer
          businessName:
            type: string
          serviceName:
            type: string
          type:
            type:
            - 'null'
            - string
          name:
            type: string
          description:
            type:
            - 'null'
            - string
          createdDate:
            type: string
            format: date-time
          sourceModifiedDate:
            type: string
            format: date-time
          status:
            type: string
          isGiftCard:
            type:
            - 'null'
            - boolean
          productVariants:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                id:
                  type:
                  - string
                  - integer
                name:
                  type: string
                isTaxEnabled:
                  type:
                  - 'null'
                  - boolean
                sku:
                  type:
                  - 'null'
                  - string
                barcode:
                  type:
                  - 'null'
                  - string
                weight:
                  type:
                  - 'null'
                  - object
                  properties:
                    value:
                      type:
                      - 'null'
                      - number
                    unitOfMeasure:
                      type:
                      - 'null'
                      - string
                unitPrice:
                  type: number
                inventory:
                  type:
                  - 'null'
                  - object
                  properties:
                    totalQuantity:
                      type:
                      - 'null'
                      - number
                    quantityPerLocation:
                      type:
                      - 'null'
                      - array
                      items:
                        type:
                        - 'null'
                        - object
                        properties:
                          quantity:
                            type:
                            - 'null'
                            - number
                          locationRef:
                            type:
                            - 'null'
                            - object
                            properties:
                              id:
                                type:
                                - 'null'
                                - string
                                - integer
                              name:
                                type:
                                - 'null'
                                - string
                isShippingRequired:
                  type:
                  - 'null'
                  - boolean
                createdDate:
                  type: string
                  format: date-time
  commerce_transactions_stream:
    type: DeclarativeStream
    retriever:
      type: SimpleRetriever
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path:
          - "data"
        record_filter:
          condition: "{{ not stream_state.get(stream_slice.connection.businessName,
            {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
            >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
            }}"
      paginator:
        type: DefaultPaginator
        page_size_option:
          inject_into: request_parameter
          field_name: "limit"
        pagination_strategy:
          type: OffsetIncrement
          page_size: 100
        page_token_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: "offset"
      requester:
        type: HttpRequester
        url_base: "https://api.railz.ai/"
        http_method: "GET"
        authenticator:
          class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
          url: "https://auth.railz.ai/getAccess"
          client_id: "{{ config.client_id }}"
          secret_key: "{{ config.secret_key }}"
          lifetime: "PT3600S"
        request_parameters:
          businessName: "{{ stream_slice.connection.businessName }}"
          serviceName: "{{ stream_slice.connection.serviceName }}"
          startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
          endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
          orderBy: "{{ parameters.cursor_field }}"
    transformations:
    - type: AddFields
      fields:
      - path:
        - "businessName"
        value: "{{ stream_slice.connection.businessName }}"
      - path:
        - "serviceName"
        value: "{{ stream_slice.connection.serviceName }}"
    incremental_sync:
      type: CustomIncrementalSync
      class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
      stream_slicers:
      - type: SubstreamPartitionRouter
        parent_stream_configs:
        - stream:
            type: DeclarativeStream
            retriever:
              type: SimpleRetriever
              record_selector:
                type: RecordSelector
                extractor:
                  type: DpathExtractor
                  field_path:
                  - "data"
                record_filter:
                  condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                    in parameters.serviceNames }}"
              paginator:
                type: DefaultPaginator
                page_size_option:
                  inject_into: request_parameter
                  field_name: "limit"
                pagination_strategy:
                  type: OffsetIncrement
                  page_size: 100
                page_token_option:
                  type: RequestOption
                  inject_into: request_parameter
                  field_name: "offset"
              requester:
                type: HttpRequester
                url_base: "https://api.railz.ai/"
                http_method: "GET"
                authenticator:
                  class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                  url: "https://auth.railz.ai/getAccess"
                  client_id: "{{ config.client_id }}"
                  secret_key: "{{ config.secret_key }}"
                  lifetime: "PT3600S"
          parent_key: "/"
          partition_field: "connection"
      - type: DatetimeBasedCursor
        start_datetime:
          datetime: "{{ config['start_date'] }}"
          datetime_format: "%Y-%m-%d"
        end_datetime:
          datetime: "{{ today_utc() }}"
          datetime_format: "%Y-%m-%d"
        step: "P1M"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
        cursor_granularity: "P1D"
    primary_key: "id"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          id:
            type:
            - string
            - integer
          businessName:
            type: string
          serviceName:
            type: string
          orderId:
            type:
            - 'null'
            - string
          paymentMethodType:
            type:
            - 'null'
            - string
          totalAmount:
            type:
            - 'null'
            - number
            - string
          currencyRef:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - 'null'
                - string
                - integer
              name:
                type: string
              symbol:
                type: string
          transactionSourceRefs:
            type:
            - 'null'
            - array
            items:
              type:
              - 'null'
              - object
              properties:
                id:
                  type:
                  - string
                  - integer
                type:
                  type: string
          transactionType:
            type:
            - string
            - number
          createdDate:
            type: string
            format: date-time
          sourceModifiedDate:
            type:
            - 'null'
            - string
            format: date-time
          status:
            type: string
streams:
- type: DeclarativeStream
  retriever:
    type: SimpleRetriever
    record_selector:
      type: RecordSelector
      extractor:
        type: DpathExtractor
        field_path:
        - "data"
    paginator:
      type: DefaultPaginator
      page_size_option:
        inject_into: request_parameter
        field_name: "limit"
        type: RequestOption
      pagination_strategy:
        type: OffsetIncrement
        page_size: 100
      page_token_option:
        type: RequestOption
        inject_into: request_parameter
        field_name: "offset"
    requester:
      type: HttpRequester
      url_base: "https://api.railz.ai/"
      http_method: "GET"
      authenticator:
        class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
        url: "https://auth.railz.ai/getAccess"
        client_id: "{{ config.client_id }}"
        secret_key: "{{ config.secret_key }}"
        lifetime: "PT3600S"
        type: CustomAuthenticator
      path: "/businesses"
  primary_key: "businessName"
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        businessName:
          type: string
        status:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        metadata:
          type:
          - 'null'
          - array
          items:
            type: string
        connections:
          type: array
          items:
            type: object
            properties:
              businessName:
                type: string
              connectionId:
                type: string
              serviceName:
                type: string
              firstRecordDate:
                type: string
                format: date-time
              description:
                type: string
              status:
                type: string
              createdAt:
                type: string
                format: date-time
              updatedAt:
                type: string
                format: date-time
  name: "businesses"
- type: DeclarativeStream
  retriever:
    type: SimpleRetriever
    record_selector:
      type: RecordSelector
      extractor:
        type: DpathExtractor
        field_path:
        - "data"
    paginator:
      type: DefaultPaginator
      page_size_option:
        inject_into: request_parameter
        field_name: "limit"
        type: RequestOption
      pagination_strategy:
        type: OffsetIncrement
        page_size: 100
      page_token_option:
        type: RequestOption
        inject_into: request_parameter
        field_name: "offset"
    requester:
      type: HttpRequester
      url_base: "https://api.railz.ai/"
      http_method: "GET"
      authenticator:
        class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
        url: "https://auth.railz.ai/getAccess"
        client_id: "{{ config.client_id }}"
        secret_key: "{{ config.secret_key }}"
        lifetime: "PT3600S"
        type: CustomAuthenticator
      path: "/connections"
  primary_key: "connectionId"
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        businessName:
          type: string
        connectionId:
          type: string
        serviceName:
          type: string
        firstRecordDate:
          type: string
          format: date-time
        description:
          type: string
        status:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
  name: "connections"
- type: DeclarativeStream
  retriever:
    type: SimpleRetriever
    record_selector:
      type: RecordSelector
      extractor:
        type: DpathExtractor
        field_path:
        - "data"
    paginator:
      type: DefaultPaginator
      page_size_option:
        inject_into: request_parameter
        field_name: "limit"
        type: RequestOption
      pagination_strategy:
        type: OffsetIncrement
        page_size: 100
      page_token_option:
        type: RequestOption
        inject_into: request_parameter
        field_name: "offset"
    requester:
      type: HttpRequester
      url_base: "https://api.railz.ai/"
      http_method: "GET"
      authenticator:
        class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
        url: "https://auth.railz.ai/getAccess"
        client_id: "{{ config.client_id }}"
        secret_key: "{{ config.secret_key }}"
        lifetime: "PT3600S"
        type: CustomAuthenticator
      request_parameters:
        businessName: "{{ stream_slice.connection.businessName }}"
        serviceName: "{{ stream_slice.connection.serviceName }}"
      path: "/customers"
    partition_router:
      type: SubstreamPartitionRouter
      parent_stream_configs:
      - stream:
          type: DeclarativeStream
          retriever:
            type: SimpleRetriever
            record_selector:
              type: RecordSelector
              extractor:
                type: DpathExtractor
                field_path:
                - "data"
              record_filter:
                condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                  in parameters.serviceNames }}"
                type: RecordFilter
            paginator:
              type: DefaultPaginator
              page_size_option:
                inject_into: request_parameter
                field_name: "limit"
                type: RequestOption
              pagination_strategy:
                type: OffsetIncrement
                page_size: 100
              page_token_option:
                type: RequestOption
                inject_into: request_parameter
                field_name: "offset"
            requester:
              type: HttpRequester
              url_base: "https://api.railz.ai/"
              http_method: "GET"
              authenticator:
                class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                url: "https://auth.railz.ai/getAccess"
                client_id: "{{ config.client_id }}"
                secret_key: "{{ config.secret_key }}"
                lifetime: "PT3600S"
                type: CustomAuthenticator
              path: "/connections"
          name: "connections_slice"
        parent_key: "/"
        partition_field: "connection"
        type: ParentStreamConfig
  transformations:
  - type: AddFields
    fields:
    - path:
      - "businessName"
      value: "{{ stream_slice.connection.businessName }}"
      type: AddedFieldDefinition
    - path:
      - "serviceName"
      value: "{{ stream_slice.connection.serviceName }}"
      type: AddedFieldDefinition
  primary_key: "id"
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        id:
          type:
          - string
          - integer
        businessName:
          type: string
        serviceName:
          type: string
        customerName:
          type: string
        contactName:
          type:
          - 'null'
          - string
        emailAddress:
          type:
          - 'null'
          - string
        website:
          type:
          - 'null'
          - string
        defaultCurrency:
          type:
          - 'null'
          - object
          properties:
            id:
              type:
              - string
              - integer
            name:
              type:
              - 'null'
              - string
            symbol:
              type:
              - 'null'
              - string
        phone:
          type:
          - 'null'
          - string
        addresses:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              line1:
                type:
                - 'null'
                - string
              line2:
                type:
                - 'null'
                - string
              city:
                type:
                - 'null'
                - string
              region:
                type:
                - 'null'
                - string
              country:
                type:
                - 'null'
                - string
              postalCode:
                type:
                - 'null'
                - string
              type:
                type: string
        contacts:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              name:
                type:
                - 'null'
                - string
              email:
                type:
                - 'null'
                - string
              phone:
                type:
                - 'null'
                - string
              addresses:
                type:
                - 'null'
                - object
                properties:
                  line1:
                    type:
                    - 'null'
                    - string
                  line2:
                    type:
                    - 'null'
                    - string
                  city:
                    type:
                    - 'null'
                    - string
                  region:
                    type:
                    - 'null'
                    - string
                  country:
                    type:
                    - 'null'
                    - string
                  postalCode:
                    type:
                    - 'null'
                    - string
                  type:
                    type: string
              status:
                type: string
              modifiedDate:
                type:
                - 'null'
                - string
                format: date-time
        taxNumber:
          type:
          - 'null'
          - string
        balance:
          type:
          - 'null'
          - number
        status:
          type: string
        subsidiaryRefs:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - string
                - integer
              name:
                type:
                - 'null'
                - string
              modifiedDate:
                type:
                - 'null'
                - string
                format: date-time
        sourceModifiedDate:
          type:
          - 'null'
          - string
          format: date-time
  name: "customers"
- type: DeclarativeStream
  retriever:
    type: SimpleRetriever
    record_selector:
      type: RecordSelector
      extractor:
        type: DpathExtractor
        field_path:
        - "data"
    paginator:
      type: DefaultPaginator
      page_size_option:
        inject_into: request_parameter
        field_name: "limit"
        type: RequestOption
      pagination_strategy:
        type: OffsetIncrement
        page_size: 100
      page_token_option:
        type: RequestOption
        inject_into: request_parameter
        field_name: "offset"
    requester:
      type: HttpRequester
      url_base: "https://api.railz.ai/"
      http_method: "GET"
      authenticator:
        class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
        url: "https://auth.railz.ai/getAccess"
        client_id: "{{ config.client_id }}"
        secret_key: "{{ config.secret_key }}"
        lifetime: "PT3600S"
        type: CustomAuthenticator
      request_parameters:
        businessName: "{{ stream_slice.connection.businessName }}"
        serviceName: "{{ stream_slice.connection.serviceName }}"
      path: "/accounts"
    partition_router:
      type: SubstreamPartitionRouter
      parent_stream_configs:
      - stream:
          type: DeclarativeStream
          retriever:
            type: SimpleRetriever
            record_selector:
              type: RecordSelector
              extractor:
                type: DpathExtractor
                field_path:
                - "data"
              record_filter:
                condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                  in parameters.serviceNames }}"
                type: RecordFilter
            paginator:
              type: DefaultPaginator
              page_size_option:
                inject_into: request_parameter
                field_name: "limit"
                type: RequestOption
              pagination_strategy:
                type: OffsetIncrement
                page_size: 100
              page_token_option:
                type: RequestOption
                inject_into: request_parameter
                field_name: "offset"
            requester:
              type: HttpRequester
              url_base: "https://api.railz.ai/"
              http_method: "GET"
              authenticator:
                class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                url: "https://auth.railz.ai/getAccess"
                client_id: "{{ config.client_id }}"
                secret_key: "{{ config.secret_key }}"
                lifetime: "PT3600S"
                type: CustomAuthenticator
              path: "/connections"
          name: "connections_slice"
        parent_key: "/"
        partition_field: "connection"
        type: ParentStreamConfig
  transformations:
  - type: AddFields
    fields:
    - path:
      - "businessName"
      value: "{{ stream_slice.connection.businessName }}"
      type: AddedFieldDefinition
    - path:
      - "serviceName"
      value: "{{ stream_slice.connection.serviceName }}"
      type: AddedFieldDefinition
  primary_key: "id"
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        id:
          type:
          - string
          - integer
        businessName:
          type: string
        serviceName:
          type: string
        nominalCode:
          type:
          - 'null'
          - string
        name:
          type:
          - 'null'
          - string
        description:
          type:
          - 'null'
          - string
        section:
          type:
          - 'null'
          - string
        subSection:
          type:
          - 'null'
          - string
        group:
          type:
          - 'null'
          - string
        subGroup:
          type:
          - 'null'
          - string
        classification:
          type:
          - 'null'
          - string
        fullyQualifiedName:
          type:
          - 'null'
          - string
        depth:
          type:
          - 'null'
          - integer
        currencyRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type:
              - 'null'
              - string
              - integer
            name:
              type:
              - 'null'
              - string
            symbol:
              type:
              - 'null'
              - string
        currentBalance:
          type:
          - 'null'
          - number
        type:
          type: string
        subType:
          type:
          - 'null'
          - string
        isBankAccount:
          type:
          - 'null'
          - boolean
        isSubAccount:
          type:
          - 'null'
          - boolean
        isActive:
          type: boolean
        subsidiaryRefs:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - string
                - integer
              name:
                type:
                - 'null'
                - string
        parentRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type:
              - 'null'
              - string
              - integer
            name:
              type:
              - 'null'
              - string
        sourceModifiedDate:
          type:
          - 'null'
          - string
          format: date-time
  name: "accounts"
- type: DeclarativeStream
  retriever:
    type: SimpleRetriever
    record_selector:
      type: RecordSelector
      extractor:
        type: DpathExtractor
        field_path:
        - "data"
    paginator:
      type: DefaultPaginator
      page_size_option:
        inject_into: request_parameter
        field_name: "limit"
        type: RequestOption
      pagination_strategy:
        type: OffsetIncrement
        page_size: 100
      page_token_option:
        type: RequestOption
        inject_into: request_parameter
        field_name: "offset"
    requester:
      type: HttpRequester
      url_base: "https://api.railz.ai/"
      http_method: "GET"
      authenticator:
        class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
        url: "https://auth.railz.ai/getAccess"
        client_id: "{{ config.client_id }}"
        secret_key: "{{ config.secret_key }}"
        lifetime: "PT3600S"
        type: CustomAuthenticator
      request_parameters:
        businessName: "{{ stream_slice.connection.businessName }}"
        serviceName: "{{ stream_slice.connection.serviceName }}"
      path: "/inventory"
    partition_router:
      type: SubstreamPartitionRouter
      parent_stream_configs:
      - stream:
          type: DeclarativeStream
          retriever:
            type: SimpleRetriever
            record_selector:
              type: RecordSelector
              extractor:
                type: DpathExtractor
                field_path:
                - "data"
              record_filter:
                condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                  in parameters.serviceNames }}"
                type: RecordFilter
            paginator:
              type: DefaultPaginator
              page_size_option:
                inject_into: request_parameter
                field_name: "limit"
                type: RequestOption
              pagination_strategy:
                type: OffsetIncrement
                page_size: 100
              page_token_option:
                type: RequestOption
                inject_into: request_parameter
                field_name: "offset"
            requester:
              type: HttpRequester
              url_base: "https://api.railz.ai/"
              http_method: "GET"
              authenticator:
                class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                url: "https://auth.railz.ai/getAccess"
                client_id: "{{ config.client_id }}"
                secret_key: "{{ config.secret_key }}"
                lifetime: "PT3600S"
                type: CustomAuthenticator
              path: "/connections"
          name: "connections_slice"
        parent_key: "/"
        partition_field: "connection"
        type: ParentStreamConfig
  transformations:
  - type: AddFields
    fields:
    - path:
      - "businessName"
      value: "{{ stream_slice.connection.businessName }}"
      type: AddedFieldDefinition
    - path:
      - "serviceName"
      value: "{{ stream_slice.connection.serviceName }}"
      type: AddedFieldDefinition
  primary_key: "id"
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        id:
          type:
          - string
          - integer
        businessName:
          type: string
        serviceName:
          type: string
        name:
          type: string
        code:
          type:
          - 'null'
          - string
        sourceModifiedDate:
          type:
          - 'null'
          - string
          format: date-time
        itemStatus:
          type:
          - 'null'
          - string
        isBillItem:
          type:
          - 'null'
          - boolean
        billItem:
          type:
          - 'null'
          - object
          properties:
            description:
              type:
              - 'null'
              - string
            unitPrice:
              type:
              - 'null'
              - number
            accountRef:
              type:
              - 'null'
              - object
              properties:
                id:
                  type: string
                name:
                  type:
                  - 'null'
                  - string
            taxRateRef:
              type:
              - 'null'
              - object
              properties:
                id:
                  type: string
                name:
                  type:
                  - 'null'
                  - string
                effectiveTaxRate:
                  type:
                  - 'null'
                  - number
        isInvoiceItem:
          type:
          - 'null'
          - boolean
        taxRateRef:
          type:
          - 'null'
          - object
          properties:
            description:
              type:
              - 'null'
              - string
            unitPrice:
              type:
              - 'null'
              - number
            accountRef:
              type:
              - 'null'
              - object
              properties:
                id:
                  type: string
                name:
                  type:
                  - 'null'
                  - string
            taxRateRef:
              type:
              - 'null'
              - object
              properties:
                id:
                  type: string
                name:
                  type:
                  - 'null'
                  - string
                effectiveTaxRate:
                  type:
                  - 'null'
                  - number
        subsidiaryRefs:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - 'null'
                - string
              name:
                type:
                - 'null'
                - string
        quantityOnHandPerLocation:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              locationRef:
                type: object
                properties:
                  id:
                    type: string
                  name:
                    type:
                    - 'null'
                    - string
              quantity:
                type: number
        quantityOnHand:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              locationRef:
                type: object
                properties:
                  id:
                    type: string
                  name:
                    type:
                    - 'null'
                    - string
              quantity:
                type: number
  name: "inventory"
- type: DeclarativeStream
  retriever:
    type: SimpleRetriever
    record_selector:
      type: RecordSelector
      extractor:
        type: DpathExtractor
        field_path:
        - "data"
    paginator:
      type: DefaultPaginator
      page_size_option:
        inject_into: request_parameter
        field_name: "limit"
        type: RequestOption
      pagination_strategy:
        type: OffsetIncrement
        page_size: 100
      page_token_option:
        type: RequestOption
        inject_into: request_parameter
        field_name: "offset"
    requester:
      type: HttpRequester
      url_base: "https://api.railz.ai/"
      http_method: "GET"
      authenticator:
        class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
        url: "https://auth.railz.ai/getAccess"
        client_id: "{{ config.client_id }}"
        secret_key: "{{ config.secret_key }}"
        lifetime: "PT3600S"
        type: CustomAuthenticator
      request_parameters:
        businessName: "{{ stream_slice.connection.businessName }}"
        serviceName: "{{ stream_slice.connection.serviceName }}"
      path: "/taxRates"
    partition_router:
      type: SubstreamPartitionRouter
      parent_stream_configs:
      - stream:
          type: DeclarativeStream
          retriever:
            type: SimpleRetriever
            record_selector:
              type: RecordSelector
              extractor:
                type: DpathExtractor
                field_path:
                - "data"
              record_filter:
                condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                  in parameters.serviceNames }}"
                type: RecordFilter
            paginator:
              type: DefaultPaginator
              page_size_option:
                inject_into: request_parameter
                field_name: "limit"
                type: RequestOption
              pagination_strategy:
                type: OffsetIncrement
                page_size: 100
              page_token_option:
                type: RequestOption
                inject_into: request_parameter
                field_name: "offset"
            requester:
              type: HttpRequester
              url_base: "https://api.railz.ai/"
              http_method: "GET"
              authenticator:
                class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                url: "https://auth.railz.ai/getAccess"
                client_id: "{{ config.client_id }}"
                secret_key: "{{ config.secret_key }}"
                lifetime: "PT3600S"
                type: CustomAuthenticator
              path: "/connections"
          name: "connections_slice"
        parent_key: "/"
        partition_field: "connection"
        type: ParentStreamConfig
  transformations:
  - type: AddFields
    fields:
    - path:
      - "businessName"
      value: "{{ stream_slice.connection.businessName }}"
      type: AddedFieldDefinition
    - path:
      - "serviceName"
      value: "{{ stream_slice.connection.serviceName }}"
      type: AddedFieldDefinition
  primary_key: "id"
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        id:
          type:
          - string
          - integer
        businessName:
          type: string
        serviceName:
          type: string
        name:
          type: string
        code:
          type:
          - 'null'
          - string
        effectiveTaxRate:
          type:
          - 'null'
          - number
        totalTaxRate:
          type:
          - 'null'
          - number
        components:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              name:
                type:
                - 'null'
                - string
              rate:
                type:
                - 'null'
                - number
              isCompound:
                type:
                - 'null'
                - boolean
              isPurchasesTax:
                type:
                - 'null'
                - boolean
              isSalesTax:
                type:
                - 'null'
                - boolean
        sourceModifiedDate:
          type:
          - 'null'
          - string
          format: date-time
  name: "tax_rates"
- type: DeclarativeStream
  retriever:
    type: SimpleRetriever
    record_selector:
      type: RecordSelector
      extractor:
        type: DpathExtractor
        field_path:
        - "data"
    paginator:
      type: DefaultPaginator
      page_size_option:
        inject_into: request_parameter
        field_name: "limit"
        type: RequestOption
      pagination_strategy:
        type: OffsetIncrement
        page_size: 100
      page_token_option:
        type: RequestOption
        inject_into: request_parameter
        field_name: "offset"
    requester:
      type: HttpRequester
      url_base: "https://api.railz.ai/"
      http_method: "GET"
      authenticator:
        class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
        url: "https://auth.railz.ai/getAccess"
        client_id: "{{ config.client_id }}"
        secret_key: "{{ config.secret_key }}"
        lifetime: "PT3600S"
        type: CustomAuthenticator
      request_parameters:
        businessName: "{{ stream_slice.connection.businessName }}"
        serviceName: "{{ stream_slice.connection.serviceName }}"
      path: "/trackingCategories"
    partition_router:
      type: SubstreamPartitionRouter
      parent_stream_configs:
      - stream:
          type: DeclarativeStream
          retriever:
            type: SimpleRetriever
            record_selector:
              type: RecordSelector
              extractor:
                type: DpathExtractor
                field_path:
                - "data"
              record_filter:
                condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                  in parameters.serviceNames }}"
                type: RecordFilter
            paginator:
              type: DefaultPaginator
              page_size_option:
                inject_into: request_parameter
                field_name: "limit"
                type: RequestOption
              pagination_strategy:
                type: OffsetIncrement
                page_size: 100
              page_token_option:
                type: RequestOption
                inject_into: request_parameter
                field_name: "offset"
            requester:
              type: HttpRequester
              url_base: "https://api.railz.ai/"
              http_method: "GET"
              authenticator:
                class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                url: "https://auth.railz.ai/getAccess"
                client_id: "{{ config.client_id }}"
                secret_key: "{{ config.secret_key }}"
                lifetime: "PT3600S"
                type: CustomAuthenticator
              path: "/connections"
          name: "connections_slice"
        parent_key: "/"
        partition_field: "connection"
        type: ParentStreamConfig
  transformations:
  - type: AddFields
    fields:
    - path:
      - "businessName"
      value: "{{ stream_slice.connection.businessName }}"
      type: AddedFieldDefinition
    - path:
      - "serviceName"
      value: "{{ stream_slice.connection.serviceName }}"
      type: AddedFieldDefinition
  primary_key: "id"
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        id:
          type:
          - string
          - integer
        businessName:
          type: string
        serviceName:
          type: string
        name:
          type: string
        isEditable:
          type: boolean
        parentRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type: string
            name:
              type:
              - 'null'
              - string
        status:
          type: string
        sourceModifiedDate:
          type:
          - 'null'
          - string
          format: date-time
  name: "tracking_categories"
- type: DeclarativeStream
  retriever:
    type: SimpleRetriever
    record_selector:
      type: RecordSelector
      extractor:
        type: DpathExtractor
        field_path:
        - "data"
    paginator:
      type: DefaultPaginator
      page_size_option:
        inject_into: request_parameter
        field_name: "limit"
        type: RequestOption
      pagination_strategy:
        type: OffsetIncrement
        page_size: 100
      page_token_option:
        type: RequestOption
        inject_into: request_parameter
        field_name: "offset"
    requester:
      type: HttpRequester
      url_base: "https://api.railz.ai/"
      http_method: "GET"
      authenticator:
        class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
        url: "https://auth.railz.ai/getAccess"
        client_id: "{{ config.client_id }}"
        secret_key: "{{ config.secret_key }}"
        lifetime: "PT3600S"
        type: CustomAuthenticator
      request_parameters:
        businessName: "{{ stream_slice.connection.businessName }}"
        serviceName: "{{ stream_slice.connection.serviceName }}"
      path: "/vendors"
    partition_router:
      type: SubstreamPartitionRouter
      parent_stream_configs:
      - stream:
          type: DeclarativeStream
          retriever:
            type: SimpleRetriever
            record_selector:
              type: RecordSelector
              extractor:
                type: DpathExtractor
                field_path:
                - "data"
              record_filter:
                condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                  in parameters.serviceNames }}"
                type: RecordFilter
            paginator:
              type: DefaultPaginator
              page_size_option:
                inject_into: request_parameter
                field_name: "limit"
                type: RequestOption
              pagination_strategy:
                type: OffsetIncrement
                page_size: 100
              page_token_option:
                type: RequestOption
                inject_into: request_parameter
                field_name: "offset"
            requester:
              type: HttpRequester
              url_base: "https://api.railz.ai/"
              http_method: "GET"
              authenticator:
                class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                url: "https://auth.railz.ai/getAccess"
                client_id: "{{ config.client_id }}"
                secret_key: "{{ config.secret_key }}"
                lifetime: "PT3600S"
                type: CustomAuthenticator
              path: "/connections"
          name: "connections_slice"
        parent_key: "/"
        partition_field: "connection"
        type: ParentStreamConfig
  transformations:
  - type: AddFields
    fields:
    - path:
      - "businessName"
      value: "{{ stream_slice.connection.businessName }}"
      type: AddedFieldDefinition
    - path:
      - "serviceName"
      value: "{{ stream_slice.connection.serviceName }}"
      type: AddedFieldDefinition
  primary_key: "id"
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        id:
          type:
          - string
          - integer
        businessName:
          type: string
        serviceName:
          type: string
        vendorName:
          type: string
        contactName:
          type:
          - 'null'
          - string
        emailAddress:
          type:
          - 'null'
          - string
        website:
          type:
          - 'null'
          - string
        defaultCurrency:
          type:
          - 'null'
          - object
          properties:
            id:
              type: string
            name:
              type:
              - 'null'
              - string
            symbol:
              type:
              - 'null'
              - string
        phone:
          type:
          - 'null'
          - string
        addresses:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              line1:
                type:
                - 'null'
                - string
              line2:
                type:
                - 'null'
                - string
              city:
                type:
                - 'null'
                - string
              region:
                type:
                - 'null'
                - string
              country:
                type:
                - 'null'
                - string
              postalCode:
                type:
                - 'null'
                - string
              type:
                type: string
        contacts:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              name:
                type:
                - 'null'
                - string
              email:
                type:
                - 'null'
                - string
              phone:
                type:
                - 'null'
                - string
              addresses:
                type:
                - 'null'
                - object
                properties:
                  line1:
                    type:
                    - 'null'
                    - string
                  line2:
                    type:
                    - 'null'
                    - string
                  city:
                    type:
                    - 'null'
                    - string
                  region:
                    type:
                    - 'null'
                    - string
                  country:
                    type:
                    - 'null'
                    - string
                  postalCode:
                    type:
                    - 'null'
                    - string
                  type:
                    type: string
              status:
                type: string
              modifiedDate:
                type:
                - 'null'
                - string
                format: date-time
        taxNumber:
          type:
          - 'null'
          - string
        balance:
          type:
          - 'null'
          - number
        status:
          type: string
        subsidiaryRefs:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              id:
                type: string
              name:
                type:
                - 'null'
                - string
        sourceModifiedDate:
          type:
          - 'null'
          - string
          format: date-time
  name: "vendors"
- type: DeclarativeStream
  retriever:
    type: SimpleRetriever
    record_selector:
      type: RecordSelector
      extractor:
        type: DpathExtractor
        field_path:
        - "data"
    paginator:
      type: DefaultPaginator
      page_size_option:
        inject_into: request_parameter
        field_name: "limit"
        type: RequestOption
      pagination_strategy:
        type: OffsetIncrement
        page_size: 100
      page_token_option:
        type: RequestOption
        inject_into: request_parameter
        field_name: "offset"
    requester:
      type: HttpRequester
      url_base: "https://api.railz.ai/"
      http_method: "GET"
      authenticator:
        class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
        url: "https://auth.railz.ai/getAccess"
        client_id: "{{ config.client_id }}"
        secret_key: "{{ config.secret_key }}"
        lifetime: "PT3600S"
        type: CustomAuthenticator
      request_parameters:
        businessName: "{{ stream_slice.connection.businessName }}"
        serviceName: "{{ stream_slice.connection.serviceName }}"
      path: "/bankAccounts"
    partition_router:
      type: SubstreamPartitionRouter
      parent_stream_configs:
      - stream:
          type: DeclarativeStream
          retriever:
            type: SimpleRetriever
            record_selector:
              type: RecordSelector
              extractor:
                type: DpathExtractor
                field_path:
                - "data"
              record_filter:
                condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                  in parameters.serviceNames }}"
                type: RecordFilter
            paginator:
              type: DefaultPaginator
              page_size_option:
                inject_into: request_parameter
                field_name: "limit"
                type: RequestOption
              pagination_strategy:
                type: OffsetIncrement
                page_size: 100
              page_token_option:
                type: RequestOption
                inject_into: request_parameter
                field_name: "offset"
            requester:
              type: HttpRequester
              url_base: "https://api.railz.ai/"
              http_method: "GET"
              authenticator:
                class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                url: "https://auth.railz.ai/getAccess"
                client_id: "{{ config.client_id }}"
                secret_key: "{{ config.secret_key }}"
                lifetime: "PT3600S"
                type: CustomAuthenticator
              path: "/connections"
          name: "connections_slice"
        parent_key: "/"
        partition_field: "connection"
        type: ParentStreamConfig
  transformations:
  - type: AddFields
    fields:
    - path:
      - "businessName"
      value: "{{ stream_slice.connection.businessName }}"
      type: AddedFieldDefinition
    - path:
      - "serviceName"
      value: "{{ stream_slice.connection.serviceName }}"
      type: AddedFieldDefinition
  primary_key: "accountId"
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        businessName:
          type: string
        serviceName:
          type: string
        institutionName:
          type: string
        accountId:
          type:
          - string
          - integer
        currentBalance:
          type:
          - 'null'
          - number
        availableBalance:
          type:
          - 'null'
          - number
        limit:
          type:
          - 'null'
          - number
        currency:
          type: string
        maskedAccountNumber:
          type:
          - 'null'
          - string
        accountName:
          type: string
        officialAccountName:
          type:
          - 'null'
          - string
        accountType:
          type: string
        accountSubType:
          type:
          - 'null'
          - string
        sourceModifiedDate:
          type:
          - 'null'
          - string
          format: date-time
  name: "bank_accounts"
- type: DeclarativeStream
  retriever:
    type: SimpleRetriever
    record_selector:
      type: RecordSelector
      extractor:
        type: DpathExtractor
        field_path:
        - "data"
      record_filter:
        condition: "{{ not stream_state.get(stream_slice.connection.businessName,
          {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
          >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
          }}"
        type: RecordFilter
    paginator:
      type: DefaultPaginator
      page_size_option:
        inject_into: request_parameter
        field_name: "limit"
        type: RequestOption
      pagination_strategy:
        type: OffsetIncrement
        page_size: 100
      page_token_option:
        type: RequestOption
        inject_into: request_parameter
        field_name: "offset"
    requester:
      type: HttpRequester
      url_base: "https://api.railz.ai/"
      http_method: "GET"
      authenticator:
        class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
        url: "https://auth.railz.ai/getAccess"
        client_id: "{{ config.client_id }}"
        secret_key: "{{ config.secret_key }}"
        lifetime: "PT3600S"
        type: CustomAuthenticator
      request_parameters:
        businessName: "{{ stream_slice.connection.businessName }}"
        serviceName: "{{ stream_slice.connection.serviceName }}"
        startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
        endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
        orderBy: "{{ parameters.cursor_field }}"
      path: "/accountingTransactions"
  transformations:
  - type: AddFields
    fields:
    - path:
      - "businessName"
      value: "{{ stream_slice.connection.businessName }}"
      type: AddedFieldDefinition
    - path:
      - "serviceName"
      value: "{{ stream_slice.connection.serviceName }}"
      type: AddedFieldDefinition
  incremental_sync:
    type: CustomIncrementalSync
    class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
    stream_slicers:
    - type: SubstreamPartitionRouter
      parent_stream_configs:
      - stream:
          type: DeclarativeStream
          retriever:
            type: SimpleRetriever
            record_selector:
              type: RecordSelector
              extractor:
                type: DpathExtractor
                field_path:
                - "data"
              record_filter:
                condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                  in parameters.serviceNames }}"
                type: RecordFilter
            paginator:
              type: DefaultPaginator
              page_size_option:
                inject_into: request_parameter
                field_name: "limit"
                type: RequestOption
              pagination_strategy:
                type: OffsetIncrement
                page_size: 100
              page_token_option:
                type: RequestOption
                inject_into: request_parameter
                field_name: "offset"
            requester:
              type: HttpRequester
              url_base: "https://api.railz.ai/"
              http_method: "GET"
              authenticator:
                class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                url: "https://auth.railz.ai/getAccess"
                client_id: "{{ config.client_id }}"
                secret_key: "{{ config.secret_key }}"
                lifetime: "PT3600S"
                type: CustomAuthenticator
              path: "/connections"
          name: "connections_slice"
        parent_key: "/"
        partition_field: "connection"
        type: ParentStreamConfig
    - type: DatetimeBasedCursor
      start_datetime:
        datetime: "{{ config['start_date'] }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      end_datetime:
        datetime: "{{ today_utc() }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      step: "P1M"
      datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
      cursor_granularity: "P1D"
      cursor_field: "postedDate"
    cursor_field: "postedDate"
  primary_key: "id"
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        id:
          type:
          - string
          - integer
        businessName:
          type: string
        serviceName:
          type: string
        transactionNumber:
          type:
          - 'null'
          - string
        postedDate:
          type: string
          format: date-time
        entityRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type:
              - 'null'
              - string
              - integer
            name:
              type:
              - 'null'
              - string
        type:
          type: string
        isPosting:
          type: boolean
        isReconciled:
          type:
          - 'null'
          - boolean
        accountRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type:
              - string
              - integer
            name:
              type: string
            section:
              type:
              - 'null'
              - string
            subSection:
              type:
              - 'null'
              - string
            group:
              type:
              - 'null'
              - string
            subGroup:
              type:
              - 'null'
              - string
        currencyRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type:
              - 'null'
              - string
              - integer
            name:
              type:
              - 'null'
              - string
            symbol:
              type:
              - 'null'
              - string
        currencyRate:
          type:
          - 'null'
          - number
        isSplitTransaction:
          type:
          - 'null'
          - boolean
        parentTransactionId:
          type:
          - 'null'
          - string
        subTotal:
          type:
          - 'null'
          - number
        taxAmount:
          type:
          - 'null'
          - number
        totalAmount:
          type:
          - number
          - string
  name: "accounting_transactions"
- type: DeclarativeStream
  retriever:
    type: SimpleRetriever
    record_selector:
      type: RecordSelector
      extractor:
        type: DpathExtractor
        field_path:
        - "data"
      record_filter:
        condition: "{{ not stream_state.get(stream_slice.connection.businessName,
          {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
          >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
          }}"
        type: RecordFilter
    paginator:
      type: DefaultPaginator
      page_size_option:
        inject_into: request_parameter
        field_name: "limit"
        type: RequestOption
      pagination_strategy:
        type: OffsetIncrement
        page_size: 100
      page_token_option:
        type: RequestOption
        inject_into: request_parameter
        field_name: "offset"
    requester:
      type: HttpRequester
      url_base: "https://api.railz.ai/"
      http_method: "GET"
      authenticator:
        class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
        url: "https://auth.railz.ai/getAccess"
        client_id: "{{ config.client_id }}"
        secret_key: "{{ config.secret_key }}"
        lifetime: "PT3600S"
        type: CustomAuthenticator
      request_parameters:
        businessName: "{{ stream_slice.connection.businessName }}"
        serviceName: "{{ stream_slice.connection.serviceName }}"
        startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
        endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
        orderBy: "{{ parameters.cursor_field }}"
      path: "/bankTransfers"
  transformations:
  - type: AddFields
    fields:
    - path:
      - "businessName"
      value: "{{ stream_slice.connection.businessName }}"
      type: AddedFieldDefinition
    - path:
      - "serviceName"
      value: "{{ stream_slice.connection.serviceName }}"
      type: AddedFieldDefinition
  incremental_sync:
    type: CustomIncrementalSync
    class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
    stream_slicers:
    - type: SubstreamPartitionRouter
      parent_stream_configs:
      - stream:
          type: DeclarativeStream
          retriever:
            type: SimpleRetriever
            record_selector:
              type: RecordSelector
              extractor:
                type: DpathExtractor
                field_path:
                - "data"
              record_filter:
                condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                  in parameters.serviceNames }}"
                type: RecordFilter
            paginator:
              type: DefaultPaginator
              page_size_option:
                inject_into: request_parameter
                field_name: "limit"
                type: RequestOption
              pagination_strategy:
                type: OffsetIncrement
                page_size: 100
              page_token_option:
                type: RequestOption
                inject_into: request_parameter
                field_name: "offset"
            requester:
              type: HttpRequester
              url_base: "https://api.railz.ai/"
              http_method: "GET"
              authenticator:
                class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                url: "https://auth.railz.ai/getAccess"
                client_id: "{{ config.client_id }}"
                secret_key: "{{ config.secret_key }}"
                lifetime: "PT3600S"
                type: CustomAuthenticator
              path: "/connections"
          name: "connections_slice"
        parent_key: "/"
        partition_field: "connection"
        type: ParentStreamConfig
    - type: DatetimeBasedCursor
      start_datetime:
        datetime: "{{ config['start_date'] }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      end_datetime:
        datetime: "{{ today_utc() }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      step: "P1M"
      datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
      cursor_granularity: "P1D"
      cursor_field: "date"
    cursor_field: "date"
  primary_key: "id"
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        id:
          type:
          - string
          - integer
        businessName:
          type: string
        serviceName:
          type: string
        date:
          type: string
          format: date-time
        currencyRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type:
              - string
              - integer
            name:
              type:
              - 'null'
              - string
            symbol:
              type:
              - 'null'
              - string
        currencyRate:
          type: number
        totalAmount:
          type:
          - 'null'
          - number
          - string
        fromAccountRef:
          type: object
          properties:
            id:
              type:
              - string
              - integer
            name:
              type:
              - 'null'
              - string
        toAccountRef:
          type: object
          properties:
            id:
              type:
              - string
              - integer
            name:
              type:
              - 'null'
              - string
        fromBankTransactionId:
          type: string
        toBankTransactionId:
          type: string
        memo:
          type:
          - 'null'
          - string
        sourceModifiedDate:
          type:
          - 'null'
          - string
          format: date-time
  name: "bank_transfers"
- type: DeclarativeStream
  retriever:
    type: SimpleRetriever
    record_selector:
      type: RecordSelector
      extractor:
        type: DpathExtractor
        field_path:
        - "data"
      record_filter:
        condition: "{{ not stream_state.get(stream_slice.connection.businessName,
          {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
          >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
          }}"
        type: RecordFilter
    paginator:
      type: DefaultPaginator
      page_size_option:
        inject_into: request_parameter
        field_name: "limit"
        type: RequestOption
      pagination_strategy:
        type: OffsetIncrement
        page_size: 100
      page_token_option:
        type: RequestOption
        inject_into: request_parameter
        field_name: "offset"
    requester:
      type: HttpRequester
      url_base: "https://api.railz.ai/"
      http_method: "GET"
      authenticator:
        class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
        url: "https://auth.railz.ai/getAccess"
        client_id: "{{ config.client_id }}"
        secret_key: "{{ config.secret_key }}"
        lifetime: "PT3600S"
        type: CustomAuthenticator
      request_parameters:
        businessName: "{{ stream_slice.connection.businessName }}"
        serviceName: "{{ stream_slice.connection.serviceName }}"
        startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
        endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
        orderBy: "{{ parameters.cursor_field }}"
      path: "/bills"
  transformations:
  - type: AddFields
    fields:
    - path:
      - "businessName"
      value: "{{ stream_slice.connection.businessName }}"
      type: AddedFieldDefinition
    - path:
      - "serviceName"
      value: "{{ stream_slice.connection.serviceName }}"
      type: AddedFieldDefinition
  incremental_sync:
    type: CustomIncrementalSync
    class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
    stream_slicers:
    - type: SubstreamPartitionRouter
      parent_stream_configs:
      - stream:
          type: DeclarativeStream
          retriever:
            type: SimpleRetriever
            record_selector:
              type: RecordSelector
              extractor:
                type: DpathExtractor
                field_path:
                - "data"
              record_filter:
                condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                  in parameters.serviceNames }}"
                type: RecordFilter
            paginator:
              type: DefaultPaginator
              page_size_option:
                inject_into: request_parameter
                field_name: "limit"
                type: RequestOption
              pagination_strategy:
                type: OffsetIncrement
                page_size: 100
              page_token_option:
                type: RequestOption
                inject_into: request_parameter
                field_name: "offset"
            requester:
              type: HttpRequester
              url_base: "https://api.railz.ai/"
              http_method: "GET"
              authenticator:
                class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                url: "https://auth.railz.ai/getAccess"
                client_id: "{{ config.client_id }}"
                secret_key: "{{ config.secret_key }}"
                lifetime: "PT3600S"
                type: CustomAuthenticator
              path: "/connections"
          name: "connections_slice"
        parent_key: "/"
        partition_field: "connection"
        type: ParentStreamConfig
    - type: DatetimeBasedCursor
      start_datetime:
        datetime: "{{ config['start_date'] }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      end_datetime:
        datetime: "{{ today_utc() }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      step: "P1M"
      datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
      cursor_granularity: "P1D"
      cursor_field: "postedDate"
    cursor_field: "postedDate"
  primary_key: "id"
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        id:
          type:
          - string
          - integer
        businessName:
          type: string
        serviceName:
          type: string
        vendorRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type:
              - string
              - integer
            name:
              type:
              - 'null'
              - string
        purchaseOrderRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type:
              - 'null'
              - string
              - integer
            purchaseOrderNumber:
              type:
              - 'null'
              - string
        purchaseOrderRefs:
          type: array
          items:
            type: object
            properties:
              id:
                type:
                - 'null'
                - string
                - integer
              purchaseOrderNumber:
                type:
                - 'null'
                - string
        postedDate:
          type: string
          format: date-time
        dueDate:
          type:
          - 'null'
          - string
          format: date-time
        currencyRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type:
              - string
              - integer
            name:
              type:
              - 'null'
              - string
            symbol:
              type:
              - 'null'
              - string
        currencyRate:
          type:
          - 'null'
          - number
        vendorInvoiceNumber:
          type:
          - 'null'
          - string
        lines:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              description:
                type:
                - 'null'
                - string
              unitAmount:
                type:
                - 'null'
                - number
              quantity:
                type:
                - 'null'
                - integer
              discountAmount:
                type:
                - 'null'
                - number
              subTotal:
                type:
                - 'null'
                - number
              taxAmount:
                type:
                - 'null'
                - number
              totalAmount:
                type:
                - number
                - string
              discountPercentage:
                type:
                - 'null'
                - number
                - string
              taxRateRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type:
                    - string
                    - integer
                  name:
                    type:
                    - 'null'
                    - string
                  effectiveTaxRate:
                    type:
                    - 'null'
                    - number
              inventoryRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type:
                    - string
                    - integer
                  name:
                    type:
                    - 'null'
                    - string
              trackingCategoryRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type:
                    - string
                    - integer
                  name:
                    type:
                    - 'null'
                    - string
                  option:
                    type:
                    - 'null'
                    - string
                  optionId:
                    type:
                    - 'null'
                    - string
              id:
                type:
                - string
                - integer
              accountRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type:
                    - string
                    - integer
                  name:
                    type:
                    - 'null'
                    - string
        status:
          type: string
        subTotal:
          type:
          - 'null'
          - number
        taxAmount:
          type:
          - 'null'
          - number
        totalAmount:
          type:
          - number
          - string
        amountDue:
          type:
          - 'null'
          - number
        memo:
          type:
          - 'null'
          - string
        payments:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              amount:
                type:
                - 'null'
                - number
              paymentId:
                type:
                - 'null'
                - string
              date:
                type:
                - 'null'
                - string
                format: date-time
        subsidiaryRefs:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - string
                - integer
              name:
                type:
                - 'null'
                - string
        locationRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type:
              - 'null'
              - string
              - integer
            name:
              type:
              - 'null'
              - string
        sourceModifiedDate:
          type:
          - 'null'
          - string
          format: date-time
  name: "bills"
- type: DeclarativeStream
  retriever:
    type: SimpleRetriever
    record_selector:
      type: RecordSelector
      extractor:
        type: DpathExtractor
        field_path:
        - "data"
      record_filter:
        condition: "{{ not stream_state.get(stream_slice.connection.businessName,
          {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
          >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
          }}"
        type: RecordFilter
    paginator:
      type: DefaultPaginator
      page_size_option:
        inject_into: request_parameter
        field_name: "limit"
        type: RequestOption
      pagination_strategy:
        type: OffsetIncrement
        page_size: 100
      page_token_option:
        type: RequestOption
        inject_into: request_parameter
        field_name: "offset"
    requester:
      type: HttpRequester
      url_base: "https://api.railz.ai/"
      http_method: "GET"
      authenticator:
        class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
        url: "https://auth.railz.ai/getAccess"
        client_id: "{{ config.client_id }}"
        secret_key: "{{ config.secret_key }}"
        lifetime: "PT3600S"
        type: CustomAuthenticator
      request_parameters:
        businessName: "{{ stream_slice.connection.businessName }}"
        serviceName: "{{ stream_slice.connection.serviceName }}"
        startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
        endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
        orderBy: "{{ parameters.cursor_field }}"
      path: "/bills/creditNotes"
  transformations:
  - type: AddFields
    fields:
    - path:
      - "businessName"
      value: "{{ stream_slice.connection.businessName }}"
      type: AddedFieldDefinition
    - path:
      - "serviceName"
      value: "{{ stream_slice.connection.serviceName }}"
      type: AddedFieldDefinition
  incremental_sync:
    type: CustomIncrementalSync
    class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
    stream_slicers:
    - type: SubstreamPartitionRouter
      parent_stream_configs:
      - stream:
          type: DeclarativeStream
          retriever:
            type: SimpleRetriever
            record_selector:
              type: RecordSelector
              extractor:
                type: DpathExtractor
                field_path:
                - "data"
              record_filter:
                condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                  in parameters.serviceNames }}"
                type: RecordFilter
            paginator:
              type: DefaultPaginator
              page_size_option:
                inject_into: request_parameter
                field_name: "limit"
                type: RequestOption
              pagination_strategy:
                type: OffsetIncrement
                page_size: 100
              page_token_option:
                type: RequestOption
                inject_into: request_parameter
                field_name: "offset"
            requester:
              type: HttpRequester
              url_base: "https://api.railz.ai/"
              http_method: "GET"
              authenticator:
                class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                url: "https://auth.railz.ai/getAccess"
                client_id: "{{ config.client_id }}"
                secret_key: "{{ config.secret_key }}"
                lifetime: "PT3600S"
                type: CustomAuthenticator
              path: "/connections"
          name: "connections_slice"
        parent_key: "/"
        partition_field: "connection"
        type: ParentStreamConfig
    - type: DatetimeBasedCursor
      start_datetime:
        datetime: "{{ config['start_date'] }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      end_datetime:
        datetime: "{{ today_utc() }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      step: "P1M"
      datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
      cursor_granularity: "P1D"
      cursor_field: "postedDate"
    cursor_field: "postedDate"
  primary_key: "id"
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        id:
          type:
          - string
          - integer
        businessName:
          type: string
        serviceName:
          type: string
        postedDate:
          type: string
          format: date-time
        allocatedOnDate:
          type:
          - 'null'
          - string
          format: date-time
        currencyRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type:
              - string
              - integer
            name:
              type:
              - 'null'
              - string
            symbol:
              type:
              - 'null'
              - string
        currencyRate:
          type:
          - 'null'
          - number
        lines:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              description:
                type:
                - 'null'
                - string
              unitAmount:
                type:
                - 'null'
                - number
              quantity:
                type:
                - 'null'
                - integer
              discountAmount:
                type:
                - 'null'
                - number
              subTotal:
                type:
                - 'null'
                - number
              taxAmount:
                type:
                - 'null'
                - number
              totalAmount:
                type:
                - number
                - string
              discountPercentage:
                type:
                - 'null'
                - number
                - string
              taxRateRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type:
                    - string
                    - integer
                  name:
                    type:
                    - 'null'
                    - string
                  effectiveTaxRate:
                    type:
                    - 'null'
                    - number
              inventoryRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type:
                    - string
                    - integer
                  name:
                    type:
                    - 'null'
                    - string
              trackingCategoryRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type:
                    - string
                    - integer
                  name:
                    type:
                    - 'null'
                    - string
                  option:
                    type:
                    - 'null'
                    - string
                  optionId:
                    type:
                    - 'null'
                    - string
              id:
                type:
                - string
                - integer
              accountRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type:
                    - string
                    - integer
                  name:
                    type:
                    - 'null'
                    - string
        totalDiscount:
          type:
          - 'null'
          - number
        discountPercentage:
          type:
          - 'null'
          - number
        subTotal:
          type:
          - 'null'
          - number
        taxAmount:
          type:
          - 'null'
          - number
        totalAmount:
          type:
          - number
          - string
        remainingCredit:
          type:
          - 'null'
          - number
        status:
          type: string
        memo:
          type: string
        payments:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              amount:
                type:
                - 'null'
                - number
              paymentId:
                type:
                - 'null'
                - string
              date:
                type:
                - 'null'
                - string
                format: date-time
        sourceModifiedDate:
          type:
          - 'null'
          - string
          format: date-time
        locationRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type:
              - 'null'
              - string
              - integer
            name:
              type:
              - 'null'
              - string
        vendorRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type:
              - string
              - integer
            name:
              type:
              - 'null'
              - string
  name: "bills_credit_notes"
- type: DeclarativeStream
  retriever:
    type: SimpleRetriever
    record_selector:
      type: RecordSelector
      extractor:
        type: DpathExtractor
        field_path:
        - "data"
      record_filter:
        condition: "{{ not stream_state.get(stream_slice.connection.businessName,
          {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
          >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
          }}"
        type: RecordFilter
    paginator:
      type: DefaultPaginator
      page_size_option:
        inject_into: request_parameter
        field_name: "limit"
        type: RequestOption
      pagination_strategy:
        type: OffsetIncrement
        page_size: 100
      page_token_option:
        type: RequestOption
        inject_into: request_parameter
        field_name: "offset"
    requester:
      type: HttpRequester
      url_base: "https://api.railz.ai/"
      http_method: "GET"
      authenticator:
        class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
        url: "https://auth.railz.ai/getAccess"
        client_id: "{{ config.client_id }}"
        secret_key: "{{ config.secret_key }}"
        lifetime: "PT3600S"
        type: CustomAuthenticator
      request_parameters:
        businessName: "{{ stream_slice.connection.businessName }}"
        serviceName: "{{ stream_slice.connection.serviceName }}"
        startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
        endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
        orderBy: "{{ parameters.cursor_field }}"
      path: "/bills/payments"
  transformations:
  - type: AddFields
    fields:
    - path:
      - "businessName"
      value: "{{ stream_slice.connection.businessName }}"
      type: AddedFieldDefinition
    - path:
      - "serviceName"
      value: "{{ stream_slice.connection.serviceName }}"
      type: AddedFieldDefinition
  incremental_sync:
    type: CustomIncrementalSync
    class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
    stream_slicers:
    - type: SubstreamPartitionRouter
      parent_stream_configs:
      - stream:
          type: DeclarativeStream
          retriever:
            type: SimpleRetriever
            record_selector:
              type: RecordSelector
              extractor:
                type: DpathExtractor
                field_path:
                - "data"
              record_filter:
                condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                  in parameters.serviceNames }}"
                type: RecordFilter
            paginator:
              type: DefaultPaginator
              page_size_option:
                inject_into: request_parameter
                field_name: "limit"
                type: RequestOption
              pagination_strategy:
                type: OffsetIncrement
                page_size: 100
              page_token_option:
                type: RequestOption
                inject_into: request_parameter
                field_name: "offset"
            requester:
              type: HttpRequester
              url_base: "https://api.railz.ai/"
              http_method: "GET"
              authenticator:
                class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                url: "https://auth.railz.ai/getAccess"
                client_id: "{{ config.client_id }}"
                secret_key: "{{ config.secret_key }}"
                lifetime: "PT3600S"
                type: CustomAuthenticator
              path: "/connections"
          name: "connections_slice"
        parent_key: "/"
        partition_field: "connection"
        type: ParentStreamConfig
    - type: DatetimeBasedCursor
      start_datetime:
        datetime: "{{ config['start_date'] }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      end_datetime:
        datetime: "{{ today_utc() }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      step: "P1M"
      datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
      cursor_granularity: "P1D"
      cursor_field: "date"
    cursor_field: "date"
  primary_key: "id"
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        id:
          type:
          - string
          - integer
        businessName:
          type: string
        serviceName:
          type: string
        vendorRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type:
              - string
              - integer
            name:
              type:
              - 'null'
              - string
        accountRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type:
              - string
              - integer
            name:
              type:
              - 'null'
              - string
        totalAmount:
          type:
          - number
          - string
        currencyRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type:
              - string
              - integer
            name:
              type:
              - 'null'
              - string
            symbol:
              type:
              - 'null'
              - string
        currencyRate:
          type:
          - 'null'
          - number
        date:
          type: string
          format: date-time
        memo:
          type:
          - 'null'
          - string
        lines:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              amount:
                type: number
              link:
                type:
                - 'null'
                - object
                properties:
                  type:
                    type: string
                  id:
                    type:
                    - 'null'
                    - string
                    - integer
                  amount:
                    type:
                    - 'null'
                    - number
              links:
                type:
                - 'null'
                - array
                items:
                  type:
                  - 'null'
                  - object
                  properties:
                    type:
                      type: string
                    id:
                      type:
                      - string
                      - integer
              allocatedOnDate:
                type:
                - 'null'
                - string
                format: date-time
        subsidiaryRefs:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - string
                - integer
              name:
                type:
                - 'null'
                - string
        sourceModifiedDate:
          type:
          - 'null'
          - string
          format: date-time
  name: "bills_payments"
- type: DeclarativeStream
  retriever:
    type: SimpleRetriever
    record_selector:
      type: RecordSelector
      extractor:
        type: DpathExtractor
        field_path:
        - "data"
      record_filter:
        condition: "{{ not stream_state.get(stream_slice.connection.businessName,
          {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
          >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
          }}"
        type: RecordFilter
    paginator:
      type: DefaultPaginator
      page_size_option:
        inject_into: request_parameter
        field_name: "limit"
        type: RequestOption
      pagination_strategy:
        type: OffsetIncrement
        page_size: 100
      page_token_option:
        type: RequestOption
        inject_into: request_parameter
        field_name: "offset"
    requester:
      type: HttpRequester
      url_base: "https://api.railz.ai/"
      http_method: "GET"
      authenticator:
        class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
        url: "https://auth.railz.ai/getAccess"
        client_id: "{{ config.client_id }}"
        secret_key: "{{ config.secret_key }}"
        lifetime: "PT3600S"
        type: CustomAuthenticator
      request_parameters:
        businessName: "{{ stream_slice.connection.businessName }}"
        serviceName: "{{ stream_slice.connection.serviceName }}"
        startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
        endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
        orderBy: "{{ parameters.cursor_field }}"
      path: "/deposits"
  transformations:
  - type: AddFields
    fields:
    - path:
      - "businessName"
      value: "{{ stream_slice.connection.businessName }}"
      type: AddedFieldDefinition
    - path:
      - "serviceName"
      value: "{{ stream_slice.connection.serviceName }}"
      type: AddedFieldDefinition
  incremental_sync:
    type: CustomIncrementalSync
    class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
    stream_slicers:
    - type: SubstreamPartitionRouter
      parent_stream_configs:
      - stream:
          type: DeclarativeStream
          retriever:
            type: SimpleRetriever
            record_selector:
              type: RecordSelector
              extractor:
                type: DpathExtractor
                field_path:
                - "data"
              record_filter:
                condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                  in parameters.serviceNames }}"
                type: RecordFilter
            paginator:
              type: DefaultPaginator
              page_size_option:
                inject_into: request_parameter
                field_name: "limit"
                type: RequestOption
              pagination_strategy:
                type: OffsetIncrement
                page_size: 100
              page_token_option:
                type: RequestOption
                inject_into: request_parameter
                field_name: "offset"
            requester:
              type: HttpRequester
              url_base: "https://api.railz.ai/"
              http_method: "GET"
              authenticator:
                class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                url: "https://auth.railz.ai/getAccess"
                client_id: "{{ config.client_id }}"
                secret_key: "{{ config.secret_key }}"
                lifetime: "PT3600S"
                type: CustomAuthenticator
              path: "/connections"
          name: "connections_slice"
        parent_key: "/"
        partition_field: "connection"
        type: ParentStreamConfig
    - type: DatetimeBasedCursor
      start_datetime:
        datetime: "{{ config['start_date'] }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      end_datetime:
        datetime: "{{ today_utc() }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      step: "P1M"
      datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
      cursor_granularity: "P1D"
      cursor_field: "postedDate"
    cursor_field: "postedDate"
  primary_key: "id"
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        id:
          type:
          - string
          - integer
        businessName:
          type: string
        serviceName:
          type: string
        postedDate:
          type: string
          format: date-time
        currencyRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type:
              - string
              - integer
            name:
              type:
              - 'null'
              - string
            symbol:
              type:
              - 'null'
              - string
        currencyRate:
          type:
          - 'null'
          - number
        lines:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              description:
                type:
                - 'null'
                - string
              unitAmount:
                type:
                - 'null'
                - number
              quantity:
                type:
                - 'null'
                - integer
              subTotal:
                type:
                - 'null'
                - number
              taxAmount:
                type:
                - 'null'
                - number
              totalAmount:
                type:
                - number
                - string
              accountRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type:
                    - string
                    - integer
                  name:
                    type:
                    - 'null'
                    - string
              taxRateRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type:
                    - string
                    - integer
                  name:
                    type:
                    - 'null'
                    - string
                  effectiveTaxRate:
                    type:
                    - 'null'
                    - number
              entityRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type:
                    - string
                    - integer
                  name:
                    type:
                    - 'null'
                    - string
                  type:
                    type:
                    - 'null'
                    - string
              link:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type: string
                  type:
                    type:
                    - 'null'
                    - string
              links:
                type:
                - 'null'
                - array
                items:
                  type:
                  - 'null'
                  - object
                  properties:
                    id:
                      type: string
                    type:
                      type:
                      - 'null'
                      - string
        subTotal:
          type:
          - 'null'
          - number
        taxAmount:
          type:
          - 'null'
          - number
        totalAmount:
          type:
          - number
          - string
        status:
          type: string
        memo:
          type:
          - 'null'
          - string
        sourceModifiedDate:
          type:
          - 'null'
          - string
          format: date-time
  name: "deposits"
- type: DeclarativeStream
  retriever:
    type: SimpleRetriever
    record_selector:
      type: RecordSelector
      extractor:
        type: DpathExtractor
        field_path:
        - "data"
      record_filter:
        condition: "{{ not stream_state.get(stream_slice.connection.businessName,
          {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
          >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
          }}"
        type: RecordFilter
    paginator:
      type: DefaultPaginator
      page_size_option:
        inject_into: request_parameter
        field_name: "limit"
        type: RequestOption
      pagination_strategy:
        type: OffsetIncrement
        page_size: 100
      page_token_option:
        type: RequestOption
        inject_into: request_parameter
        field_name: "offset"
    requester:
      type: HttpRequester
      url_base: "https://api.railz.ai/"
      http_method: "GET"
      authenticator:
        class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
        url: "https://auth.railz.ai/getAccess"
        client_id: "{{ config.client_id }}"
        secret_key: "{{ config.secret_key }}"
        lifetime: "PT3600S"
        type: CustomAuthenticator
      request_parameters:
        businessName: "{{ stream_slice.connection.businessName }}"
        serviceName: "{{ stream_slice.connection.serviceName }}"
        startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
        endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
        orderBy: "{{ parameters.cursor_field }}"
      path: "/estimates"
  transformations:
  - type: AddFields
    fields:
    - path:
      - "businessName"
      value: "{{ stream_slice.connection.businessName }}"
      type: AddedFieldDefinition
    - path:
      - "serviceName"
      value: "{{ stream_slice.connection.serviceName }}"
      type: AddedFieldDefinition
  incremental_sync:
    type: CustomIncrementalSync
    class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
    stream_slicers:
    - type: SubstreamPartitionRouter
      parent_stream_configs:
      - stream:
          type: DeclarativeStream
          retriever:
            type: SimpleRetriever
            record_selector:
              type: RecordSelector
              extractor:
                type: DpathExtractor
                field_path:
                - "data"
              record_filter:
                condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                  in parameters.serviceNames }}"
                type: RecordFilter
            paginator:
              type: DefaultPaginator
              page_size_option:
                inject_into: request_parameter
                field_name: "limit"
                type: RequestOption
              pagination_strategy:
                type: OffsetIncrement
                page_size: 100
              page_token_option:
                type: RequestOption
                inject_into: request_parameter
                field_name: "offset"
            requester:
              type: HttpRequester
              url_base: "https://api.railz.ai/"
              http_method: "GET"
              authenticator:
                class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                url: "https://auth.railz.ai/getAccess"
                client_id: "{{ config.client_id }}"
                secret_key: "{{ config.secret_key }}"
                lifetime: "PT3600S"
                type: CustomAuthenticator
              path: "/connections"
          name: "connections_slice"
        parent_key: "/"
        partition_field: "connection"
        type: ParentStreamConfig
    - type: DatetimeBasedCursor
      start_datetime:
        datetime: "{{ config['start_date'] }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      end_datetime:
        datetime: "{{ today_utc() }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      step: "P1M"
      datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
      cursor_granularity: "P1D"
      cursor_field: "postedDate"
    cursor_field: "postedDate"
  primary_key: "id"
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        id:
          type:
          - string
          - integer
        businessName:
          type: string
        serviceName:
          type: string
        customerRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type:
              - string
              - integer
            name:
              type:
              - 'null'
              - string
        postedDate:
          type: string
          format: date-time
        dueDate:
          type:
          - 'null'
          - string
          format: date-time
        acceptedDate:
          type:
          - 'null'
          - string
          format: date-time
        expiryDate:
          type:
          - 'null'
          - string
          format: date-time
        currencyRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type:
              - string
              - integer
            name:
              type:
              - 'null'
              - string
            symbol:
              type:
              - 'null'
              - string
        currencyRate:
          type:
          - 'null'
          - number
        lines:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              description:
                type:
                - 'null'
                - string
              unitAmount:
                type:
                - 'null'
                - number
              quantity:
                type:
                - 'null'
                - integer
              discountAmount:
                type:
                - 'null'
                - number
              subTotal:
                type:
                - 'null'
                - number
              taxAmount:
                type:
                - 'null'
                - number
              totalAmount:
                type:
                - number
                - string
              discountPercentage:
                type:
                - 'null'
                - number
                - string
              taxRateRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type:
                    - string
                    - integer
                  name:
                    type:
                    - 'null'
                    - string
                  effectiveTaxRate:
                    type:
                    - 'null'
                    - number
              inventoryRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type:
                    - string
                    - integer
                  name:
                    type:
                    - 'null'
                    - string
              trackingCategoryRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type:
                    - string
                    - integer
                  name:
                    type:
                    - 'null'
                    - string
                  option:
                    type:
                    - 'null'
                    - string
                  optionId:
                    type:
                    - 'null'
                    - string
              id:
                type:
                - 'null'
                - string
                - integer
              accountRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type:
                    - string
                    - integer
                  name:
                    type:
                    - 'null'
                    - string
        totalDiscount:
          type:
          - 'null'
          - number
        discountPercentage:
          type:
          - 'null'
          - number
        subTotal:
          type:
          - 'null'
          - number
        taxAmount:
          type:
          - 'null'
          - number
        totalAmount:
          type:
          - number
          - string
        status:
          type: string
        memo:
          type:
          - 'null'
          - string
        shippingAddress:
          type: object
          properties:
            line1:
              type:
              - string
              - 'null'
            line2:
              type:
              - string
              - 'null'
            city:
              type:
              - string
              - 'null'
            region:
              type:
              - string
              - 'null'
            country:
              type:
              - string
              - 'null'
            postalCode:
              type:
              - string
              - 'null'
        sourceModifiedDate:
          type:
          - 'null'
          - string
          format: date-time
  name: "estimates"
- type: DeclarativeStream
  retriever:
    type: SimpleRetriever
    record_selector:
      type: RecordSelector
      extractor:
        type: DpathExtractor
        field_path:
        - "data"
      record_filter:
        condition: "{{ not stream_state.get(stream_slice.connection.businessName,
          {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
          >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
          }}"
        type: RecordFilter
    paginator:
      type: DefaultPaginator
      page_size_option:
        inject_into: request_parameter
        field_name: "limit"
        type: RequestOption
      pagination_strategy:
        type: OffsetIncrement
        page_size: 100
      page_token_option:
        type: RequestOption
        inject_into: request_parameter
        field_name: "offset"
    requester:
      type: HttpRequester
      url_base: "https://api.railz.ai/"
      http_method: "GET"
      authenticator:
        class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
        url: "https://auth.railz.ai/getAccess"
        client_id: "{{ config.client_id }}"
        secret_key: "{{ config.secret_key }}"
        lifetime: "PT3600S"
        type: CustomAuthenticator
      request_parameters:
        businessName: "{{ stream_slice.connection.businessName }}"
        serviceName: "{{ stream_slice.connection.serviceName }}"
        startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
        endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
        orderBy: "{{ parameters.cursor_field }}"
      path: "/invoices"
  transformations:
  - type: AddFields
    fields:
    - path:
      - "businessName"
      value: "{{ stream_slice.connection.businessName }}"
      type: AddedFieldDefinition
    - path:
      - "serviceName"
      value: "{{ stream_slice.connection.serviceName }}"
      type: AddedFieldDefinition
  incremental_sync:
    type: CustomIncrementalSync
    class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
    stream_slicers:
    - type: SubstreamPartitionRouter
      parent_stream_configs:
      - stream:
          type: DeclarativeStream
          retriever:
            type: SimpleRetriever
            record_selector:
              type: RecordSelector
              extractor:
                type: DpathExtractor
                field_path:
                - "data"
              record_filter:
                condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                  in parameters.serviceNames }}"
                type: RecordFilter
            paginator:
              type: DefaultPaginator
              page_size_option:
                inject_into: request_parameter
                field_name: "limit"
                type: RequestOption
              pagination_strategy:
                type: OffsetIncrement
                page_size: 100
              page_token_option:
                type: RequestOption
                inject_into: request_parameter
                field_name: "offset"
            requester:
              type: HttpRequester
              url_base: "https://api.railz.ai/"
              http_method: "GET"
              authenticator:
                class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                url: "https://auth.railz.ai/getAccess"
                client_id: "{{ config.client_id }}"
                secret_key: "{{ config.secret_key }}"
                lifetime: "PT3600S"
                type: CustomAuthenticator
              path: "/connections"
          name: "connections_slice"
        parent_key: "/"
        partition_field: "connection"
        type: ParentStreamConfig
    - type: DatetimeBasedCursor
      start_datetime:
        datetime: "{{ config['start_date'] }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      end_datetime:
        datetime: "{{ today_utc() }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      step: "P1M"
      datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
      cursor_granularity: "P1D"
      cursor_field: "postedDate"
    cursor_field: "postedDate"
  primary_key: "id"
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        id:
          type:
          - string
          - integer
        businessName:
          type: string
        serviceName:
          type: string
        invoiceNumber:
          type:
          - 'null'
          - string
        customerRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type:
              - string
              - integer
            name:
              type:
              - 'null'
              - string
        postedDate:
          type: string
          format: date-time
        dueDate:
          type:
          - 'null'
          - string
          format: date-time
        currencyRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type:
              - string
              - integer
            name:
              type:
              - 'null'
              - string
            symbol:
              type:
              - 'null'
              - string
        currencyRate:
          type:
          - 'null'
          - number
        lines:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              description:
                type:
                - 'null'
                - string
              unitAmount:
                type:
                - 'null'
                - number
              quantity:
                type:
                - 'null'
                - integer
              discountAmount:
                type:
                - 'null'
                - number
              subTotal:
                type:
                - 'null'
                - number
              taxAmount:
                type:
                - 'null'
                - number
              totalAmount:
                type:
                - number
                - string
              discountPercentage:
                type:
                - 'null'
                - number
                - string
              taxRateRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type:
                    - string
                    - integer
                  name:
                    type:
                    - 'null'
                    - string
                  effectiveTaxRate:
                    type:
                    - 'null'
                    - number
              inventoryRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type:
                    - string
                    - integer
                  name:
                    type:
                    - 'null'
                    - string
              trackingCategoryRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type:
                    - string
                    - integer
                  name:
                    type:
                    - 'null'
                    - string
                  option:
                    type:
                    - 'null'
                    - string
                  optionId:
                    type:
                    - 'null'
                    - string
              accountRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type:
                    - string
                    - integer
                  name:
                    type:
                    - 'null'
                    - string
              locationRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type:
                    - 'null'
                    - string
                    - integer
                  name:
                    type:
                    - 'null'
                    - string
        status:
          type: string
        totalDiscount:
          type:
          - 'null'
          - number
        subTotal:
          type:
          - 'null'
          - number
        taxAmount:
          type:
          - 'null'
          - number
        totalAmount:
          type:
          - number
          - string
        amountDue:
          type:
          - 'null'
          - number
        discountPercentage:
          type:
          - 'null'
          - number
        sourceModifiedDate:
          type:
          - 'null'
          - string
          format: date-time
        memo:
          type:
          - 'null'
          - string
        payments:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              amount:
                type:
                - 'null'
                - number
              paymentId:
                type:
                - 'null'
                - string
              date:
                type:
                - 'null'
                - string
                format: date-time
        subsidiaryRefs:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - string
                - integer
              name:
                type:
                - 'null'
                - string
  name: "invoices"
- type: DeclarativeStream
  retriever:
    type: SimpleRetriever
    record_selector:
      type: RecordSelector
      extractor:
        type: DpathExtractor
        field_path:
        - "data"
      record_filter:
        condition: "{{ not stream_state.get(stream_slice.connection.businessName,
          {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
          >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
          }}"
        type: RecordFilter
    paginator:
      type: DefaultPaginator
      page_size_option:
        inject_into: request_parameter
        field_name: "limit"
        type: RequestOption
      pagination_strategy:
        type: OffsetIncrement
        page_size: 100
      page_token_option:
        type: RequestOption
        inject_into: request_parameter
        field_name: "offset"
    requester:
      type: HttpRequester
      url_base: "https://api.railz.ai/"
      http_method: "GET"
      authenticator:
        class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
        url: "https://auth.railz.ai/getAccess"
        client_id: "{{ config.client_id }}"
        secret_key: "{{ config.secret_key }}"
        lifetime: "PT3600S"
        type: CustomAuthenticator
      request_parameters:
        businessName: "{{ stream_slice.connection.businessName }}"
        serviceName: "{{ stream_slice.connection.serviceName }}"
        startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
        endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
        orderBy: "{{ parameters.cursor_field }}"
      path: "/invoices/creditNotes"
  transformations:
  - type: AddFields
    fields:
    - path:
      - "businessName"
      value: "{{ stream_slice.connection.businessName }}"
      type: AddedFieldDefinition
    - path:
      - "serviceName"
      value: "{{ stream_slice.connection.serviceName }}"
      type: AddedFieldDefinition
  incremental_sync:
    type: CustomIncrementalSync
    class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
    stream_slicers:
    - type: SubstreamPartitionRouter
      parent_stream_configs:
      - stream:
          type: DeclarativeStream
          retriever:
            type: SimpleRetriever
            record_selector:
              type: RecordSelector
              extractor:
                type: DpathExtractor
                field_path:
                - "data"
              record_filter:
                condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                  in parameters.serviceNames }}"
                type: RecordFilter
            paginator:
              type: DefaultPaginator
              page_size_option:
                inject_into: request_parameter
                field_name: "limit"
                type: RequestOption
              pagination_strategy:
                type: OffsetIncrement
                page_size: 100
              page_token_option:
                type: RequestOption
                inject_into: request_parameter
                field_name: "offset"
            requester:
              type: HttpRequester
              url_base: "https://api.railz.ai/"
              http_method: "GET"
              authenticator:
                class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                url: "https://auth.railz.ai/getAccess"
                client_id: "{{ config.client_id }}"
                secret_key: "{{ config.secret_key }}"
                lifetime: "PT3600S"
                type: CustomAuthenticator
              path: "/connections"
          name: "connections_slice"
        parent_key: "/"
        partition_field: "connection"
        type: ParentStreamConfig
    - type: DatetimeBasedCursor
      start_datetime:
        datetime: "{{ config['start_date'] }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      end_datetime:
        datetime: "{{ today_utc() }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      step: "P1M"
      datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
      cursor_granularity: "P1D"
      cursor_field: "postedDate"
    cursor_field: "postedDate"
  primary_key: "id"
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        id:
          type:
          - string
          - integer
        businessName:
          type: string
        serviceName:
          type: string
        postedDate:
          type: string
          format: date-time
        allocatedOnDate:
          type:
          - 'null'
          - string
          format: date-time
        currencyRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type: string
            name:
              type:
              - 'null'
              - string
            symbol:
              type:
              - 'null'
              - string
        currencyRate:
          type:
          - 'null'
          - number
        lines:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              description:
                type:
                - 'null'
                - string
              unitAmount:
                type:
                - 'null'
                - number
              quantity:
                type:
                - 'null'
                - integer
              discountAmount:
                type:
                - 'null'
                - number
              subTotal:
                type:
                - 'null'
                - number
              taxAmount:
                type:
                - 'null'
                - number
              totalAmount:
                type:
                - number
                - string
              discountPercentage:
                type:
                - 'null'
                - number
                - string
              taxRateRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type: string
                  name:
                    type:
                    - 'null'
                    - string
                  effectiveTaxRate:
                    type:
                    - 'null'
                    - number
              inventoryRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type: string
                  name:
                    type:
                    - 'null'
                    - string
              trackingCategoryRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type: string
                  name:
                    type:
                    - 'null'
                    - string
                  option:
                    type:
                    - 'null'
                    - string
                  optionId:
                    type:
                    - 'null'
                    - string
              id:
                type:
                - 'null'
                - string
              accountRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type: string
                  name:
                    type:
                    - 'null'
                    - string
        totalDiscount:
          type:
          - 'null'
          - number
        discountPercentage:
          type:
          - 'null'
          - number
        subTotal:
          type:
          - 'null'
          - number
        taxAmount:
          type:
          - 'null'
          - number
        totalAmount:
          type:
          - number
          - string
        remainingCredit:
          type:
          - 'null'
          - number
        status:
          type: string
        memo:
          type:
          - 'null'
          - string
        payments:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              amount:
                type:
                - 'null'
                - number
              paymentId:
                type:
                - 'null'
                - string
              date:
                type:
                - 'null'
                - string
                format: date-time
        sourceModifiedDate:
          type:
          - 'null'
          - string
          format: date-time
        locationRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type:
              - 'null'
              - string
            name:
              type:
              - 'null'
              - string
        customerRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type: string
            name:
              type:
              - 'null'
              - string
  name: "invoices_credit_notes"
- type: DeclarativeStream
  retriever:
    type: SimpleRetriever
    record_selector:
      type: RecordSelector
      extractor:
        type: DpathExtractor
        field_path:
        - "data"
      record_filter:
        condition: "{{ not stream_state.get(stream_slice.connection.businessName,
          {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
          >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
          }}"
        type: RecordFilter
    paginator:
      type: DefaultPaginator
      page_size_option:
        inject_into: request_parameter
        field_name: "limit"
        type: RequestOption
      pagination_strategy:
        type: OffsetIncrement
        page_size: 100
      page_token_option:
        type: RequestOption
        inject_into: request_parameter
        field_name: "offset"
    requester:
      type: HttpRequester
      url_base: "https://api.railz.ai/"
      http_method: "GET"
      authenticator:
        class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
        url: "https://auth.railz.ai/getAccess"
        client_id: "{{ config.client_id }}"
        secret_key: "{{ config.secret_key }}"
        lifetime: "PT3600S"
        type: CustomAuthenticator
      request_parameters:
        businessName: "{{ stream_slice.connection.businessName }}"
        serviceName: "{{ stream_slice.connection.serviceName }}"
        startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
        endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
        orderBy: "{{ parameters.cursor_field }}"
      path: "/invoices/payments"
  transformations:
  - type: AddFields
    fields:
    - path:
      - "businessName"
      value: "{{ stream_slice.connection.businessName }}"
      type: AddedFieldDefinition
    - path:
      - "serviceName"
      value: "{{ stream_slice.connection.serviceName }}"
      type: AddedFieldDefinition
  incremental_sync:
    type: CustomIncrementalSync
    class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
    stream_slicers:
    - type: SubstreamPartitionRouter
      parent_stream_configs:
      - stream:
          type: DeclarativeStream
          retriever:
            type: SimpleRetriever
            record_selector:
              type: RecordSelector
              extractor:
                type: DpathExtractor
                field_path:
                - "data"
              record_filter:
                condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                  in parameters.serviceNames }}"
                type: RecordFilter
            paginator:
              type: DefaultPaginator
              page_size_option:
                inject_into: request_parameter
                field_name: "limit"
                type: RequestOption
              pagination_strategy:
                type: OffsetIncrement
                page_size: 100
              page_token_option:
                type: RequestOption
                inject_into: request_parameter
                field_name: "offset"
            requester:
              type: HttpRequester
              url_base: "https://api.railz.ai/"
              http_method: "GET"
              authenticator:
                class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                url: "https://auth.railz.ai/getAccess"
                client_id: "{{ config.client_id }}"
                secret_key: "{{ config.secret_key }}"
                lifetime: "PT3600S"
                type: CustomAuthenticator
              path: "/connections"
          name: "connections_slice"
        parent_key: "/"
        partition_field: "connection"
        type: ParentStreamConfig
    - type: DatetimeBasedCursor
      start_datetime:
        datetime: "{{ config['start_date'] }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      end_datetime:
        datetime: "{{ today_utc() }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      step: "P1M"
      datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
      cursor_granularity: "P1D"
      cursor_field: "date"
    cursor_field: "date"
  primary_key: "id"
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        id:
          type:
          - string
          - integer
        businessName:
          type: string
        serviceName:
          type: string
        customerRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type: string
            name:
              type:
              - 'null'
              - string
        accountRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type: string
            name:
              type:
              - 'null'
              - string
        totalAmount:
          type:
          - number
          - string
        currencyRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type: string
            name:
              type:
              - 'null'
              - string
            symbol:
              type:
              - 'null'
              - string
        currencyRate:
          type:
          - 'null'
          - number
        date:
          type: string
          format: date-time
        memo:
          type:
          - 'null'
          - string
        lines:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              amount:
                type: number
              lines:
                type:
                - 'null'
                - object
                properties:
                  type:
                    type: string
                  id:
                    type:
                    - 'null'
                    - string
                  amount:
                    type:
                    - 'null'
                    - number
              allocatedOnDate:
                type:
                - 'null'
                - string
                format: date-time
        subsidiaryRefs:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              id:
                type: string
              name:
                type:
                - 'null'
                - string
        sourceModifiedDate:
          type:
          - 'null'
          - string
          format: date-time
  name: "invoices_payments"
- type: DeclarativeStream
  retriever:
    type: SimpleRetriever
    record_selector:
      type: RecordSelector
      extractor:
        type: DpathExtractor
        field_path:
        - "data"
      record_filter:
        condition: "{{ not stream_state.get(stream_slice.connection.businessName,
          {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
          >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
          }}"
        type: RecordFilter
    paginator:
      type: DefaultPaginator
      page_size_option:
        inject_into: request_parameter
        field_name: "limit"
        type: RequestOption
      pagination_strategy:
        type: OffsetIncrement
        page_size: 100
      page_token_option:
        type: RequestOption
        inject_into: request_parameter
        field_name: "offset"
    requester:
      type: HttpRequester
      url_base: "https://api.railz.ai/"
      http_method: "GET"
      authenticator:
        class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
        url: "https://auth.railz.ai/getAccess"
        client_id: "{{ config.client_id }}"
        secret_key: "{{ config.secret_key }}"
        lifetime: "PT3600S"
        type: CustomAuthenticator
      request_parameters:
        businessName: "{{ stream_slice.connection.businessName }}"
        serviceName: "{{ stream_slice.connection.serviceName }}"
        startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
        endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
        orderBy: "{{ parameters.cursor_field }}"
      path: "/journalEntries"
  transformations:
  - type: AddFields
    fields:
    - path:
      - "businessName"
      value: "{{ stream_slice.connection.businessName }}"
      type: AddedFieldDefinition
    - path:
      - "serviceName"
      value: "{{ stream_slice.connection.serviceName }}"
      type: AddedFieldDefinition
  incremental_sync:
    type: CustomIncrementalSync
    class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
    stream_slicers:
    - type: SubstreamPartitionRouter
      parent_stream_configs:
      - stream:
          type: DeclarativeStream
          retriever:
            type: SimpleRetriever
            record_selector:
              type: RecordSelector
              extractor:
                type: DpathExtractor
                field_path:
                - "data"
              record_filter:
                condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                  in parameters.serviceNames }}"
                type: RecordFilter
            paginator:
              type: DefaultPaginator
              page_size_option:
                inject_into: request_parameter
                field_name: "limit"
                type: RequestOption
              pagination_strategy:
                type: OffsetIncrement
                page_size: 100
              page_token_option:
                type: RequestOption
                inject_into: request_parameter
                field_name: "offset"
            requester:
              type: HttpRequester
              url_base: "https://api.railz.ai/"
              http_method: "GET"
              authenticator:
                class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                url: "https://auth.railz.ai/getAccess"
                client_id: "{{ config.client_id }}"
                secret_key: "{{ config.secret_key }}"
                lifetime: "PT3600S"
                type: CustomAuthenticator
              path: "/connections"
          name: "connections_slice"
        parent_key: "/"
        partition_field: "connection"
        type: ParentStreamConfig
    - type: DatetimeBasedCursor
      start_datetime:
        datetime: "{{ config['start_date'] }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      end_datetime:
        datetime: "{{ today_utc() }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      step: "P1M"
      datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
      cursor_granularity: "P1D"
      cursor_field: "postedDate"
    cursor_field: "postedDate"
  primary_key: "id"
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        id:
          type:
          - string
          - integer
        businessName:
          type: string
        serviceName:
          type: string
        postedDate:
          type: string
          format: date-time
        createdDate:
          type: string
          format: date-time
        currencyRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type:
              - 'null'
              - string
            name:
              type:
              - 'null'
              - string
            symbol:
              type:
              - 'null'
              - string
        currencyRate:
          type:
          - 'null'
          - number
        subsidiaryRefs:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              id:
                type: string
              name:
                type:
                - 'null'
                - string
        lines:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              description:
                type:
                - 'null'
                - string
              credit:
                type:
                - 'null'
                - number
              debit:
                type:
                - 'null'
                - number
              taxAmount:
                type:
                - 'null'
                - number
              accountRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type: string
                  name:
                    type:
                    - 'null'
                    - string
              entityRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type: string
                  name:
                    type:
                    - 'null'
                    - string
                  type:
                    type:
                    - 'null'
                    - string
              taxRateRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type: string
                  name:
                    type:
                    - 'null'
                    - string
                  effectiveTaxRate:
                    type:
                    - 'null'
                    - number
              trackingCategoryRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type: string
                  name:
                    type:
                    - 'null'
                    - string
                  option:
                    type:
                    - 'null'
                    - string
                  optionId:
                    type:
                    - 'null'
                    - string
              id:
                type:
                - 'null'
                - string
        memo:
          type:
          - 'null'
          - string
        sourceModifiedDate:
          type:
          - 'null'
          - string
          format: date-time
        totalCredit:
          type:
          - 'null'
          - number
        totalDebit:
          type:
          - 'null'
          - number
  name: "journal_entries"
- type: DeclarativeStream
  retriever:
    type: SimpleRetriever
    record_selector:
      type: RecordSelector
      extractor:
        type: DpathExtractor
        field_path:
        - "data"
      record_filter:
        condition: "{{ not stream_state.get(stream_slice.connection.businessName,
          {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
          >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
          }}"
        type: RecordFilter
    paginator:
      type: DefaultPaginator
      page_size_option:
        inject_into: request_parameter
        field_name: "limit"
        type: RequestOption
      pagination_strategy:
        type: OffsetIncrement
        page_size: 100
      page_token_option:
        type: RequestOption
        inject_into: request_parameter
        field_name: "offset"
    requester:
      type: HttpRequester
      url_base: "https://api.railz.ai/"
      http_method: "GET"
      authenticator:
        class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
        url: "https://auth.railz.ai/getAccess"
        client_id: "{{ config.client_id }}"
        secret_key: "{{ config.secret_key }}"
        lifetime: "PT3600S"
        type: CustomAuthenticator
      request_parameters:
        businessName: "{{ stream_slice.connection.businessName }}"
        serviceName: "{{ stream_slice.connection.serviceName }}"
        startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
        endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
        orderBy: "{{ parameters.cursor_field }}"
      path: "/purchaseOrders"
  transformations:
  - type: AddFields
    fields:
    - path:
      - "businessName"
      value: "{{ stream_slice.connection.businessName }}"
      type: AddedFieldDefinition
    - path:
      - "serviceName"
      value: "{{ stream_slice.connection.serviceName }}"
      type: AddedFieldDefinition
  incremental_sync:
    type: CustomIncrementalSync
    class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
    stream_slicers:
    - type: SubstreamPartitionRouter
      parent_stream_configs:
      - stream:
          type: DeclarativeStream
          retriever:
            type: SimpleRetriever
            record_selector:
              type: RecordSelector
              extractor:
                type: DpathExtractor
                field_path:
                - "data"
              record_filter:
                condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                  in parameters.serviceNames }}"
                type: RecordFilter
            paginator:
              type: DefaultPaginator
              page_size_option:
                inject_into: request_parameter
                field_name: "limit"
                type: RequestOption
              pagination_strategy:
                type: OffsetIncrement
                page_size: 100
              page_token_option:
                type: RequestOption
                inject_into: request_parameter
                field_name: "offset"
            requester:
              type: HttpRequester
              url_base: "https://api.railz.ai/"
              http_method: "GET"
              authenticator:
                class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                url: "https://auth.railz.ai/getAccess"
                client_id: "{{ config.client_id }}"
                secret_key: "{{ config.secret_key }}"
                lifetime: "PT3600S"
                type: CustomAuthenticator
              path: "/connections"
          name: "connections_slice"
        parent_key: "/"
        partition_field: "connection"
        type: ParentStreamConfig
    - type: DatetimeBasedCursor
      start_datetime:
        datetime: "{{ config['start_date'] }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      end_datetime:
        datetime: "{{ today_utc() }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      step: "P1M"
      datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
      cursor_granularity: "P1D"
      cursor_field: "postedDate"
    cursor_field: "postedDate"
  primary_key: "id"
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        id:
          type:
          - string
          - integer
        businessName:
          type: string
        serviceName:
          type: string
        vendorRef:
          type: object
          properties:
            id:
              type:
              - string
              - integer
            name:
              type:
              - 'null'
              - string
        postedDate:
          type: string
          format: date-time
        deliveryDate:
          type:
          - 'null'
          - string
          format: date-time
        expectedArrivalDate:
          type:
          - 'null'
          - string
          format: date-time
        dueDate:
          type:
          - 'null'
          - string
          format: date-time
        currencyRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type:
              - string
              - integer
            name:
              type:
              - 'null'
              - string
            symbol:
              type:
              - 'null'
              - string
        currencyRate:
          type:
          - 'null'
          - number
        lines:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              description:
                type:
                - 'null'
                - string
              unitAmount:
                type:
                - 'null'
                - number
              quantity:
                type:
                - 'null'
                - integer
              discountAmount:
                type:
                - 'null'
                - number
              subTotal:
                type:
                - 'null'
                - number
              taxAmount:
                type:
                - 'null'
                - number
              totalAmount:
                type:
                - number
                - string
              discountPercentage:
                type:
                - 'null'
                - number
                - string
              taxRateRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type:
                    - string
                    - integer
                  name:
                    type:
                    - 'null'
                    - string
                  effectiveTaxRate:
                    type:
                    - 'null'
                    - number
              inventoryRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type:
                    - string
                    - integer
                  name:
                    type:
                    - 'null'
                    - string
              trackingCategoryRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type:
                    - string
                    - integer
                  name:
                    type:
                    - 'null'
                    - string
                  option:
                    type:
                    - 'null'
                    - string
                  optionId:
                    type:
                    - 'null'
                    - string
              id:
                type:
                - 'null'
                - string
                - integer
              accountRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type:
                    - string
                    - integer
                  name:
                    type:
                    - 'null'
                    - string
        totalDiscount:
          type:
          - 'null'
          - number
        discountPercentage:
          type:
          - 'null'
          - number
        subTotal:
          type:
          - 'null'
          - number
        taxAmount:
          type:
          - 'null'
          - number
        totalAmount:
          type:
          - number
          - string
        status:
          type: string
        memo:
          type:
          - 'null'
          - string
        shippingAddress:
          type: object
          properties:
            line1:
              type:
              - string
              - 'null'
            line2:
              type:
              - string
              - 'null'
            city:
              type:
              - string
              - 'null'
            region:
              type:
              - string
              - 'null'
            country:
              type:
              - string
              - 'null'
            postalCode:
              type:
              - string
              - 'null'
        contacts:
          type:
          - 'null'
          - object
          properties:
            name:
              type:
              - 'null'
              - string
            email:
              type:
              - 'null'
              - string
            phone:
              type:
              - 'null'
              - string
        sourceModifiedDate:
          type:
          - 'null'
          - string
          format: date-time
  name: "purchase_orders"
- type: DeclarativeStream
  retriever:
    type: SimpleRetriever
    record_selector:
      type: RecordSelector
      extractor:
        type: DpathExtractor
        field_path:
        - "data"
      record_filter:
        condition: "{{ not stream_state.get(stream_slice.connection.businessName,
          {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
          >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
          }}"
        type: RecordFilter
    paginator:
      type: DefaultPaginator
      page_size_option:
        inject_into: request_parameter
        field_name: "limit"
        type: RequestOption
      pagination_strategy:
        type: OffsetIncrement
        page_size: 100
      page_token_option:
        type: RequestOption
        inject_into: request_parameter
        field_name: "offset"
    requester:
      type: HttpRequester
      url_base: "https://api.railz.ai/"
      http_method: "GET"
      authenticator:
        class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
        url: "https://auth.railz.ai/getAccess"
        client_id: "{{ config.client_id }}"
        secret_key: "{{ config.secret_key }}"
        lifetime: "PT3600S"
        type: CustomAuthenticator
      request_parameters:
        businessName: "{{ stream_slice.connection.businessName }}"
        serviceName: "{{ stream_slice.connection.serviceName }}"
        startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
        endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
        orderBy: "{{ parameters.cursor_field }}"
      path: "/refunds"
  transformations:
  - type: AddFields
    fields:
    - path:
      - "businessName"
      value: "{{ stream_slice.connection.businessName }}"
      type: AddedFieldDefinition
    - path:
      - "serviceName"
      value: "{{ stream_slice.connection.serviceName }}"
      type: AddedFieldDefinition
  incremental_sync:
    type: CustomIncrementalSync
    class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
    stream_slicers:
    - type: SubstreamPartitionRouter
      parent_stream_configs:
      - stream:
          type: DeclarativeStream
          retriever:
            type: SimpleRetriever
            record_selector:
              type: RecordSelector
              extractor:
                type: DpathExtractor
                field_path:
                - "data"
              record_filter:
                condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                  in parameters.serviceNames }}"
                type: RecordFilter
            paginator:
              type: DefaultPaginator
              page_size_option:
                inject_into: request_parameter
                field_name: "limit"
                type: RequestOption
              pagination_strategy:
                type: OffsetIncrement
                page_size: 100
              page_token_option:
                type: RequestOption
                inject_into: request_parameter
                field_name: "offset"
            requester:
              type: HttpRequester
              url_base: "https://api.railz.ai/"
              http_method: "GET"
              authenticator:
                class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                url: "https://auth.railz.ai/getAccess"
                client_id: "{{ config.client_id }}"
                secret_key: "{{ config.secret_key }}"
                lifetime: "PT3600S"
                type: CustomAuthenticator
              path: "/connections"
          name: "connections_slice"
        parent_key: "/"
        partition_field: "connection"
        type: ParentStreamConfig
    - type: DatetimeBasedCursor
      start_datetime:
        datetime: "{{ config['start_date'] }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      end_datetime:
        datetime: "{{ today_utc() }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      step: "P1M"
      datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
      cursor_granularity: "P1D"
      cursor_field: "date"
    cursor_field: "date"
  primary_key: "id"
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        id:
          type:
          - string
          - integer
        businessName:
          type: string
        serviceName:
          type: string
        customerRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type: string
            name:
              type:
              - 'null'
              - string
        accountRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type: string
            name:
              type:
              - 'null'
              - string
        date:
          type: string
          format: date-time
        currencyRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type: string
            name:
              type:
              - 'null'
              - string
            symbol:
              type:
              - 'null'
              - string
        currencyRate:
          type:
          - 'null'
          - number
        lines:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              description:
                type:
                - 'null'
                - string
              unitAmount:
                type:
                - 'null'
                - number
              quantity:
                type:
                - 'null'
                - integer
              discountAmount:
                type:
                - 'null'
                - number
              subTotal:
                type:
                - 'null'
                - number
              taxAmount:
                type:
                - 'null'
                - number
              totalAmount:
                type:
                - number
                - string
              discountPercentage:
                type:
                - 'null'
                - number
                - string
              taxRateRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type: string
                  name:
                    type:
                    - 'null'
                    - string
                  effectiveTaxRate:
                    type:
                    - 'null'
                    - number
              inventoryRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type: string
                  name:
                    type:
                    - 'null'
                    - string
              trackingCategoryRef:
                type:
                - 'null'
                - object
                properties:
                  id:
                    type: string
                  name:
                    type:
                    - 'null'
                    - string
                  option:
                    type:
                    - 'null'
                    - string
                  optionId:
                    type:
                    - 'null'
                    - string
        totalDiscount:
          type:
          - 'null'
          - number
        discountPercentage:
          type:
          - 'null'
          - number
        subTotal:
          type:
          - 'null'
          - number
        taxAmount:
          type:
          - 'null'
          - number
        totalAmount:
          type:
          - number
          - string
        memo:
          type:
          - 'null'
          - string
        shippingAddress:
          type: object
          properties:
            line1:
              type:
              - string
              - 'null'
            line2:
              type:
              - string
              - 'null'
            city:
              type:
              - string
              - 'null'
            region:
              type:
              - string
              - 'null'
            country:
              type:
              - string
              - 'null'
            postalCode:
              type:
              - string
              - 'null'
        sourceModifiedDate:
          type:
          - 'null'
          - string
          format: date-time
  name: "refunds"
- type: DeclarativeStream
  retriever:
    type: SimpleRetriever
    record_selector:
      type: RecordSelector
      extractor:
        type: DpathExtractor
        field_path:
        - "data"
      record_filter:
        condition: "{{ not stream_state.get(stream_slice.connection.businessName,
          {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
          >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
          }}"
        type: RecordFilter
    paginator:
      type: DefaultPaginator
      page_size_option:
        inject_into: request_parameter
        field_name: "limit"
        type: RequestOption
      pagination_strategy:
        type: OffsetIncrement
        page_size: 100
      page_token_option:
        type: RequestOption
        inject_into: request_parameter
        field_name: "offset"
    requester:
      type: HttpRequester
      url_base: "https://api.railz.ai/"
      http_method: "GET"
      authenticator:
        class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
        url: "https://auth.railz.ai/getAccess"
        client_id: "{{ config.client_id }}"
        secret_key: "{{ config.secret_key }}"
        lifetime: "PT3600S"
        type: CustomAuthenticator
      request_parameters:
        businessName: "{{ stream_slice.connection.businessName }}"
        serviceName: "{{ stream_slice.connection.serviceName }}"
        startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
        endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
        orderBy: "{{ parameters.cursor_field }}"
      path: "/commerce/disputes"
  transformations:
  - type: AddFields
    fields:
    - path:
      - "businessName"
      value: "{{ stream_slice.connection.businessName }}"
      type: AddedFieldDefinition
    - path:
      - "serviceName"
      value: "{{ stream_slice.connection.serviceName }}"
      type: AddedFieldDefinition
  incremental_sync:
    type: CustomIncrementalSync
    class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
    stream_slicers:
    - type: SubstreamPartitionRouter
      parent_stream_configs:
      - stream:
          type: DeclarativeStream
          retriever:
            type: SimpleRetriever
            record_selector:
              type: RecordSelector
              extractor:
                type: DpathExtractor
                field_path:
                - "data"
              record_filter:
                condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                  in parameters.serviceNames }}"
                type: RecordFilter
            paginator:
              type: DefaultPaginator
              page_size_option:
                inject_into: request_parameter
                field_name: "limit"
                type: RequestOption
              pagination_strategy:
                type: OffsetIncrement
                page_size: 100
              page_token_option:
                type: RequestOption
                inject_into: request_parameter
                field_name: "offset"
            requester:
              type: HttpRequester
              url_base: "https://api.railz.ai/"
              http_method: "GET"
              authenticator:
                class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                url: "https://auth.railz.ai/getAccess"
                client_id: "{{ config.client_id }}"
                secret_key: "{{ config.secret_key }}"
                lifetime: "PT3600S"
                type: CustomAuthenticator
              path: "/connections"
          name: "connections_slice"
        parent_key: "/"
        partition_field: "connection"
        type: ParentStreamConfig
    - type: DatetimeBasedCursor
      start_datetime:
        datetime: "{{ config['start_date'] }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      end_datetime:
        datetime: "{{ today_utc() }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      step: "P1M"
      datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
      cursor_granularity: "P1D"
      cursor_field: "createdDate"
    cursor_field: "createdDate"
  primary_key: "id"
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        id:
          type:
          - string
          - integer
        businessName:
          type: string
        serviceName:
          type: string
        totalAmount:
          type:
          - number
          - string
        status:
          type: string
        reason:
          type: string
        dueDate:
          type: string
          format: date-time
        createdDate:
          type: string
          format: date-time
        sourceModifiedDate:
          type:
          - 'null'
          - string
          format: date-time
        orderRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type:
              - string
              - integer
            orderNumber:
              type:
              - 'null'
              - string
        currencyRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type:
              - 'null'
              - string
              - integer
            name:
              type: string
            symbol:
              type: string
  name: "commerce_disputes"
- type: DeclarativeStream
  retriever:
    type: SimpleRetriever
    record_selector:
      type: RecordSelector
      extractor:
        type: DpathExtractor
        field_path:
        - "data"
      record_filter:
        condition: "{{ not stream_state.get(stream_slice.connection.businessName,
          {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
          >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
          }}"
        type: RecordFilter
    paginator:
      type: DefaultPaginator
      page_size_option:
        inject_into: request_parameter
        field_name: "limit"
        type: RequestOption
      pagination_strategy:
        type: OffsetIncrement
        page_size: 100
      page_token_option:
        type: RequestOption
        inject_into: request_parameter
        field_name: "offset"
    requester:
      type: HttpRequester
      url_base: "https://api.railz.ai/"
      http_method: "GET"
      authenticator:
        class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
        url: "https://auth.railz.ai/getAccess"
        client_id: "{{ config.client_id }}"
        secret_key: "{{ config.secret_key }}"
        lifetime: "PT3600S"
        type: CustomAuthenticator
      request_parameters:
        businessName: "{{ stream_slice.connection.businessName }}"
        serviceName: "{{ stream_slice.connection.serviceName }}"
        startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
        endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
        orderBy: "{{ parameters.cursor_field }}"
      path: "/commerce/orders"
  transformations:
  - type: AddFields
    fields:
    - path:
      - "businessName"
      value: "{{ stream_slice.connection.businessName }}"
      type: AddedFieldDefinition
    - path:
      - "serviceName"
      value: "{{ stream_slice.connection.serviceName }}"
      type: AddedFieldDefinition
  incremental_sync:
    type: CustomIncrementalSync
    class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
    stream_slicers:
    - type: SubstreamPartitionRouter
      parent_stream_configs:
      - stream:
          type: DeclarativeStream
          retriever:
            type: SimpleRetriever
            record_selector:
              type: RecordSelector
              extractor:
                type: DpathExtractor
                field_path:
                - "data"
              record_filter:
                condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                  in parameters.serviceNames }}"
                type: RecordFilter
            paginator:
              type: DefaultPaginator
              page_size_option:
                inject_into: request_parameter
                field_name: "limit"
                type: RequestOption
              pagination_strategy:
                type: OffsetIncrement
                page_size: 100
              page_token_option:
                type: RequestOption
                inject_into: request_parameter
                field_name: "offset"
            requester:
              type: HttpRequester
              url_base: "https://api.railz.ai/"
              http_method: "GET"
              authenticator:
                class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                url: "https://auth.railz.ai/getAccess"
                client_id: "{{ config.client_id }}"
                secret_key: "{{ config.secret_key }}"
                lifetime: "PT3600S"
                type: CustomAuthenticator
              path: "/connections"
          name: "connections_slice"
        parent_key: "/"
        partition_field: "connection"
        type: ParentStreamConfig
    - type: DatetimeBasedCursor
      start_datetime:
        datetime: "{{ config['start_date'] }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      end_datetime:
        datetime: "{{ today_utc() }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      step: "P1M"
      datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
      cursor_granularity: "P1D"
      cursor_field: "createdDate"
    cursor_field: "createdDate"
  primary_key: "id"
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        id:
          type:
          - string
          - integer
        businessName:
          type: string
        serviceName:
          type: string
        orderNumber:
          type:
          - 'null'
          - string
        fulfillmentRefs:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              carrier:
                type:
                - 'null'
                - string
              trackingNumber:
                type:
                - 'null'
                - string
              service:
                type:
                - 'null'
                - string
              trackingUrl:
                type:
                - 'null'
                - string
        lines:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - string
                - integer
              productId:
                type:
                - 'null'
                - string
              variantId:
                type: string
              name:
                type:
                - 'null'
                - string
              quantity:
                type: integer
              totalPrice:
                type: number
              unitPrice:
                type:
                - 'null'
                - number
        refundRefs:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - string
                - integer
              totalAmount:
                type:
                - number
                - string
        transactionSourceRefs:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - string
                - integer
              type:
                type: string
              totalAmount:
                type:
                - number
                - string
        shippingAddress:
          type:
          - 'null'
          - object
          properties:
            contactName:
              type:
              - string
              - 'null'
            phone:
              type:
              - string
              - 'null'
            line1:
              type:
              - string
              - 'null'
            line2:
              type:
              - string
              - 'null'
            city:
              type:
              - string
              - 'null'
            region:
              type:
              - string
              - 'null'
            country:
              type:
              - string
              - 'null'
            postalCode:
              type:
              - string
              - 'null'
        billingAddress:
          type:
          - 'null'
          - object
          properties:
            contactName:
              type:
              - string
              - 'null'
            phone:
              type:
              - string
              - 'null'
            line1:
              type:
              - string
              - 'null'
            line2:
              type:
              - string
              - 'null'
            city:
              type:
              - string
              - 'null'
            region:
              type:
              - string
              - 'null'
            country:
              type:
              - string
              - 'null'
            postalCode:
              type:
              - string
              - 'null'
        customerRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type:
              - string
              - integer
            customerName:
              type:
              - 'null'
              - string
            email:
              type:
              - 'null'
              - string
        currencyRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type:
              - 'null'
              - string
              - integer
            name:
              type: string
            symbol:
              type: string
        totalShippingAmount:
          type:
          - 'null'
          - number
        totalGratuityAmount:
          type:
          - 'null'
          - number
        totalDiscountAmount:
          type:
          - 'null'
          - number
        totalTaxAmount:
          type: number
        totalAmount:
          type:
          - number
          - string
        createdDate:
          type: string
          format: date-time
        sourceModifiedDate:
          type: string
          format: date-time
        status:
          type: string
        paymentStatus:
          type: string
        fulfillmentStatus:
          type: string
  name: "commerce_orders"
- type: DeclarativeStream
  retriever:
    type: SimpleRetriever
    record_selector:
      type: RecordSelector
      extractor:
        type: DpathExtractor
        field_path:
        - "data"
      record_filter:
        condition: "{{ not stream_state.get(stream_slice.connection.businessName,
          {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
          >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
          }}"
        type: RecordFilter
    paginator:
      type: DefaultPaginator
      page_size_option:
        inject_into: request_parameter
        field_name: "limit"
        type: RequestOption
      pagination_strategy:
        type: OffsetIncrement
        page_size: 100
      page_token_option:
        type: RequestOption
        inject_into: request_parameter
        field_name: "offset"
    requester:
      type: HttpRequester
      url_base: "https://api.railz.ai/"
      http_method: "GET"
      authenticator:
        class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
        url: "https://auth.railz.ai/getAccess"
        client_id: "{{ config.client_id }}"
        secret_key: "{{ config.secret_key }}"
        lifetime: "PT3600S"
        type: CustomAuthenticator
      request_parameters:
        businessName: "{{ stream_slice.connection.businessName }}"
        serviceName: "{{ stream_slice.connection.serviceName }}"
        startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
        endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
        orderBy: "{{ parameters.cursor_field }}"
      path: "/commerce/products"
  transformations:
  - type: AddFields
    fields:
    - path:
      - "businessName"
      value: "{{ stream_slice.connection.businessName }}"
      type: AddedFieldDefinition
    - path:
      - "serviceName"
      value: "{{ stream_slice.connection.serviceName }}"
      type: AddedFieldDefinition
  incremental_sync:
    type: CustomIncrementalSync
    class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
    stream_slicers:
    - type: SubstreamPartitionRouter
      parent_stream_configs:
      - stream:
          type: DeclarativeStream
          retriever:
            type: SimpleRetriever
            record_selector:
              type: RecordSelector
              extractor:
                type: DpathExtractor
                field_path:
                - "data"
              record_filter:
                condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                  in parameters.serviceNames }}"
                type: RecordFilter
            paginator:
              type: DefaultPaginator
              page_size_option:
                inject_into: request_parameter
                field_name: "limit"
                type: RequestOption
              pagination_strategy:
                type: OffsetIncrement
                page_size: 100
              page_token_option:
                type: RequestOption
                inject_into: request_parameter
                field_name: "offset"
            requester:
              type: HttpRequester
              url_base: "https://api.railz.ai/"
              http_method: "GET"
              authenticator:
                class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                url: "https://auth.railz.ai/getAccess"
                client_id: "{{ config.client_id }}"
                secret_key: "{{ config.secret_key }}"
                lifetime: "PT3600S"
                type: CustomAuthenticator
              path: "/connections"
          name: "connections_slice"
        parent_key: "/"
        partition_field: "connection"
        type: ParentStreamConfig
    - type: DatetimeBasedCursor
      start_datetime:
        datetime: "{{ config['start_date'] }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      end_datetime:
        datetime: "{{ today_utc() }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      step: "P1M"
      datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
      cursor_granularity: "P1D"
      cursor_field: "createdDate"
    cursor_field: "createdDate"
  primary_key: "id"
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        id:
          type:
          - string
          - integer
        businessName:
          type: string
        serviceName:
          type: string
        type:
          type:
          - 'null'
          - string
        name:
          type: string
        description:
          type:
          - 'null'
          - string
        createdDate:
          type: string
          format: date-time
        sourceModifiedDate:
          type: string
          format: date-time
        status:
          type: string
        isGiftCard:
          type:
          - 'null'
          - boolean
        productVariants:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - string
                - integer
              name:
                type: string
              isTaxEnabled:
                type:
                - 'null'
                - boolean
              sku:
                type:
                - 'null'
                - string
              barcode:
                type:
                - 'null'
                - string
              weight:
                type:
                - 'null'
                - object
                properties:
                  value:
                    type:
                    - 'null'
                    - number
                  unitOfMeasure:
                    type:
                    - 'null'
                    - string
              unitPrice:
                type: number
              inventory:
                type:
                - 'null'
                - object
                properties:
                  totalQuantity:
                    type:
                    - 'null'
                    - number
                  quantityPerLocation:
                    type:
                    - 'null'
                    - array
                    items:
                      type:
                      - 'null'
                      - object
                      properties:
                        quantity:
                          type:
                          - 'null'
                          - number
                        locationRef:
                          type:
                          - 'null'
                          - object
                          properties:
                            id:
                              type:
                              - 'null'
                              - string
                              - integer
                            name:
                              type:
                              - 'null'
                              - string
              isShippingRequired:
                type:
                - 'null'
                - boolean
              createdDate:
                type: string
                format: date-time
  name: "commerce_products"
- type: DeclarativeStream
  retriever:
    type: SimpleRetriever
    record_selector:
      type: RecordSelector
      extractor:
        type: DpathExtractor
        field_path:
        - "data"
      record_filter:
        condition: "{{ not stream_state.get(stream_slice.connection.businessName,
          {}).get(stream_slice.connection.serviceName) or record[parameters.cursor_field]
          >= stream_state[stream_slice.connection.businessName][stream_slice.connection.serviceName][parameters.cursor_field]
          }}"
        type: RecordFilter
    paginator:
      type: DefaultPaginator
      page_size_option:
        inject_into: request_parameter
        field_name: "limit"
        type: RequestOption
      pagination_strategy:
        type: OffsetIncrement
        page_size: 100
      page_token_option:
        type: RequestOption
        inject_into: request_parameter
        field_name: "offset"
    requester:
      type: HttpRequester
      url_base: "https://api.railz.ai/"
      http_method: "GET"
      authenticator:
        class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
        url: "https://auth.railz.ai/getAccess"
        client_id: "{{ config.client_id }}"
        secret_key: "{{ config.secret_key }}"
        lifetime: "PT3600S"
        type: CustomAuthenticator
      request_parameters:
        businessName: "{{ stream_slice.connection.businessName }}"
        serviceName: "{{ stream_slice.connection.serviceName }}"
        startDate: "{{ format_datetime(stream_slice.start_time, '%Y-%m-%d') }}"
        endDate: "{{ format_datetime(stream_slice.end_time, '%Y-%m-%d') }}"
        orderBy: "{{ parameters.cursor_field }}"
      path: "/commerce/transactions"
  transformations:
  - type: AddFields
    fields:
    - path:
      - "businessName"
      value: "{{ stream_slice.connection.businessName }}"
      type: AddedFieldDefinition
    - path:
      - "serviceName"
      value: "{{ stream_slice.connection.serviceName }}"
      type: AddedFieldDefinition
  incremental_sync:
    type: CustomIncrementalSync
    class_name: source_declarative_manifest.components.NestedStateCartesianProductStreamSlicer
    stream_slicers:
    - type: SubstreamPartitionRouter
      parent_stream_configs:
      - stream:
          type: DeclarativeStream
          retriever:
            type: SimpleRetriever
            record_selector:
              type: RecordSelector
              extractor:
                type: DpathExtractor
                field_path:
                - "data"
              record_filter:
                condition: "{{ record.status in ['active', 'expired'] and record.serviceName
                  in parameters.serviceNames }}"
                type: RecordFilter
            paginator:
              type: DefaultPaginator
              page_size_option:
                inject_into: request_parameter
                field_name: "limit"
                type: RequestOption
              pagination_strategy:
                type: OffsetIncrement
                page_size: 100
              page_token_option:
                type: RequestOption
                inject_into: request_parameter
                field_name: "offset"
            requester:
              type: HttpRequester
              url_base: "https://api.railz.ai/"
              http_method: "GET"
              authenticator:
                class_name: source_declarative_manifest.components.ShortLivedTokenAuthenticator
                url: "https://auth.railz.ai/getAccess"
                client_id: "{{ config.client_id }}"
                secret_key: "{{ config.secret_key }}"
                lifetime: "PT3600S"
                type: CustomAuthenticator
              path: "/connections"
          name: "connections_slice"
        parent_key: "/"
        partition_field: "connection"
        type: ParentStreamConfig
    - type: DatetimeBasedCursor
      start_datetime:
        datetime: "{{ config['start_date'] }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      end_datetime:
        datetime: "{{ today_utc() }}"
        datetime_format: "%Y-%m-%d"
        type: MinMaxDatetime
      step: "P1M"
      datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
      cursor_granularity: "P1D"
      cursor_field: "createdDate"
    cursor_field: "createdDate"
  primary_key: "id"
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        id:
          type:
          - string
          - integer
        businessName:
          type: string
        serviceName:
          type: string
        orderId:
          type:
          - 'null'
          - string
        paymentMethodType:
          type:
          - 'null'
          - string
        totalAmount:
          type:
          - 'null'
          - number
          - string
        currencyRef:
          type:
          - 'null'
          - object
          properties:
            id:
              type:
              - 'null'
              - string
              - integer
            name:
              type: string
            symbol:
              type: string
        transactionSourceRefs:
          type:
          - 'null'
          - array
          items:
            type:
            - 'null'
            - object
            properties:
              id:
                type:
                - string
                - integer
              type:
                type: string
        transactionType:
          type:
          - string
          - number
        createdDate:
          type: string
          format: date-time
        sourceModifiedDate:
          type:
          - 'null'
          - string
          format: date-time
        status:
          type: string
  name: "commerce_transactions"
check:
  stream_names:
  - "businesses"
  type: CheckStream
spec:
  type: Spec
  documentation_url: https://docsurl.com
  connection_specification:
    $schema: http://json-schema.org/draft-07/schema#
    title: Railz Spec
    type: object
    required:
    - client_id
    - secret_key
    - start_date
    properties:
      client_id:
        type: string
        title: Client ID
        description: Client ID (client_id)
        order: 0
      secret_key:
        type: string
        title: Secret key
        description: Secret key (secret_key)
        order: 1
        airbyte_secret: true
      start_date:
        type: string
        title: Start date
        description: Start date
        pattern: ^[0-9]{4}-[0-9]{2}-[0-9]{2}$
        order: 2
type: DeclarativeSource
