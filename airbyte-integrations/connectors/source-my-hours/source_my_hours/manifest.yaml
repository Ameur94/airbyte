version: 0.44.0
type: DeclarativeSource
check:
  type: CheckStream
  stream_names:
    - users
streams:
  - type: DeclarativeStream
    name: users
    primary_key:
      - id
    retriever:
      type: SimpleRetriever
      requester:
        type: HttpRequester
        url_base: https://api2.myhours.com/api
        path: Users/getAll
        http_method: GET
        request_parameters: {}
        request_headers: {}
        authenticator:
          type: BearerAuthenticator
          api_token: '{{ config[''api_key''] }}'
        request_body_json: {}
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path: []
      paginator:
        type: NoPagination
  - type: DeclarativeStream
    name: time_logs
    primary_key:
      - logId
    retriever:
      type: SimpleRetriever
      requester:
        type: HttpRequester
        url_base: https://api2.myhours.com/api
        path: Reports/activity
        http_method: GET
        request_parameters:
          DateFrom: '{{ config[''start_date''] }}'
          DateTo: '{{ today_utc() }}'
        request_headers: {}
        authenticator:
          type: BearerAuthenticator
          api_token: '{{ config[''api_key''] }}'
        request_body_json: {}
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path: []
      paginator:
        type: NoPagination
  - type: DeclarativeStream
    name: tags
    primary_key:
      - id
    retriever:
      type: SimpleRetriever
      requester:
        type: HttpRequester
        url_base: https://api2.myhours.com/api
        path: Tags
        http_method: GET
        request_parameters: {}
        request_headers: {}
        authenticator:
          type: BearerAuthenticator
          api_token: '{{ config[''api_key''] }}'
        request_body_json: {}
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path: []
      paginator:
        type: NoPagination
  - type: DeclarativeStream
    name: projects
    primary_key:
      - id
    retriever:
      type: SimpleRetriever
      requester:
        type: HttpRequester
        url_base: https://api2.myhours.com/api
        path: Projects/getAll
        http_method: GET
        request_parameters: {}
        request_headers: {}
        authenticator:
          type: BearerAuthenticator
          api_token: '{{ config[''api_key''] }}'
        request_body_json: {}
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path: []
      paginator:
        type: NoPagination
  - type: DeclarativeStream
    name: clients
    primary_key: 
      - id
    retriever:
      type: SimpleRetriever
      requester:
        type: HttpRequester
        url_base: https://api2.myhours.com/api
        path: Clients
        http_method: GET
        request_parameters: {}
        request_headers: {}
        authenticator:
          type: BearerAuthenticator
          api_token: '{{ config[''api_key''] }}'
        request_body_json: {}
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_path: []
      paginator:
        type: NoPagination
spec:
  connection_specification:
    $schema: http://json-schema.org/draft-07/schema#
    type: object
    required:
      - api_key
      - start_date
    properties:
      api_key:
        type: string
        title: access_token
        description:
          My Hours Access Token. See the <a href="https://docs.airbyte.com/integrations/sources/my-hours">docs</a>
          for more information on how to generate this key.
        airbyte_secret: true
        order: 0
      start_date:
        title: start_date
        default: '2021-12-01'
        description: Start date for collecting time logs
        examples:
        - "%Y-%m-%d"
        - '2016-01-01'
        pattern: "^[0-9]{4}-[0-9]{2}-[0-9]{2}$"
        type: string
        order: 1
    additionalProperties: true
  documentation_url: https://docs.airbyte.com/integrations/sources/my-hours
  type: Spec
metadata:
  autoImportSchema:
    users: false
    time_logs: false
    tags: false
    projects: false
    clients: false
