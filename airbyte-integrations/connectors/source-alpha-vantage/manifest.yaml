version: "4.3.2"
definitions:
  selector:
    type: RecordSelector
    extractor:
      class_name: source_declarative_manifest.components.ObjectDpathExtractor
      field_path:
      - "{{ parameters['dpath'] }}"
      inject_key_as_field: "{{ parameters['key_field'] }}"
  requester:
    url_base: "https://www.alphavantage.co"
    http_method: "GET"
    authenticator:
      type: NoAuth
    request_parameters:
      apikey: "{{ config['api_key'] }}"
      symbol: "{{ config['symbol'] }}"
      function: "{{ parameters['function'] }}"
      datatype: json
      outputsize: "{{ config['outputsize'] }}"
      interval: "{{ config['interval'] }}"
      adjusted: "{{ config['adjusted'] }}"
  retriever:
    record_selector:
      type: RecordSelector
      extractor:
        class_name: source_declarative_manifest.components.ObjectDpathExtractor
        field_path:
        - "{{ parameters['dpath'] }}"
        inject_key_as_field: "{{ parameters['key_field'] }}"
    paginator:
      type: NoPagination
    requester:
      url_base: "https://www.alphavantage.co"
      http_method: "GET"
      authenticator:
        type: NoAuth
      request_parameters:
        apikey: "{{ config['api_key'] }}"
        symbol: "{{ config['symbol'] }}"
        function: "{{ parameters['function'] }}"
        datatype: json
        outputsize: "{{ config['outputsize'] }}"
        interval: "{{ config['interval'] }}"
        adjusted: "{{ config['adjusted'] }}"
  base_stream:
    retriever:
      record_selector:
        type: RecordSelector
        extractor:
          class_name: source_declarative_manifest.components.ObjectDpathExtractor
          field_path:
          - "{{ parameters['dpath'] }}"
          inject_key_as_field: "{{ parameters['key_field'] }}"
      paginator:
        type: NoPagination
      requester:
        url_base: "https://www.alphavantage.co"
        http_method: "GET"
        authenticator:
          type: NoAuth
        request_parameters:
          apikey: "{{ config['api_key'] }}"
          symbol: "{{ config['symbol'] }}"
          function: "{{ parameters['function'] }}"
          datatype: json
          outputsize: "{{ config['outputsize'] }}"
          interval: "{{ config['interval'] }}"
          adjusted: "{{ config['adjusted'] }}"
  time_series_intraday_stream:
    retriever:
      record_selector:
        type: RecordSelector
        extractor:
          class_name: source_declarative_manifest.components.ObjectDpathExtractor
          field_path:
          - "{{ parameters['dpath'] }}"
          inject_key_as_field: "{{ parameters['key_field'] }}"
      paginator:
        type: NoPagination
      requester:
        url_base: "https://www.alphavantage.co"
        http_method: "GET"
        authenticator:
          type: NoAuth
        request_parameters:
          apikey: "{{ config['api_key'] }}"
          symbol: "{{ config['symbol'] }}"
          function: "{{ parameters['function'] }}"
          datatype: json
          outputsize: "{{ config['outputsize'] }}"
          interval: "{{ config['interval'] }}"
          adjusted: "{{ config['adjusted'] }}"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          1. open:
            type:
            - string
            - 'null'
          2. high:
            type:
            - string
            - 'null'
          3. low:
            type:
            - string
            - 'null'
          4. close:
            type:
            - string
            - 'null'
          5. volume:
            type:
            - string
            - 'null'
  time_series_daily_stream:
    retriever:
      record_selector:
        type: RecordSelector
        extractor:
          class_name: source_declarative_manifest.components.ObjectDpathExtractor
          field_path:
          - "{{ parameters['dpath'] }}"
          inject_key_as_field: "{{ parameters['key_field'] }}"
      paginator:
        type: NoPagination
      requester:
        url_base: "https://www.alphavantage.co"
        http_method: "GET"
        authenticator:
          type: NoAuth
        request_parameters:
          apikey: "{{ config['api_key'] }}"
          symbol: "{{ config['symbol'] }}"
          function: "{{ parameters['function'] }}"
          datatype: json
          outputsize: "{{ config['outputsize'] }}"
          interval: "{{ config['interval'] }}"
          adjusted: "{{ config['adjusted'] }}"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          1. open:
            type:
            - string
            - 'null'
          2. high:
            type:
            - string
            - 'null'
          3. low:
            type:
            - string
            - 'null'
          4. close:
            type:
            - string
            - 'null'
          5. volume:
            type:
            - string
            - 'null'
  time_series_daily_adjusted_stream:
    retriever:
      record_selector:
        type: RecordSelector
        extractor:
          class_name: source_declarative_manifest.components.ObjectDpathExtractor
          field_path:
          - "{{ parameters['dpath'] }}"
          inject_key_as_field: "{{ parameters['key_field'] }}"
      paginator:
        type: NoPagination
      requester:
        url_base: "https://www.alphavantage.co"
        http_method: "GET"
        authenticator:
          type: NoAuth
        request_parameters:
          apikey: "{{ config['api_key'] }}"
          symbol: "{{ config['symbol'] }}"
          function: "{{ parameters['function'] }}"
          datatype: json
          outputsize: "{{ config['outputsize'] }}"
          interval: "{{ config['interval'] }}"
          adjusted: "{{ config['adjusted'] }}"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          1. open:
            type: string
          2. high:
            type: string
          3. low:
            type: string
          4. close:
            type: string
          5. adjusted close:
            type: string
          6. volume:
            type: string
          7. dividend amount:
            type: string
          8. split coefficient:
            type: string
  time_series_weekly_stream:
    retriever:
      record_selector:
        type: RecordSelector
        extractor:
          class_name: source_declarative_manifest.components.ObjectDpathExtractor
          field_path:
          - "{{ parameters['dpath'] }}"
          inject_key_as_field: "{{ parameters['key_field'] }}"
      paginator:
        type: NoPagination
      requester:
        url_base: "https://www.alphavantage.co"
        http_method: "GET"
        authenticator:
          type: NoAuth
        request_parameters:
          apikey: "{{ config['api_key'] }}"
          symbol: "{{ config['symbol'] }}"
          function: "{{ parameters['function'] }}"
          datatype: json
          outputsize: "{{ config['outputsize'] }}"
          interval: "{{ config['interval'] }}"
          adjusted: "{{ config['adjusted'] }}"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          1. open:
            type:
            - string
            - 'null'
          2. high:
            type:
            - string
            - 'null'
          3. low:
            type:
            - string
            - 'null'
          4. close:
            type:
            - string
            - 'null'
          5. volume:
            type:
            - string
            - 'null'
  time_series_weekly_adjusted_stream:
    retriever:
      record_selector:
        type: RecordSelector
        extractor:
          class_name: source_declarative_manifest.components.ObjectDpathExtractor
          field_path:
          - "{{ parameters['dpath'] }}"
          inject_key_as_field: "{{ parameters['key_field'] }}"
      paginator:
        type: NoPagination
      requester:
        url_base: "https://www.alphavantage.co"
        http_method: "GET"
        authenticator:
          type: NoAuth
        request_parameters:
          apikey: "{{ config['api_key'] }}"
          symbol: "{{ config['symbol'] }}"
          function: "{{ parameters['function'] }}"
          datatype: json
          outputsize: "{{ config['outputsize'] }}"
          interval: "{{ config['interval'] }}"
          adjusted: "{{ config['adjusted'] }}"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          1. open:
            type: string
          2. high:
            type: string
          3. low:
            type: string
          4. close:
            type: string
          5. adjusted close:
            type: string
          6. volume:
            type: string
          7. dividend amount:
            type: string
  time_series_monthly_stream:
    retriever:
      record_selector:
        type: RecordSelector
        extractor:
          class_name: source_declarative_manifest.components.ObjectDpathExtractor
          field_path:
          - "{{ parameters['dpath'] }}"
          inject_key_as_field: "{{ parameters['key_field'] }}"
      paginator:
        type: NoPagination
      requester:
        url_base: "https://www.alphavantage.co"
        http_method: "GET"
        authenticator:
          type: NoAuth
        request_parameters:
          apikey: "{{ config['api_key'] }}"
          symbol: "{{ config['symbol'] }}"
          function: "{{ parameters['function'] }}"
          datatype: json
          outputsize: "{{ config['outputsize'] }}"
          interval: "{{ config['interval'] }}"
          adjusted: "{{ config['adjusted'] }}"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          1. open:
            type:
            - string
            - 'null'
          2. high:
            type:
            - string
            - 'null'
          3. low:
            type:
            - string
            - 'null'
          4. close:
            type:
            - string
            - 'null'
          5. volume:
            type:
            - string
            - 'null'
  time_series_monthly_adjusted_stream:
    retriever:
      record_selector:
        type: RecordSelector
        extractor:
          class_name: source_declarative_manifest.components.ObjectDpathExtractor
          field_path:
          - "{{ parameters['dpath'] }}"
          inject_key_as_field: "{{ parameters['key_field'] }}"
      paginator:
        type: NoPagination
      requester:
        url_base: "https://www.alphavantage.co"
        http_method: "GET"
        authenticator:
          type: NoAuth
        request_parameters:
          apikey: "{{ config['api_key'] }}"
          symbol: "{{ config['symbol'] }}"
          function: "{{ parameters['function'] }}"
          datatype: json
          outputsize: "{{ config['outputsize'] }}"
          interval: "{{ config['interval'] }}"
          adjusted: "{{ config['adjusted'] }}"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          1. open:
            type: string
          2. high:
            type: string
          3. low:
            type: string
          4. close:
            type: string
          5. adjusted close:
            type: string
          6. volume:
            type: string
          7. dividend amount:
            type: string
  quote_stream:
    retriever:
      record_selector:
        type: RecordSelector
        extractor:
          class_name: source_declarative_manifest.components.ObjectDpathExtractor
          field_path:
          - "{{ parameters['dpath'] }}"
          inject_key_as_field: "{{ parameters['key_field'] }}"
      paginator:
        type: NoPagination
      requester:
        url_base: "https://www.alphavantage.co"
        http_method: "GET"
        authenticator:
          type: NoAuth
        request_parameters:
          apikey: "{{ config['api_key'] }}"
          symbol: "{{ config['symbol'] }}"
          function: "{{ parameters['function'] }}"
          datatype: json
          outputsize: "{{ config['outputsize'] }}"
          interval: "{{ config['interval'] }}"
          adjusted: "{{ config['adjusted'] }}"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          Global Quote:
            01. symbol:
              type:
              - string
              - 'null'
            02. open:
              type:
              - string
              - 'null'
            03. high:
              type:
              - string
              - 'null'
            04. low:
              type:
              - string
              - 'null'
            05. price:
              type:
              - string
              - 'null'
            06. volume:
              type:
              - string
              - 'null'
            07. latest trading day:
              type:
              - string
              - 'null'
            08. previous close:
              type:
              - string
              - 'null'
            09. change:
              type:
              - string
              - 'null'
            10. change percent:
              type:
              - string
              - 'null'
streams:
- retriever:
    record_selector:
      type: RecordSelector
      extractor:
        class_name: source_declarative_manifest.components.ObjectDpathExtractor
        field_path:
        - "{{ parameters['dpath'] }}"
        inject_key_as_field: "{{ parameters['key_field'] }}"
        type: CustomRecordExtractor
    paginator:
      type: NoPagination
    requester:
      url_base: "https://www.alphavantage.co"
      http_method: "GET"
      authenticator:
        type: NoAuth
      request_parameters:
        apikey: "{{ config['api_key'] }}"
        symbol: "{{ config['symbol'] }}"
        function: "{{ parameters['function'] }}"
        datatype: json
        outputsize: "{{ config['outputsize'] }}"
        interval: "{{ config['interval'] }}"
        adjusted: "{{ config['adjusted'] }}"
      type: HttpRequester
      path: "/query"
    type: SimpleRetriever
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        1. open:
          type:
          - string
          - 'null'
        2. high:
          type:
          - string
          - 'null'
        3. low:
          type:
          - string
          - 'null'
        4. close:
          type:
          - string
          - 'null'
        5. volume:
          type:
          - string
          - 'null'
  type: DeclarativeStream
  name: "time_series_intraday"
- retriever:
    record_selector:
      type: RecordSelector
      extractor:
        class_name: source_declarative_manifest.components.ObjectDpathExtractor
        field_path:
        - "{{ parameters['dpath'] }}"
        inject_key_as_field: "{{ parameters['key_field'] }}"
        type: CustomRecordExtractor
    paginator:
      type: NoPagination
    requester:
      url_base: "https://www.alphavantage.co"
      http_method: "GET"
      authenticator:
        type: NoAuth
      request_parameters:
        apikey: "{{ config['api_key'] }}"
        symbol: "{{ config['symbol'] }}"
        function: "{{ parameters['function'] }}"
        datatype: json
        outputsize: "{{ config['outputsize'] }}"
        interval: "{{ config['interval'] }}"
        adjusted: "{{ config['adjusted'] }}"
      type: HttpRequester
      path: "/query"
    type: SimpleRetriever
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        1. open:
          type:
          - string
          - 'null'
        2. high:
          type:
          - string
          - 'null'
        3. low:
          type:
          - string
          - 'null'
        4. close:
          type:
          - string
          - 'null'
        5. volume:
          type:
          - string
          - 'null'
  type: DeclarativeStream
  name: "time_series_daily"
- retriever:
    record_selector:
      type: RecordSelector
      extractor:
        class_name: source_declarative_manifest.components.ObjectDpathExtractor
        field_path:
        - "{{ parameters['dpath'] }}"
        inject_key_as_field: "{{ parameters['key_field'] }}"
        type: CustomRecordExtractor
    paginator:
      type: NoPagination
    requester:
      url_base: "https://www.alphavantage.co"
      http_method: "GET"
      authenticator:
        type: NoAuth
      request_parameters:
        apikey: "{{ config['api_key'] }}"
        symbol: "{{ config['symbol'] }}"
        function: "{{ parameters['function'] }}"
        datatype: json
        outputsize: "{{ config['outputsize'] }}"
        interval: "{{ config['interval'] }}"
        adjusted: "{{ config['adjusted'] }}"
      type: HttpRequester
      path: "/query"
    type: SimpleRetriever
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        1. open:
          type: string
        2. high:
          type: string
        3. low:
          type: string
        4. close:
          type: string
        5. adjusted close:
          type: string
        6. volume:
          type: string
        7. dividend amount:
          type: string
        8. split coefficient:
          type: string
  type: DeclarativeStream
  name: "time_series_daily_adjusted"
- retriever:
    record_selector:
      type: RecordSelector
      extractor:
        class_name: source_declarative_manifest.components.ObjectDpathExtractor
        field_path:
        - "{{ parameters['dpath'] }}"
        inject_key_as_field: "{{ parameters['key_field'] }}"
        type: CustomRecordExtractor
    paginator:
      type: NoPagination
    requester:
      url_base: "https://www.alphavantage.co"
      http_method: "GET"
      authenticator:
        type: NoAuth
      request_parameters:
        apikey: "{{ config['api_key'] }}"
        symbol: "{{ config['symbol'] }}"
        function: "{{ parameters['function'] }}"
        datatype: json
        outputsize: "{{ config['outputsize'] }}"
        interval: "{{ config['interval'] }}"
        adjusted: "{{ config['adjusted'] }}"
      type: HttpRequester
      path: "/query"
    type: SimpleRetriever
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        1. open:
          type:
          - string
          - 'null'
        2. high:
          type:
          - string
          - 'null'
        3. low:
          type:
          - string
          - 'null'
        4. close:
          type:
          - string
          - 'null'
        5. volume:
          type:
          - string
          - 'null'
  type: DeclarativeStream
  name: "time_series_weekly"
- retriever:
    record_selector:
      type: RecordSelector
      extractor:
        class_name: source_declarative_manifest.components.ObjectDpathExtractor
        field_path:
        - "{{ parameters['dpath'] }}"
        inject_key_as_field: "{{ parameters['key_field'] }}"
        type: CustomRecordExtractor
    paginator:
      type: NoPagination
    requester:
      url_base: "https://www.alphavantage.co"
      http_method: "GET"
      authenticator:
        type: NoAuth
      request_parameters:
        apikey: "{{ config['api_key'] }}"
        symbol: "{{ config['symbol'] }}"
        function: "{{ parameters['function'] }}"
        datatype: json
        outputsize: "{{ config['outputsize'] }}"
        interval: "{{ config['interval'] }}"
        adjusted: "{{ config['adjusted'] }}"
      type: HttpRequester
      path: "/query"
    type: SimpleRetriever
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        1. open:
          type: string
        2. high:
          type: string
        3. low:
          type: string
        4. close:
          type: string
        5. adjusted close:
          type: string
        6. volume:
          type: string
        7. dividend amount:
          type: string
  type: DeclarativeStream
  name: "time_series_weekly_adjusted"
- retriever:
    record_selector:
      type: RecordSelector
      extractor:
        class_name: source_declarative_manifest.components.ObjectDpathExtractor
        field_path:
        - "{{ parameters['dpath'] }}"
        inject_key_as_field: "{{ parameters['key_field'] }}"
        type: CustomRecordExtractor
    paginator:
      type: NoPagination
    requester:
      url_base: "https://www.alphavantage.co"
      http_method: "GET"
      authenticator:
        type: NoAuth
      request_parameters:
        apikey: "{{ config['api_key'] }}"
        symbol: "{{ config['symbol'] }}"
        function: "{{ parameters['function'] }}"
        datatype: json
        outputsize: "{{ config['outputsize'] }}"
        interval: "{{ config['interval'] }}"
        adjusted: "{{ config['adjusted'] }}"
      type: HttpRequester
      path: "/query"
    type: SimpleRetriever
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        1. open:
          type:
          - string
          - 'null'
        2. high:
          type:
          - string
          - 'null'
        3. low:
          type:
          - string
          - 'null'
        4. close:
          type:
          - string
          - 'null'
        5. volume:
          type:
          - string
          - 'null'
  type: DeclarativeStream
  name: "time_series_monthly"
- retriever:
    record_selector:
      type: RecordSelector
      extractor:
        class_name: source_declarative_manifest.components.ObjectDpathExtractor
        field_path:
        - "{{ parameters['dpath'] }}"
        inject_key_as_field: "{{ parameters['key_field'] }}"
        type: CustomRecordExtractor
    paginator:
      type: NoPagination
    requester:
      url_base: "https://www.alphavantage.co"
      http_method: "GET"
      authenticator:
        type: NoAuth
      request_parameters:
        apikey: "{{ config['api_key'] }}"
        symbol: "{{ config['symbol'] }}"
        function: "{{ parameters['function'] }}"
        datatype: json
        outputsize: "{{ config['outputsize'] }}"
        interval: "{{ config['interval'] }}"
        adjusted: "{{ config['adjusted'] }}"
      type: HttpRequester
      path: "/query"
    type: SimpleRetriever
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        1. open:
          type: string
        2. high:
          type: string
        3. low:
          type: string
        4. close:
          type: string
        5. adjusted close:
          type: string
        6. volume:
          type: string
        7. dividend amount:
          type: string
  type: DeclarativeStream
  name: "time_series_monthly_adjusted"
- retriever:
    record_selector:
      type: RecordSelector
      extractor:
        class_name: source_declarative_manifest.components.ObjectDpathExtractor
        field_path:
        - "{{ parameters['dpath'] }}"
        inject_key_as_field: "{{ parameters['key_field'] }}"
        type: CustomRecordExtractor
    paginator:
      type: NoPagination
    requester:
      url_base: "https://www.alphavantage.co"
      http_method: "GET"
      authenticator:
        type: NoAuth
      request_parameters:
        apikey: "{{ config['api_key'] }}"
        symbol: "{{ config['symbol'] }}"
        function: "{{ parameters['function'] }}"
        datatype: json
        outputsize: "{{ config['outputsize'] }}"
        interval: "{{ config['interval'] }}"
        adjusted: "{{ config['adjusted'] }}"
      type: HttpRequester
      path: "/query"
    type: SimpleRetriever
  schema_loader:
    type: InlineSchemaLoader
    schema:
      $schema: http://json-schema.org/draft-07/schema#
      type: object
      properties:
        Global Quote:
          01. symbol:
            type:
            - string
            - 'null'
          02. open:
            type:
            - string
            - 'null'
          03. high:
            type:
            - string
            - 'null'
          04. low:
            type:
            - string
            - 'null'
          05. price:
            type:
            - string
            - 'null'
          06. volume:
            type:
            - string
            - 'null'
          07. latest trading day:
            type:
            - string
            - 'null'
          08. previous close:
            type:
            - string
            - 'null'
          09. change:
            type:
            - string
            - 'null'
          10. change percent:
            type:
            - string
            - 'null'
  type: DeclarativeStream
  name: "quote"
check:
  stream_names:
  - "time_series_weekly"
  - "time_series_weekly_adjusted"
  type: CheckStream
type: DeclarativeSource
spec:
  type: Spec
  documentation_url: https://docs.airbyte.io/integrations/sources/alpha-vantage
  connection_specification:
    $schema: http://json-schema.org/draft-07/schema#
    title: Alpha Vantage Spec
    type: object
    required:
    - api_key
    - symbol
    properties:
      api_key:
        title: API Key
        type: string
        description: API Key
        airbyte_secret: true
        order: 0
      symbol:
        title: Symbol
        type: string
        description: Stock symbol (with exchange code)
        examples:
        - AAPL
        - TSCO.LON
        order: 1
      interval:
        title: Interval
        type: string
        description: |
          Time-series data point interval. Required for intraday endpoints.
        enum:
        - 1min
        - 5min
        - 15min
        - 30min
        - 60min
        default: 1min
        order: 2
      adjusted:
        title: Adjusted?
        type: boolean
        description: |
          Whether to return adjusted data. Only applicable to intraday endpoints.
        default: false
        order: 3
      outputsize:
        title: Output Size
        type: string
        description: |
          Whether to return full or compact data (the last 100 data points).
        enum:
        - compact
        - full
        default: compact
        order: 4
