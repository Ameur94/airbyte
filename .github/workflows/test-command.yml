name: On-Demand Connector Tests for PRs
on:
  workflow_dispatch:
    inputs:
      connector:
        description: "Airbyte Connector"
        required: true
      repo:
        description: "Repo to check out code from. Defaults to the main airbyte repo. Set this when building connectors from forked repos."
        required: false
        default: "airbytehq/airbyte"
      gitref:
        description: "The git ref to check out from the specified repository."
        required: false
        default: master
      pr:
        description: "Pull request number. Used to link the comment to the PR."
        required: false
      comment-id:
        description: "The comment-id of the slash command. Used to update the comment with the status."
        required: false
jobs:
  write-deprecation-message:
    runs-on: ubuntu-latest
    steps:
      - name: Print deprecation message
        uses: peter-evans/create-or-update-comment@v1
        with:
          comment-id: ${{ github.event.inputs.comment-id }}
          body: |
            > :warning: The test slash command is now deprecated.<br>
            The connector tests are automatically triggered as CI checks.<br>
            Please use /legacy-test if you need to test CDK or CAT changes.<br>
            Please join post to #pipeline-complaint-hotline slack channel if something is not working as expected.<br>
